var Uv=Object.defineProperty;var Op=r=>{throw TypeError(r)};var Fv=(r,e,t)=>e in r?Uv(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var mr=(r,e,t)=>Fv(r,typeof e!="symbol"?e+"":e,t),dd=(r,e,t)=>e.has(r)||Op("Cannot "+t);var R=(r,e,t)=>(dd(r,e,"read from private field"),t?t.call(r):e.get(r)),je=(r,e,t)=>e.has(r)?Op("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),le=(r,e,t,n)=>(dd(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),Ue=(r,e,t)=>(dd(r,e,"access private method"),t);var Hl=(r,e,t,n)=>({set _(o){le(r,e,o,t)},get _(){return R(r,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Mv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var hd={exports:{}},Yi={},fd={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function zv(){if(Ip)return ze;Ip=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.iterator;function b(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,_={};function j(D,G,Pe){this.props=D,this.context=G,this.refs=_,this.updater=Pe||w}j.prototype.isReactComponent={},j.prototype.setState=function(D,G){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,G,"setState")},j.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function P(){}P.prototype=j.prototype;function T(D,G,Pe){this.props=D,this.context=G,this.refs=_,this.updater=Pe||w}var C=T.prototype=new P;C.constructor=T,N(C,j.prototype),C.isPureReactComponent=!0;var F=Array.isArray,A=Object.prototype.hasOwnProperty,K={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function z(D,G,Pe){var Oe,Me={},Fe=null,Ke=null;if(G!=null)for(Oe in G.ref!==void 0&&(Ke=G.ref),G.key!==void 0&&(Fe=""+G.key),G)A.call(G,Oe)&&!H.hasOwnProperty(Oe)&&(Me[Oe]=G[Oe]);var Ve=arguments.length-2;if(Ve===1)Me.children=Pe;else if(1<Ve){for(var et=Array(Ve),pt=0;pt<Ve;pt++)et[pt]=arguments[pt+2];Me.children=et}if(D&&D.defaultProps)for(Oe in Ve=D.defaultProps,Ve)Me[Oe]===void 0&&(Me[Oe]=Ve[Oe]);return{$$typeof:r,type:D,key:Fe,ref:Ke,props:Me,_owner:K.current}}function V(D,G){return{$$typeof:r,type:D.type,key:G,ref:D.ref,props:D.props,_owner:D._owner}}function W(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function Z(D){var G={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Pe){return G[Pe]})}var ae=/\/+/g;function de(D,G){return typeof D=="object"&&D!==null&&D.key!=null?Z(""+D.key):G.toString(36)}function _e(D,G,Pe,Oe,Me){var Fe=typeof D;(Fe==="undefined"||Fe==="boolean")&&(D=null);var Ke=!1;if(D===null)Ke=!0;else switch(Fe){case"string":case"number":Ke=!0;break;case"object":switch(D.$$typeof){case r:case e:Ke=!0}}if(Ke)return Ke=D,Me=Me(Ke),D=Oe===""?"."+de(Ke,0):Oe,F(Me)?(Pe="",D!=null&&(Pe=D.replace(ae,"$&/")+"/"),_e(Me,G,Pe,"",function(pt){return pt})):Me!=null&&(W(Me)&&(Me=V(Me,Pe+(!Me.key||Ke&&Ke.key===Me.key?"":(""+Me.key).replace(ae,"$&/")+"/")+D)),G.push(Me)),1;if(Ke=0,Oe=Oe===""?".":Oe+":",F(D))for(var Ve=0;Ve<D.length;Ve++){Fe=D[Ve];var et=Oe+de(Fe,Ve);Ke+=_e(Fe,G,Pe,et,Me)}else if(et=b(D),typeof et=="function")for(D=et.call(D),Ve=0;!(Fe=D.next()).done;)Fe=Fe.value,et=Oe+de(Fe,Ve++),Ke+=_e(Fe,G,Pe,et,Me);else if(Fe==="object")throw G=String(D),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ke}function $e(D,G,Pe){if(D==null)return D;var Oe=[],Me=0;return _e(D,Oe,"","",function(Fe){return G.call(Pe,Fe,Me++)}),Oe}function Qe(D){if(D._status===-1){var G=D._result;G=G(),G.then(function(Pe){(D._status===0||D._status===-1)&&(D._status=1,D._result=Pe)},function(Pe){(D._status===0||D._status===-1)&&(D._status=2,D._result=Pe)}),D._status===-1&&(D._status=0,D._result=G)}if(D._status===1)return D._result.default;throw D._result}var Ne={current:null},ne={transition:null},we={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:ne,ReactCurrentOwner:K};function ie(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:$e,forEach:function(D,G,Pe){$e(D,function(){G.apply(this,arguments)},Pe)},count:function(D){var G=0;return $e(D,function(){G++}),G},toArray:function(D){return $e(D,function(G){return G})||[]},only:function(D){if(!W(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ze.Component=j,ze.Fragment=t,ze.Profiler=o,ze.PureComponent=T,ze.StrictMode=n,ze.Suspense=f,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,ze.act=ie,ze.cloneElement=function(D,G,Pe){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Oe=N({},D.props),Me=D.key,Fe=D.ref,Ke=D._owner;if(G!=null){if(G.ref!==void 0&&(Fe=G.ref,Ke=K.current),G.key!==void 0&&(Me=""+G.key),D.type&&D.type.defaultProps)var Ve=D.type.defaultProps;for(et in G)A.call(G,et)&&!H.hasOwnProperty(et)&&(Oe[et]=G[et]===void 0&&Ve!==void 0?Ve[et]:G[et])}var et=arguments.length-2;if(et===1)Oe.children=Pe;else if(1<et){Ve=Array(et);for(var pt=0;pt<et;pt++)Ve[pt]=arguments[pt+2];Oe.children=Ve}return{$$typeof:r,type:D.type,key:Me,ref:Fe,props:Oe,_owner:Ke}},ze.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:l,_context:D},D.Consumer=D},ze.createElement=z,ze.createFactory=function(D){var G=z.bind(null,D);return G.type=D,G},ze.createRef=function(){return{current:null}},ze.forwardRef=function(D){return{$$typeof:h,render:D}},ze.isValidElement=W,ze.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:Qe}},ze.memo=function(D,G){return{$$typeof:p,type:D,compare:G===void 0?null:G}},ze.startTransition=function(D){var G=ne.transition;ne.transition={};try{D()}finally{ne.transition=G}},ze.unstable_act=ie,ze.useCallback=function(D,G){return Ne.current.useCallback(D,G)},ze.useContext=function(D){return Ne.current.useContext(D)},ze.useDebugValue=function(){},ze.useDeferredValue=function(D){return Ne.current.useDeferredValue(D)},ze.useEffect=function(D,G){return Ne.current.useEffect(D,G)},ze.useId=function(){return Ne.current.useId()},ze.useImperativeHandle=function(D,G,Pe){return Ne.current.useImperativeHandle(D,G,Pe)},ze.useInsertionEffect=function(D,G){return Ne.current.useInsertionEffect(D,G)},ze.useLayoutEffect=function(D,G){return Ne.current.useLayoutEffect(D,G)},ze.useMemo=function(D,G){return Ne.current.useMemo(D,G)},ze.useReducer=function(D,G,Pe){return Ne.current.useReducer(D,G,Pe)},ze.useRef=function(D){return Ne.current.useRef(D)},ze.useState=function(D){return Ne.current.useState(D)},ze.useSyncExternalStore=function(D,G,Pe){return Ne.current.useSyncExternalStore(D,G,Pe)},ze.useTransition=function(){return Ne.current.useTransition()},ze.version="18.3.1",ze}var Dp;function wh(){return Dp||(Dp=1,fd.exports=zv()),fd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p;function Bv(){if($p)return Yi;$p=1;var r=wh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,p){var x,y={},b=null,w=null;p!==void 0&&(b=""+p),f.key!==void 0&&(b=""+f.key),f.ref!==void 0&&(w=f.ref);for(x in f)n.call(f,x)&&!l.hasOwnProperty(x)&&(y[x]=f[x]);if(h&&h.defaultProps)for(x in f=h.defaultProps,f)y[x]===void 0&&(y[x]=f[x]);return{$$typeof:e,type:h,key:b,ref:w,props:y,_owner:o.current}}return Yi.Fragment=t,Yi.jsx=u,Yi.jsxs=u,Yi}var Lp;function Vv(){return Lp||(Lp=1,hd.exports=Bv()),hd.exports}var i=Vv(),S=wh();const Qt=Mv(S);var Wl={},md={exports:{}},ar={},pd={exports:{}},gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up;function qv(){return Up||(Up=1,(function(r){function e(ne,we){var ie=ne.length;ne.push(we);e:for(;0<ie;){var D=ie-1>>>1,G=ne[D];if(0<o(G,we))ne[D]=we,ne[ie]=G,ie=D;else break e}}function t(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var we=ne[0],ie=ne.pop();if(ie!==we){ne[0]=ie;e:for(var D=0,G=ne.length,Pe=G>>>1;D<Pe;){var Oe=2*(D+1)-1,Me=ne[Oe],Fe=Oe+1,Ke=ne[Fe];if(0>o(Me,ie))Fe<G&&0>o(Ke,Me)?(ne[D]=Ke,ne[Fe]=ie,D=Fe):(ne[D]=Me,ne[Oe]=ie,D=Oe);else if(Fe<G&&0>o(Ke,ie))ne[D]=Ke,ne[Fe]=ie,D=Fe;else break e}}return we}function o(ne,we){var ie=ne.sortIndex-we.sortIndex;return ie!==0?ie:ne.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var f=[],p=[],x=1,y=null,b=3,w=!1,N=!1,_=!1,j=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ne){for(var we=t(p);we!==null;){if(we.callback===null)n(p);else if(we.startTime<=ne)n(p),we.sortIndex=we.expirationTime,e(f,we);else break;we=t(p)}}function F(ne){if(_=!1,C(ne),!N)if(t(f)!==null)N=!0,Qe(A);else{var we=t(p);we!==null&&Ne(F,we.startTime-ne)}}function A(ne,we){N=!1,_&&(_=!1,P(z),z=-1),w=!0;var ie=b;try{for(C(we),y=t(f);y!==null&&(!(y.expirationTime>we)||ne&&!Z());){var D=y.callback;if(typeof D=="function"){y.callback=null,b=y.priorityLevel;var G=D(y.expirationTime<=we);we=r.unstable_now(),typeof G=="function"?y.callback=G:y===t(f)&&n(f),C(we)}else n(f);y=t(f)}if(y!==null)var Pe=!0;else{var Oe=t(p);Oe!==null&&Ne(F,Oe.startTime-we),Pe=!1}return Pe}finally{y=null,b=ie,w=!1}}var K=!1,H=null,z=-1,V=5,W=-1;function Z(){return!(r.unstable_now()-W<V)}function ae(){if(H!==null){var ne=r.unstable_now();W=ne;var we=!0;try{we=H(!0,ne)}finally{we?de():(K=!1,H=null)}}else K=!1}var de;if(typeof T=="function")de=function(){T(ae)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,$e=_e.port2;_e.port1.onmessage=ae,de=function(){$e.postMessage(null)}}else de=function(){j(ae,0)};function Qe(ne){H=ne,K||(K=!0,de())}function Ne(ne,we){z=j(function(){ne(r.unstable_now())},we)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){N||w||(N=!0,Qe(A))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(ne){switch(b){case 1:case 2:case 3:var we=3;break;default:we=b}var ie=b;b=we;try{return ne()}finally{b=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,we){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ie=b;b=ne;try{return we()}finally{b=ie}},r.unstable_scheduleCallback=function(ne,we,ie){var D=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?D+ie:D):ie=D,ne){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ie+G,ne={id:x++,callback:we,priorityLevel:ne,startTime:ie,expirationTime:G,sortIndex:-1},ie>D?(ne.sortIndex=ie,e(p,ne),t(f)===null&&ne===t(p)&&(_?(P(z),z=-1):_=!0,Ne(F,ie-D))):(ne.sortIndex=G,e(f,ne),N||w||(N=!0,Qe(A))),ne},r.unstable_shouldYield=Z,r.unstable_wrapCallback=function(ne){var we=b;return function(){var ie=b;b=we;try{return ne.apply(this,arguments)}finally{b=ie}}}})(gd)),gd}var Fp;function Hv(){return Fp||(Fp=1,pd.exports=qv()),pd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp;function Wv(){if(Mp)return ar;Mp=1;var r=wh(),e=Hv();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function l(s,a){u(s,a),u(s+"Capture",a)}function u(s,a){for(o[s]=a,s=0;s<a.length;s++)n.add(a[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},y={};function b(s){return f.call(y,s)?!0:f.call(x,s)?!1:p.test(s)?y[s]=!0:(x[s]=!0,!1)}function w(s,a,c,d){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return d?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function N(s,a,c,d){if(a===null||typeof a>"u"||w(s,a,c,d))return!0;if(d)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function _(s,a,c,d,m,g,v){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=s,this.type=a,this.sanitizeURL=g,this.removeEmptyString=v}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){j[s]=new _(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];j[a]=new _(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){j[s]=new _(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){j[s]=new _(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){j[s]=new _(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){j[s]=new _(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){j[s]=new _(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){j[s]=new _(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){j[s]=new _(s,5,!1,s.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function T(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(P,T);j[a]=new _(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(P,T);j[a]=new _(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(P,T);j[a]=new _(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){j[s]=new _(s,1,!1,s.toLowerCase(),null,!1,!1)}),j.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){j[s]=new _(s,1,!1,s.toLowerCase(),null,!0,!0)});function C(s,a,c,d){var m=j.hasOwnProperty(a)?j[a]:null;(m!==null?m.type!==0:d||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(N(a,c,m,d)&&(c=null),d||m===null?b(a)&&(c===null?s.removeAttribute(a):s.setAttribute(a,""+c)):m.mustUseProperty?s[m.propertyName]=c===null?m.type===3?!1:"":c:(a=m.attributeName,d=m.attributeNamespace,c===null?s.removeAttribute(a):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,d?s.setAttributeNS(d,a,c):s.setAttribute(a,c))))}var F=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),K=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),Z=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),Qe=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),ne=Symbol.iterator;function we(s){return s===null||typeof s!="object"?null:(s=ne&&s[ne]||s["@@iterator"],typeof s=="function"?s:null)}var ie=Object.assign,D;function G(s){if(D===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);D=a&&a[1]||""}return`
`+D+s}var Pe=!1;function Oe(s,a){if(!s||Pe)return"";Pe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(B){var d=B}Reflect.construct(s,[],a)}else{try{a.call()}catch(B){d=B}s.call(a.prototype)}else{try{throw Error()}catch(B){d=B}s()}}catch(B){if(B&&d&&typeof B.stack=="string"){for(var m=B.stack.split(`
`),g=d.stack.split(`
`),v=m.length-1,E=g.length-1;1<=v&&0<=E&&m[v]!==g[E];)E--;for(;1<=v&&0<=E;v--,E--)if(m[v]!==g[E]){if(v!==1||E!==1)do if(v--,E--,0>E||m[v]!==g[E]){var O=`
`+m[v].replace(" at new "," at ");return s.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",s.displayName)),O}while(1<=v&&0<=E);break}}}finally{Pe=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?G(s):""}function Me(s){switch(s.tag){case 5:return G(s.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return s=Oe(s.type,!1),s;case 11:return s=Oe(s.type.render,!1),s;case 1:return s=Oe(s.type,!0),s;default:return""}}function Fe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case H:return"Fragment";case K:return"Portal";case V:return"Profiler";case z:return"StrictMode";case de:return"Suspense";case _e:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Z:return(s.displayName||"Context")+".Consumer";case W:return(s._context.displayName||"Context")+".Provider";case ae:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $e:return a=s.displayName||null,a!==null?a:Fe(s.type)||"Memo";case Qe:a=s._payload,s=s._init;try{return Fe(s(a))}catch{}}return null}function Ke(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(a);case 8:return a===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ve(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function et(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function pt(s){var a=et(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),d=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,g=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(v){d=""+v,g.call(this,v)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(v){d=""+v},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Or(s){s._valueTracker||(s._valueTracker=pt(s))}function fs(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return s&&(d=et(s)?s.checked?"true":"false":s.value),s=d,s!==c?(a.setValue(s),!0):!1}function _r(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Qr(s,a){var c=a.checked;return ie({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function re(s,a){var c=a.defaultValue==null?"":a.defaultValue,d=a.checked!=null?a.checked:a.defaultChecked;c=Ve(a.value!=null?a.value:c),s._wrapperState={initialChecked:d,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Le(s,a){a=a.checked,a!=null&&C(s,"checked",a,!1)}function nt(s,a){Le(s,a);var c=Ve(a.value),d=a.type;if(c!=null)d==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Ee(s,a.type,c):a.hasOwnProperty("defaultValue")&&Ee(s,a.type,Ve(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function U(s,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var d=a.type;if(!(d!=="submit"&&d!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,c||a===s.value||(s.value=a),s.defaultValue=a}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function Ee(s,a,c){(a!=="number"||_r(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var qe=Array.isArray;function k(s,a,c,d){if(s=s.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=a.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&d&&(s[c].defaultSelected=!0)}else{for(c=""+Ve(c),a=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,d&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function $(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function q(s,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(qe(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}s._wrapperState={initialValue:Ve(c)}}function oe(s,a){var c=Ve(a.value),d=Ve(a.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),a.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),d!=null&&(s.defaultValue=""+d)}function se(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function X(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?X(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var He,Ze=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,d,m){MSApp.execUnsafeLocalFunction(function(){return s(a,c,d,m)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(He=He||document.createElement("div"),He.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=He.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function vt(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zr=["Webkit","ms","Moz","O"];Object.keys(cr).forEach(function(s){Zr.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),cr[a]=cr[s]})});function Lo(s,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||cr.hasOwnProperty(s)&&cr[s]?(""+a).trim():a+"px"}function ta(s,a){s=s.style;for(var c in a)if(a.hasOwnProperty(c)){var d=c.indexOf("--")===0,m=Lo(c,a[c],d);c==="float"&&(c="cssFloat"),d?s.setProperty(c,m):s[c]=m}}var fi=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mi(s,a){if(a){if(fi[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function ra(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pi=null;function sa(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ec=null,na=null,aa=null;function Jh(s){if(s=Li(s)){if(typeof Ec!="function")throw Error(t(280));var a=s.stateNode;a&&(a=il(a),Ec(s.stateNode,s.type,a))}}function Qh(s){na?aa?aa.push(s):aa=[s]:na=s}function Zh(){if(na){var s=na,a=aa;if(aa=na=null,Jh(s),a)for(s=0;s<a.length;s++)Jh(a[s])}}function Yh(s,a){return s(a)}function Xh(){}var Cc=!1;function ef(s,a,c){if(Cc)return s(a,c);Cc=!0;try{return Yh(s,a,c)}finally{Cc=!1,(na!==null||aa!==null)&&(Xh(),Zh())}}function gi(s,a){var c=s.stateNode;if(c===null)return null;var d=il(c);if(d===null)return null;c=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var Tc=!1;if(h)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){Tc=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{Tc=!1}function qy(s,a,c,d,m,g,v,E,O){var B=Array.prototype.slice.call(arguments,3);try{a.apply(c,B)}catch(Q){this.onError(Q)}}var yi=!1,Uo=null,Fo=!1,Rc=null,Hy={onError:function(s){yi=!0,Uo=s}};function Wy(s,a,c,d,m,g,v,E,O){yi=!1,Uo=null,qy.apply(Hy,arguments)}function Ky(s,a,c,d,m,g,v,E,O){if(Wy.apply(this,arguments),yi){if(yi){var B=Uo;yi=!1,Uo=null}else throw Error(t(198));Fo||(Fo=!0,Rc=B)}}function _n(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function tf(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function rf(s){if(_n(s)!==s)throw Error(t(188))}function Gy(s){var a=s.alternate;if(!a){if(a=_n(s),a===null)throw Error(t(188));return a!==s?null:s}for(var c=s,d=a;;){var m=c.return;if(m===null)break;var g=m.alternate;if(g===null){if(d=m.return,d!==null){c=d;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===c)return rf(m),s;if(g===d)return rf(m),a;g=g.sibling}throw Error(t(188))}if(c.return!==d.return)c=m,d=g;else{for(var v=!1,E=m.child;E;){if(E===c){v=!0,c=m,d=g;break}if(E===d){v=!0,d=m,c=g;break}E=E.sibling}if(!v){for(E=g.child;E;){if(E===c){v=!0,c=g,d=m;break}if(E===d){v=!0,d=g,c=m;break}E=E.sibling}if(!v)throw Error(t(189))}}if(c.alternate!==d)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?s:a}function sf(s){return s=Gy(s),s!==null?nf(s):null}function nf(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=nf(s);if(a!==null)return a;s=s.sibling}return null}var af=e.unstable_scheduleCallback,of=e.unstable_cancelCallback,Jy=e.unstable_shouldYield,Qy=e.unstable_requestPaint,wt=e.unstable_now,Zy=e.unstable_getCurrentPriorityLevel,Pc=e.unstable_ImmediatePriority,lf=e.unstable_UserBlockingPriority,Mo=e.unstable_NormalPriority,Yy=e.unstable_LowPriority,cf=e.unstable_IdlePriority,zo=null,Yr=null;function Xy(s){if(Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot(zo,s,void 0,(s.current.flags&128)===128)}catch{}}var Ir=Math.clz32?Math.clz32:r0,e0=Math.log,t0=Math.LN2;function r0(s){return s>>>=0,s===0?32:31-(e0(s)/t0|0)|0}var Bo=64,Vo=4194304;function vi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function qo(s,a){var c=s.pendingLanes;if(c===0)return 0;var d=0,m=s.suspendedLanes,g=s.pingedLanes,v=c&268435455;if(v!==0){var E=v&~m;E!==0?d=vi(E):(g&=v,g!==0&&(d=vi(g)))}else v=c&~m,v!==0?d=vi(v):g!==0&&(d=vi(g));if(d===0)return 0;if(a!==0&&a!==d&&(a&m)===0&&(m=d&-d,g=a&-a,m>=g||m===16&&(g&4194240)!==0))return a;if((d&4)!==0&&(d|=c&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=d;0<a;)c=31-Ir(a),m=1<<c,d|=s[c],a&=~m;return d}function s0(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n0(s,a){for(var c=s.suspendedLanes,d=s.pingedLanes,m=s.expirationTimes,g=s.pendingLanes;0<g;){var v=31-Ir(g),E=1<<v,O=m[v];O===-1?((E&c)===0||(E&d)!==0)&&(m[v]=s0(E,a)):O<=a&&(s.expiredLanes|=E),g&=~E}}function Ac(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function uf(){var s=Bo;return Bo<<=1,(Bo&4194240)===0&&(Bo=64),s}function Oc(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function wi(s,a,c){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-Ir(a),s[a]=c}function a0(s,a){var c=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<c;){var m=31-Ir(c),g=1<<m;a[m]=0,d[m]=-1,s[m]=-1,c&=~g}}function Ic(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var d=31-Ir(c),m=1<<d;m&a|s[d]&a&&(s[d]|=a),c&=~m}}var rt=0;function df(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var hf,Dc,ff,mf,pf,$c=!1,Ho=[],Ds=null,$s=null,Ls=null,bi=new Map,_i=new Map,Us=[],i0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gf(s,a){switch(s){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":bi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_i.delete(a.pointerId)}}function ji(s,a,c,d,m,g){return s===null||s.nativeEvent!==g?(s={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:g,targetContainers:[m]},a!==null&&(a=Li(a),a!==null&&Dc(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function o0(s,a,c,d,m){switch(a){case"focusin":return Ds=ji(Ds,s,a,c,d,m),!0;case"dragenter":return $s=ji($s,s,a,c,d,m),!0;case"mouseover":return Ls=ji(Ls,s,a,c,d,m),!0;case"pointerover":var g=m.pointerId;return bi.set(g,ji(bi.get(g)||null,s,a,c,d,m)),!0;case"gotpointercapture":return g=m.pointerId,_i.set(g,ji(_i.get(g)||null,s,a,c,d,m)),!0}return!1}function xf(s){var a=jn(s.target);if(a!==null){var c=_n(a);if(c!==null){if(a=c.tag,a===13){if(a=tf(c),a!==null){s.blockedOn=a,pf(s.priority,function(){ff(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wo(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=Uc(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var d=new c.constructor(c.type,c);pi=d,c.target.dispatchEvent(d),pi=null}else return a=Li(c),a!==null&&Dc(a),s.blockedOn=c,!1;a.shift()}return!0}function yf(s,a,c){Wo(s)&&c.delete(a)}function l0(){$c=!1,Ds!==null&&Wo(Ds)&&(Ds=null),$s!==null&&Wo($s)&&($s=null),Ls!==null&&Wo(Ls)&&(Ls=null),bi.forEach(yf),_i.forEach(yf)}function Ni(s,a){s.blockedOn===a&&(s.blockedOn=null,$c||($c=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,l0)))}function Si(s){function a(m){return Ni(m,s)}if(0<Ho.length){Ni(Ho[0],s);for(var c=1;c<Ho.length;c++){var d=Ho[c];d.blockedOn===s&&(d.blockedOn=null)}}for(Ds!==null&&Ni(Ds,s),$s!==null&&Ni($s,s),Ls!==null&&Ni(Ls,s),bi.forEach(a),_i.forEach(a),c=0;c<Us.length;c++)d=Us[c],d.blockedOn===s&&(d.blockedOn=null);for(;0<Us.length&&(c=Us[0],c.blockedOn===null);)xf(c),c.blockedOn===null&&Us.shift()}var ia=F.ReactCurrentBatchConfig,Ko=!0;function c0(s,a,c,d){var m=rt,g=ia.transition;ia.transition=null;try{rt=1,Lc(s,a,c,d)}finally{rt=m,ia.transition=g}}function u0(s,a,c,d){var m=rt,g=ia.transition;ia.transition=null;try{rt=4,Lc(s,a,c,d)}finally{rt=m,ia.transition=g}}function Lc(s,a,c,d){if(Ko){var m=Uc(s,a,c,d);if(m===null)tu(s,a,d,Go,c),gf(s,d);else if(o0(m,s,a,c,d))d.stopPropagation();else if(gf(s,d),a&4&&-1<i0.indexOf(s)){for(;m!==null;){var g=Li(m);if(g!==null&&hf(g),g=Uc(s,a,c,d),g===null&&tu(s,a,d,Go,c),g===m)break;m=g}m!==null&&d.stopPropagation()}else tu(s,a,d,null,c)}}var Go=null;function Uc(s,a,c,d){if(Go=null,s=sa(d),s=jn(s),s!==null)if(a=_n(s),a===null)s=null;else if(c=a.tag,c===13){if(s=tf(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Go=s,null}function vf(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zy()){case Pc:return 1;case lf:return 4;case Mo:case Yy:return 16;case cf:return 536870912;default:return 16}default:return 16}}var Fs=null,Fc=null,Jo=null;function wf(){if(Jo)return Jo;var s,a=Fc,c=a.length,d,m="value"in Fs?Fs.value:Fs.textContent,g=m.length;for(s=0;s<c&&a[s]===m[s];s++);var v=c-s;for(d=1;d<=v&&a[c-d]===m[g-d];d++);return Jo=m.slice(s,1<d?1-d:void 0)}function Qo(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Zo(){return!0}function bf(){return!1}function ur(s){function a(c,d,m,g,v){this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var E in s)s.hasOwnProperty(E)&&(c=s[E],this[E]=c?c(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Zo:bf,this.isPropagationStopped=bf,this}return ie(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),a}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mc=ur(oa),ki=ie({},oa,{view:0,detail:0}),d0=ur(ki),zc,Bc,Ei,Yo=ie({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ei&&(Ei&&s.type==="mousemove"?(zc=s.screenX-Ei.screenX,Bc=s.screenY-Ei.screenY):Bc=zc=0,Ei=s),zc)},movementY:function(s){return"movementY"in s?s.movementY:Bc}}),_f=ur(Yo),h0=ie({},Yo,{dataTransfer:0}),f0=ur(h0),m0=ie({},ki,{relatedTarget:0}),Vc=ur(m0),p0=ie({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),g0=ur(p0),x0=ie({},oa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),y0=ur(x0),v0=ie({},oa,{data:0}),jf=ur(v0),w0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j0(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=_0[s])?!!a[s]:!1}function qc(){return j0}var N0=ie({},ki,{key:function(s){if(s.key){var a=w0[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Qo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?b0[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qc,charCode:function(s){return s.type==="keypress"?Qo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Qo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),S0=ur(N0),k0=ie({},Yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nf=ur(k0),E0=ie({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qc}),C0=ur(E0),T0=ie({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),R0=ur(T0),P0=ie({},Yo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),A0=ur(P0),O0=[9,13,27,32],Hc=h&&"CompositionEvent"in window,Ci=null;h&&"documentMode"in document&&(Ci=document.documentMode);var I0=h&&"TextEvent"in window&&!Ci,Sf=h&&(!Hc||Ci&&8<Ci&&11>=Ci),kf=" ",Ef=!1;function Cf(s,a){switch(s){case"keyup":return O0.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var la=!1;function D0(s,a){switch(s){case"compositionend":return Tf(a);case"keypress":return a.which!==32?null:(Ef=!0,kf);case"textInput":return s=a.data,s===kf&&Ef?null:s;default:return null}}function $0(s,a){if(la)return s==="compositionend"||!Hc&&Cf(s,a)?(s=wf(),Jo=Fc=Fs=null,la=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Sf&&a.locale!=="ko"?null:a.data;default:return null}}var L0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rf(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!L0[s.type]:a==="textarea"}function Pf(s,a,c,d){Qh(d),a=sl(a,"onChange"),0<a.length&&(c=new Mc("onChange","change",null,c,d),s.push({event:c,listeners:a}))}var Ti=null,Ri=null;function U0(s){Jf(s,0)}function Xo(s){var a=fa(s);if(fs(a))return s}function F0(s,a){if(s==="change")return a}var Af=!1;if(h){var Wc;if(h){var Kc="oninput"in document;if(!Kc){var Of=document.createElement("div");Of.setAttribute("oninput","return;"),Kc=typeof Of.oninput=="function"}Wc=Kc}else Wc=!1;Af=Wc&&(!document.documentMode||9<document.documentMode)}function If(){Ti&&(Ti.detachEvent("onpropertychange",Df),Ri=Ti=null)}function Df(s){if(s.propertyName==="value"&&Xo(Ri)){var a=[];Pf(a,Ri,s,sa(s)),ef(U0,a)}}function M0(s,a,c){s==="focusin"?(If(),Ti=a,Ri=c,Ti.attachEvent("onpropertychange",Df)):s==="focusout"&&If()}function z0(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Xo(Ri)}function B0(s,a){if(s==="click")return Xo(a)}function V0(s,a){if(s==="input"||s==="change")return Xo(a)}function q0(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Dr=typeof Object.is=="function"?Object.is:q0;function Pi(s,a){if(Dr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!f.call(a,m)||!Dr(s[m],a[m]))return!1}return!0}function $f(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Lf(s,a){var c=$f(s);s=0;for(var d;c;){if(c.nodeType===3){if(d=s+c.textContent.length,s<=a&&d>=a)return{node:c,offset:a-s};s=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=$f(c)}}function Uf(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Uf(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Ff(){for(var s=window,a=_r();a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=_r(s.document)}return a}function Gc(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function H0(s){var a=Ff(),c=s.focusedElem,d=s.selectionRange;if(a!==c&&c&&c.ownerDocument&&Uf(c.ownerDocument.documentElement,c)){if(d!==null&&Gc(c)){if(a=d.start,s=d.end,s===void 0&&(s=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(s,c.value.length);else if(s=(a=c.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var m=c.textContent.length,g=Math.min(d.start,m);d=d.end===void 0?g:Math.min(d.end,m),!s.extend&&g>d&&(m=d,d=g,g=m),m=Lf(c,g);var v=Lf(c,d);m&&v&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==v.node||s.focusOffset!==v.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),s.removeAllRanges(),g>d?(s.addRange(a),s.extend(v.node,v.offset)):(a.setEnd(v.node,v.offset),s.addRange(a)))}}for(a=[],s=c;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)s=a[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var W0=h&&"documentMode"in document&&11>=document.documentMode,ca=null,Jc=null,Ai=null,Qc=!1;function Mf(s,a,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Qc||ca==null||ca!==_r(d)||(d=ca,"selectionStart"in d&&Gc(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ai&&Pi(Ai,d)||(Ai=d,d=sl(Jc,"onSelect"),0<d.length&&(a=new Mc("onSelect","select",null,a,c),s.push({event:a,listeners:d}),a.target=ca)))}function el(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var ua={animationend:el("Animation","AnimationEnd"),animationiteration:el("Animation","AnimationIteration"),animationstart:el("Animation","AnimationStart"),transitionend:el("Transition","TransitionEnd")},Zc={},zf={};h&&(zf=document.createElement("div").style,"AnimationEvent"in window||(delete ua.animationend.animation,delete ua.animationiteration.animation,delete ua.animationstart.animation),"TransitionEvent"in window||delete ua.transitionend.transition);function tl(s){if(Zc[s])return Zc[s];if(!ua[s])return s;var a=ua[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in zf)return Zc[s]=a[c];return s}var Bf=tl("animationend"),Vf=tl("animationiteration"),qf=tl("animationstart"),Hf=tl("transitionend"),Wf=new Map,Kf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(s,a){Wf.set(s,a),l(a,[s])}for(var Yc=0;Yc<Kf.length;Yc++){var Xc=Kf[Yc],K0=Xc.toLowerCase(),G0=Xc[0].toUpperCase()+Xc.slice(1);Ms(K0,"on"+G0)}Ms(Bf,"onAnimationEnd"),Ms(Vf,"onAnimationIteration"),Ms(qf,"onAnimationStart"),Ms("dblclick","onDoubleClick"),Ms("focusin","onFocus"),Ms("focusout","onBlur"),Ms(Hf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function Gf(s,a,c){var d=s.type||"unknown-event";s.currentTarget=c,Ky(d,a,void 0,s),s.currentTarget=null}function Jf(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var d=s[c],m=d.event;d=d.listeners;e:{var g=void 0;if(a)for(var v=d.length-1;0<=v;v--){var E=d[v],O=E.instance,B=E.currentTarget;if(E=E.listener,O!==g&&m.isPropagationStopped())break e;Gf(m,E,B),g=O}else for(v=0;v<d.length;v++){if(E=d[v],O=E.instance,B=E.currentTarget,E=E.listener,O!==g&&m.isPropagationStopped())break e;Gf(m,E,B),g=O}}}if(Fo)throw s=Rc,Fo=!1,Rc=null,s}function ot(s,a){var c=a[ou];c===void 0&&(c=a[ou]=new Set);var d=s+"__bubble";c.has(d)||(Qf(a,s,2,!1),c.add(d))}function eu(s,a,c){var d=0;a&&(d|=4),Qf(c,s,d,a)}var rl="_reactListening"+Math.random().toString(36).slice(2);function Ii(s){if(!s[rl]){s[rl]=!0,n.forEach(function(c){c!=="selectionchange"&&(J0.has(c)||eu(c,!1,s),eu(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[rl]||(a[rl]=!0,eu("selectionchange",!1,a))}}function Qf(s,a,c,d){switch(vf(a)){case 1:var m=c0;break;case 4:m=u0;break;default:m=Lc}c=m.bind(null,a,c,s),m=void 0,!Tc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),d?m!==void 0?s.addEventListener(a,c,{capture:!0,passive:m}):s.addEventListener(a,c,!0):m!==void 0?s.addEventListener(a,c,{passive:m}):s.addEventListener(a,c,!1)}function tu(s,a,c,d,m){var g=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var v=d.tag;if(v===3||v===4){var E=d.stateNode.containerInfo;if(E===m||E.nodeType===8&&E.parentNode===m)break;if(v===4)for(v=d.return;v!==null;){var O=v.tag;if((O===3||O===4)&&(O=v.stateNode.containerInfo,O===m||O.nodeType===8&&O.parentNode===m))return;v=v.return}for(;E!==null;){if(v=jn(E),v===null)return;if(O=v.tag,O===5||O===6){d=g=v;continue e}E=E.parentNode}}d=d.return}ef(function(){var B=g,Q=sa(c),Y=[];e:{var J=Wf.get(s);if(J!==void 0){var ce=Mc,fe=s;switch(s){case"keypress":if(Qo(c)===0)break e;case"keydown":case"keyup":ce=S0;break;case"focusin":fe="focus",ce=Vc;break;case"focusout":fe="blur",ce=Vc;break;case"beforeblur":case"afterblur":ce=Vc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=_f;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=f0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=C0;break;case Bf:case Vf:case qf:ce=g0;break;case Hf:ce=R0;break;case"scroll":ce=d0;break;case"wheel":ce=A0;break;case"copy":case"cut":case"paste":ce=y0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Nf}var ge=(a&4)!==0,bt=!ge&&s==="scroll",L=ge?J!==null?J+"Capture":null:J;ge=[];for(var I=B,M;I!==null;){M=I;var ee=M.stateNode;if(M.tag===5&&ee!==null&&(M=ee,L!==null&&(ee=gi(I,L),ee!=null&&ge.push(Di(I,ee,M)))),bt)break;I=I.return}0<ge.length&&(J=new ce(J,fe,null,c,Q),Y.push({event:J,listeners:ge}))}}if((a&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",J&&c!==pi&&(fe=c.relatedTarget||c.fromElement)&&(jn(fe)||fe[ms]))break e;if((ce||J)&&(J=Q.window===Q?Q:(J=Q.ownerDocument)?J.defaultView||J.parentWindow:window,ce?(fe=c.relatedTarget||c.toElement,ce=B,fe=fe?jn(fe):null,fe!==null&&(bt=_n(fe),fe!==bt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ce=null,fe=B),ce!==fe)){if(ge=_f,ee="onMouseLeave",L="onMouseEnter",I="mouse",(s==="pointerout"||s==="pointerover")&&(ge=Nf,ee="onPointerLeave",L="onPointerEnter",I="pointer"),bt=ce==null?J:fa(ce),M=fe==null?J:fa(fe),J=new ge(ee,I+"leave",ce,c,Q),J.target=bt,J.relatedTarget=M,ee=null,jn(Q)===B&&(ge=new ge(L,I+"enter",fe,c,Q),ge.target=M,ge.relatedTarget=bt,ee=ge),bt=ee,ce&&fe)t:{for(ge=ce,L=fe,I=0,M=ge;M;M=da(M))I++;for(M=0,ee=L;ee;ee=da(ee))M++;for(;0<I-M;)ge=da(ge),I--;for(;0<M-I;)L=da(L),M--;for(;I--;){if(ge===L||L!==null&&ge===L.alternate)break t;ge=da(ge),L=da(L)}ge=null}else ge=null;ce!==null&&Zf(Y,J,ce,ge,!1),fe!==null&&bt!==null&&Zf(Y,bt,fe,ge,!0)}}e:{if(J=B?fa(B):window,ce=J.nodeName&&J.nodeName.toLowerCase(),ce==="select"||ce==="input"&&J.type==="file")var ye=F0;else if(Rf(J))if(Af)ye=V0;else{ye=z0;var Se=M0}else(ce=J.nodeName)&&ce.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ye=B0);if(ye&&(ye=ye(s,B))){Pf(Y,ye,c,Q);break e}Se&&Se(s,J,B),s==="focusout"&&(Se=J._wrapperState)&&Se.controlled&&J.type==="number"&&Ee(J,"number",J.value)}switch(Se=B?fa(B):window,s){case"focusin":(Rf(Se)||Se.contentEditable==="true")&&(ca=Se,Jc=B,Ai=null);break;case"focusout":Ai=Jc=ca=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,Mf(Y,c,Q);break;case"selectionchange":if(W0)break;case"keydown":case"keyup":Mf(Y,c,Q)}var ke;if(Hc)e:{switch(s){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else la?Cf(s,c)&&(Ae="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ae="onCompositionStart");Ae&&(Sf&&c.locale!=="ko"&&(la||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&la&&(ke=wf()):(Fs=Q,Fc="value"in Fs?Fs.value:Fs.textContent,la=!0)),Se=sl(B,Ae),0<Se.length&&(Ae=new jf(Ae,s,null,c,Q),Y.push({event:Ae,listeners:Se}),ke?Ae.data=ke:(ke=Tf(c),ke!==null&&(Ae.data=ke)))),(ke=I0?D0(s,c):$0(s,c))&&(B=sl(B,"onBeforeInput"),0<B.length&&(Q=new jf("onBeforeInput","beforeinput",null,c,Q),Y.push({event:Q,listeners:B}),Q.data=ke))}Jf(Y,a)})}function Di(s,a,c){return{instance:s,listener:a,currentTarget:c}}function sl(s,a){for(var c=a+"Capture",d=[];s!==null;){var m=s,g=m.stateNode;m.tag===5&&g!==null&&(m=g,g=gi(s,c),g!=null&&d.unshift(Di(s,g,m)),g=gi(s,a),g!=null&&d.push(Di(s,g,m))),s=s.return}return d}function da(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Zf(s,a,c,d,m){for(var g=a._reactName,v=[];c!==null&&c!==d;){var E=c,O=E.alternate,B=E.stateNode;if(O!==null&&O===d)break;E.tag===5&&B!==null&&(E=B,m?(O=gi(c,g),O!=null&&v.unshift(Di(c,O,E))):m||(O=gi(c,g),O!=null&&v.push(Di(c,O,E)))),c=c.return}v.length!==0&&s.push({event:a,listeners:v})}var Q0=/\r\n?/g,Z0=/\u0000|\uFFFD/g;function Yf(s){return(typeof s=="string"?s:""+s).replace(Q0,`
`).replace(Z0,"")}function nl(s,a,c){if(a=Yf(a),Yf(s)!==a&&c)throw Error(t(425))}function al(){}var ru=null,su=null;function nu(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var au=typeof setTimeout=="function"?setTimeout:void 0,Y0=typeof clearTimeout=="function"?clearTimeout:void 0,Xf=typeof Promise=="function"?Promise:void 0,X0=typeof queueMicrotask=="function"?queueMicrotask:typeof Xf<"u"?function(s){return Xf.resolve(null).then(s).catch(ev)}:au;function ev(s){setTimeout(function(){throw s})}function iu(s,a){var c=a,d=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(d===0){s.removeChild(m),Si(a);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=m}while(c);Si(a)}function zs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function em(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return s;a--}else c==="/$"&&a++}s=s.previousSibling}return null}var ha=Math.random().toString(36).slice(2),Xr="__reactFiber$"+ha,$i="__reactProps$"+ha,ms="__reactContainer$"+ha,ou="__reactEvents$"+ha,tv="__reactListeners$"+ha,rv="__reactHandles$"+ha;function jn(s){var a=s[Xr];if(a)return a;for(var c=s.parentNode;c;){if(a=c[ms]||c[Xr]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=em(s);s!==null;){if(c=s[Xr])return c;s=em(s)}return a}s=c,c=s.parentNode}return null}function Li(s){return s=s[Xr]||s[ms],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function fa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function il(s){return s[$i]||null}var lu=[],ma=-1;function Bs(s){return{current:s}}function lt(s){0>ma||(s.current=lu[ma],lu[ma]=null,ma--)}function at(s,a){ma++,lu[ma]=s.current,s.current=a}var Vs={},zt=Bs(Vs),er=Bs(!1),Nn=Vs;function pa(s,a){var c=s.type.contextTypes;if(!c)return Vs;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===a)return d.__reactInternalMemoizedMaskedChildContext;var m={},g;for(g in c)m[g]=a[g];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=m),m}function tr(s){return s=s.childContextTypes,s!=null}function ol(){lt(er),lt(zt)}function tm(s,a,c){if(zt.current!==Vs)throw Error(t(168));at(zt,a),at(er,c)}function rm(s,a,c){var d=s.stateNode;if(a=a.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var m in d)if(!(m in a))throw Error(t(108,Ke(s)||"Unknown",m));return ie({},c,d)}function ll(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vs,Nn=zt.current,at(zt,s),at(er,er.current),!0}function sm(s,a,c){var d=s.stateNode;if(!d)throw Error(t(169));c?(s=rm(s,a,Nn),d.__reactInternalMemoizedMergedChildContext=s,lt(er),lt(zt),at(zt,s)):lt(er),at(er,c)}var ps=null,cl=!1,cu=!1;function nm(s){ps===null?ps=[s]:ps.push(s)}function sv(s){cl=!0,nm(s)}function qs(){if(!cu&&ps!==null){cu=!0;var s=0,a=rt;try{var c=ps;for(rt=1;s<c.length;s++){var d=c[s];do d=d(!0);while(d!==null)}ps=null,cl=!1}catch(m){throw ps!==null&&(ps=ps.slice(s+1)),af(Pc,qs),m}finally{rt=a,cu=!1}}return null}var ga=[],xa=0,ul=null,dl=0,jr=[],Nr=0,Sn=null,gs=1,xs="";function kn(s,a){ga[xa++]=dl,ga[xa++]=ul,ul=s,dl=a}function am(s,a,c){jr[Nr++]=gs,jr[Nr++]=xs,jr[Nr++]=Sn,Sn=s;var d=gs;s=xs;var m=32-Ir(d)-1;d&=~(1<<m),c+=1;var g=32-Ir(a)+m;if(30<g){var v=m-m%5;g=(d&(1<<v)-1).toString(32),d>>=v,m-=v,gs=1<<32-Ir(a)+m|c<<m|d,xs=g+s}else gs=1<<g|c<<m|d,xs=s}function uu(s){s.return!==null&&(kn(s,1),am(s,1,0))}function du(s){for(;s===ul;)ul=ga[--xa],ga[xa]=null,dl=ga[--xa],ga[xa]=null;for(;s===Sn;)Sn=jr[--Nr],jr[Nr]=null,xs=jr[--Nr],jr[Nr]=null,gs=jr[--Nr],jr[Nr]=null}var dr=null,hr=null,ct=!1,$r=null;function im(s,a){var c=Cr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=s,a=s.deletions,a===null?(s.deletions=[c],s.flags|=16):a.push(c)}function om(s,a){switch(s.tag){case 5:var c=s.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,dr=s,hr=zs(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,dr=s,hr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=Sn!==null?{id:gs,overflow:xs}:null,s.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=Cr(18,null,null,0),c.stateNode=a,c.return=s,s.child=c,dr=s,hr=null,!0):!1;default:return!1}}function hu(s){return(s.mode&1)!==0&&(s.flags&128)===0}function fu(s){if(ct){var a=hr;if(a){var c=a;if(!om(s,a)){if(hu(s))throw Error(t(418));a=zs(c.nextSibling);var d=dr;a&&om(s,a)?im(d,c):(s.flags=s.flags&-4097|2,ct=!1,dr=s)}}else{if(hu(s))throw Error(t(418));s.flags=s.flags&-4097|2,ct=!1,dr=s}}}function lm(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;dr=s}function hl(s){if(s!==dr)return!1;if(!ct)return lm(s),ct=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!nu(s.type,s.memoizedProps)),a&&(a=hr)){if(hu(s))throw cm(),Error(t(418));for(;a;)im(s,a),a=zs(a.nextSibling)}if(lm(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(a===0){hr=zs(s.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}s=s.nextSibling}hr=null}}else hr=dr?zs(s.stateNode.nextSibling):null;return!0}function cm(){for(var s=hr;s;)s=zs(s.nextSibling)}function ya(){hr=dr=null,ct=!1}function mu(s){$r===null?$r=[s]:$r.push(s)}var nv=F.ReactCurrentBatchConfig;function Ui(s,a,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var d=c.stateNode}if(!d)throw Error(t(147,s));var m=d,g=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===g?a.ref:(a=function(v){var E=m.refs;v===null?delete E[g]:E[g]=v},a._stringRef=g,a)}if(typeof s!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,s))}return s}function fl(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function um(s){var a=s._init;return a(s._payload)}function dm(s){function a(L,I){if(s){var M=L.deletions;M===null?(L.deletions=[I],L.flags|=16):M.push(I)}}function c(L,I){if(!s)return null;for(;I!==null;)a(L,I),I=I.sibling;return null}function d(L,I){for(L=new Map;I!==null;)I.key!==null?L.set(I.key,I):L.set(I.index,I),I=I.sibling;return L}function m(L,I){return L=Ys(L,I),L.index=0,L.sibling=null,L}function g(L,I,M){return L.index=M,s?(M=L.alternate,M!==null?(M=M.index,M<I?(L.flags|=2,I):M):(L.flags|=2,I)):(L.flags|=1048576,I)}function v(L){return s&&L.alternate===null&&(L.flags|=2),L}function E(L,I,M,ee){return I===null||I.tag!==6?(I=ad(M,L.mode,ee),I.return=L,I):(I=m(I,M),I.return=L,I)}function O(L,I,M,ee){var ye=M.type;return ye===H?Q(L,I,M.props.children,ee,M.key):I!==null&&(I.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Qe&&um(ye)===I.type)?(ee=m(I,M.props),ee.ref=Ui(L,I,M),ee.return=L,ee):(ee=Ll(M.type,M.key,M.props,null,L.mode,ee),ee.ref=Ui(L,I,M),ee.return=L,ee)}function B(L,I,M,ee){return I===null||I.tag!==4||I.stateNode.containerInfo!==M.containerInfo||I.stateNode.implementation!==M.implementation?(I=id(M,L.mode,ee),I.return=L,I):(I=m(I,M.children||[]),I.return=L,I)}function Q(L,I,M,ee,ye){return I===null||I.tag!==7?(I=In(M,L.mode,ee,ye),I.return=L,I):(I=m(I,M),I.return=L,I)}function Y(L,I,M){if(typeof I=="string"&&I!==""||typeof I=="number")return I=ad(""+I,L.mode,M),I.return=L,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case A:return M=Ll(I.type,I.key,I.props,null,L.mode,M),M.ref=Ui(L,null,I),M.return=L,M;case K:return I=id(I,L.mode,M),I.return=L,I;case Qe:var ee=I._init;return Y(L,ee(I._payload),M)}if(qe(I)||we(I))return I=In(I,L.mode,M,null),I.return=L,I;fl(L,I)}return null}function J(L,I,M,ee){var ye=I!==null?I.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return ye!==null?null:E(L,I,""+M,ee);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case A:return M.key===ye?O(L,I,M,ee):null;case K:return M.key===ye?B(L,I,M,ee):null;case Qe:return ye=M._init,J(L,I,ye(M._payload),ee)}if(qe(M)||we(M))return ye!==null?null:Q(L,I,M,ee,null);fl(L,M)}return null}function ce(L,I,M,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return L=L.get(M)||null,E(I,L,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:return L=L.get(ee.key===null?M:ee.key)||null,O(I,L,ee,ye);case K:return L=L.get(ee.key===null?M:ee.key)||null,B(I,L,ee,ye);case Qe:var Se=ee._init;return ce(L,I,M,Se(ee._payload),ye)}if(qe(ee)||we(ee))return L=L.get(M)||null,Q(I,L,ee,ye,null);fl(I,ee)}return null}function fe(L,I,M,ee){for(var ye=null,Se=null,ke=I,Ae=I=0,It=null;ke!==null&&Ae<M.length;Ae++){ke.index>Ae?(It=ke,ke=null):It=ke.sibling;var Ye=J(L,ke,M[Ae],ee);if(Ye===null){ke===null&&(ke=It);break}s&&ke&&Ye.alternate===null&&a(L,ke),I=g(Ye,I,Ae),Se===null?ye=Ye:Se.sibling=Ye,Se=Ye,ke=It}if(Ae===M.length)return c(L,ke),ct&&kn(L,Ae),ye;if(ke===null){for(;Ae<M.length;Ae++)ke=Y(L,M[Ae],ee),ke!==null&&(I=g(ke,I,Ae),Se===null?ye=ke:Se.sibling=ke,Se=ke);return ct&&kn(L,Ae),ye}for(ke=d(L,ke);Ae<M.length;Ae++)It=ce(ke,L,Ae,M[Ae],ee),It!==null&&(s&&It.alternate!==null&&ke.delete(It.key===null?Ae:It.key),I=g(It,I,Ae),Se===null?ye=It:Se.sibling=It,Se=It);return s&&ke.forEach(function(Xs){return a(L,Xs)}),ct&&kn(L,Ae),ye}function ge(L,I,M,ee){var ye=we(M);if(typeof ye!="function")throw Error(t(150));if(M=ye.call(M),M==null)throw Error(t(151));for(var Se=ye=null,ke=I,Ae=I=0,It=null,Ye=M.next();ke!==null&&!Ye.done;Ae++,Ye=M.next()){ke.index>Ae?(It=ke,ke=null):It=ke.sibling;var Xs=J(L,ke,Ye.value,ee);if(Xs===null){ke===null&&(ke=It);break}s&&ke&&Xs.alternate===null&&a(L,ke),I=g(Xs,I,Ae),Se===null?ye=Xs:Se.sibling=Xs,Se=Xs,ke=It}if(Ye.done)return c(L,ke),ct&&kn(L,Ae),ye;if(ke===null){for(;!Ye.done;Ae++,Ye=M.next())Ye=Y(L,Ye.value,ee),Ye!==null&&(I=g(Ye,I,Ae),Se===null?ye=Ye:Se.sibling=Ye,Se=Ye);return ct&&kn(L,Ae),ye}for(ke=d(L,ke);!Ye.done;Ae++,Ye=M.next())Ye=ce(ke,L,Ae,Ye.value,ee),Ye!==null&&(s&&Ye.alternate!==null&&ke.delete(Ye.key===null?Ae:Ye.key),I=g(Ye,I,Ae),Se===null?ye=Ye:Se.sibling=Ye,Se=Ye);return s&&ke.forEach(function(Lv){return a(L,Lv)}),ct&&kn(L,Ae),ye}function bt(L,I,M,ee){if(typeof M=="object"&&M!==null&&M.type===H&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case A:e:{for(var ye=M.key,Se=I;Se!==null;){if(Se.key===ye){if(ye=M.type,ye===H){if(Se.tag===7){c(L,Se.sibling),I=m(Se,M.props.children),I.return=L,L=I;break e}}else if(Se.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Qe&&um(ye)===Se.type){c(L,Se.sibling),I=m(Se,M.props),I.ref=Ui(L,Se,M),I.return=L,L=I;break e}c(L,Se);break}else a(L,Se);Se=Se.sibling}M.type===H?(I=In(M.props.children,L.mode,ee,M.key),I.return=L,L=I):(ee=Ll(M.type,M.key,M.props,null,L.mode,ee),ee.ref=Ui(L,I,M),ee.return=L,L=ee)}return v(L);case K:e:{for(Se=M.key;I!==null;){if(I.key===Se)if(I.tag===4&&I.stateNode.containerInfo===M.containerInfo&&I.stateNode.implementation===M.implementation){c(L,I.sibling),I=m(I,M.children||[]),I.return=L,L=I;break e}else{c(L,I);break}else a(L,I);I=I.sibling}I=id(M,L.mode,ee),I.return=L,L=I}return v(L);case Qe:return Se=M._init,bt(L,I,Se(M._payload),ee)}if(qe(M))return fe(L,I,M,ee);if(we(M))return ge(L,I,M,ee);fl(L,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,I!==null&&I.tag===6?(c(L,I.sibling),I=m(I,M),I.return=L,L=I):(c(L,I),I=ad(M,L.mode,ee),I.return=L,L=I),v(L)):c(L,I)}return bt}var va=dm(!0),hm=dm(!1),ml=Bs(null),pl=null,wa=null,pu=null;function gu(){pu=wa=pl=null}function xu(s){var a=ml.current;lt(ml),s._currentValue=a}function yu(s,a,c){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===c)break;s=s.return}}function ba(s,a){pl=s,pu=wa=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(rr=!0),s.firstContext=null)}function Sr(s){var a=s._currentValue;if(pu!==s)if(s={context:s,memoizedValue:a,next:null},wa===null){if(pl===null)throw Error(t(308));wa=s,pl.dependencies={lanes:0,firstContext:s}}else wa=wa.next=s;return a}var En=null;function vu(s){En===null?En=[s]:En.push(s)}function fm(s,a,c,d){var m=a.interleaved;return m===null?(c.next=c,vu(a)):(c.next=m.next,m.next=c),a.interleaved=c,ys(s,d)}function ys(s,a){s.lanes|=a;var c=s.alternate;for(c!==null&&(c.lanes|=a),c=s,s=s.return;s!==null;)s.childLanes|=a,c=s.alternate,c!==null&&(c.childLanes|=a),c=s,s=s.return;return c.tag===3?c.stateNode:null}var Hs=!1;function wu(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mm(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function vs(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Ws(s,a,c){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Ge&2)!==0){var m=d.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),d.pending=a,ys(s,c)}return m=d.interleaved,m===null?(a.next=a,vu(d)):(a.next=m.next,m.next=a),d.interleaved=a,ys(s,c)}function gl(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var d=a.lanes;d&=s.pendingLanes,c|=d,a.lanes=c,Ic(s,c)}}function pm(s,a){var c=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var m=null,g=null;if(c=c.firstBaseUpdate,c!==null){do{var v={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};g===null?m=g=v:g=g.next=v,c=c.next}while(c!==null);g===null?m=g=a:g=g.next=a}else m=g=a;c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:d.shared,effects:d.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}function xl(s,a,c,d){var m=s.updateQueue;Hs=!1;var g=m.firstBaseUpdate,v=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var O=E,B=O.next;O.next=null,v===null?g=B:v.next=B,v=O;var Q=s.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==v&&(E===null?Q.firstBaseUpdate=B:E.next=B,Q.lastBaseUpdate=O))}if(g!==null){var Y=m.baseState;v=0,Q=B=O=null,E=g;do{var J=E.lane,ce=E.eventTime;if((d&J)===J){Q!==null&&(Q=Q.next={eventTime:ce,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var fe=s,ge=E;switch(J=a,ce=c,ge.tag){case 1:if(fe=ge.payload,typeof fe=="function"){Y=fe.call(ce,Y,J);break e}Y=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ge.payload,J=typeof fe=="function"?fe.call(ce,Y,J):fe,J==null)break e;Y=ie({},Y,J);break e;case 2:Hs=!0}}E.callback!==null&&E.lane!==0&&(s.flags|=64,J=m.effects,J===null?m.effects=[E]:J.push(E))}else ce={eventTime:ce,lane:J,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(B=Q=ce,O=Y):Q=Q.next=ce,v|=J;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;J=E,E=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);if(Q===null&&(O=Y),m.baseState=O,m.firstBaseUpdate=B,m.lastBaseUpdate=Q,a=m.shared.interleaved,a!==null){m=a;do v|=m.lane,m=m.next;while(m!==a)}else g===null&&(m.shared.lanes=0);Rn|=v,s.lanes=v,s.memoizedState=Y}}function gm(s,a,c){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var d=s[a],m=d.callback;if(m!==null){if(d.callback=null,d=c,typeof m!="function")throw Error(t(191,m));m.call(d)}}}var Fi={},es=Bs(Fi),Mi=Bs(Fi),zi=Bs(Fi);function Cn(s){if(s===Fi)throw Error(t(174));return s}function bu(s,a){switch(at(zi,a),at(Mi,s),at(es,Fi),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:pe(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=pe(a,s)}lt(es),at(es,a)}function _a(){lt(es),lt(Mi),lt(zi)}function xm(s){Cn(zi.current);var a=Cn(es.current),c=pe(a,s.type);a!==c&&(at(Mi,s),at(es,c))}function _u(s){Mi.current===s&&(lt(es),lt(Mi))}var dt=Bs(0);function yl(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ju=[];function Nu(){for(var s=0;s<ju.length;s++)ju[s]._workInProgressVersionPrimary=null;ju.length=0}var vl=F.ReactCurrentDispatcher,Su=F.ReactCurrentBatchConfig,Tn=0,ht=null,Et=null,At=null,wl=!1,Bi=!1,Vi=0,av=0;function Bt(){throw Error(t(321))}function ku(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!Dr(s[c],a[c]))return!1;return!0}function Eu(s,a,c,d,m,g){if(Tn=g,ht=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,vl.current=s===null||s.memoizedState===null?cv:uv,s=c(d,m),Bi){g=0;do{if(Bi=!1,Vi=0,25<=g)throw Error(t(301));g+=1,At=Et=null,a.updateQueue=null,vl.current=dv,s=c(d,m)}while(Bi)}if(vl.current=jl,a=Et!==null&&Et.next!==null,Tn=0,At=Et=ht=null,wl=!1,a)throw Error(t(300));return s}function Cu(){var s=Vi!==0;return Vi=0,s}function ts(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?ht.memoizedState=At=s:At=At.next=s,At}function kr(){if(Et===null){var s=ht.alternate;s=s!==null?s.memoizedState:null}else s=Et.next;var a=At===null?ht.memoizedState:At.next;if(a!==null)At=a,Et=s;else{if(s===null)throw Error(t(310));Et=s,s={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},At===null?ht.memoizedState=At=s:At=At.next=s}return At}function qi(s,a){return typeof a=="function"?a(s):a}function Tu(s){var a=kr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var d=Et,m=d.baseQueue,g=c.pending;if(g!==null){if(m!==null){var v=m.next;m.next=g.next,g.next=v}d.baseQueue=m=g,c.pending=null}if(m!==null){g=m.next,d=d.baseState;var E=v=null,O=null,B=g;do{var Q=B.lane;if((Tn&Q)===Q)O!==null&&(O=O.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),d=B.hasEagerState?B.eagerState:s(d,B.action);else{var Y={lane:Q,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};O===null?(E=O=Y,v=d):O=O.next=Y,ht.lanes|=Q,Rn|=Q}B=B.next}while(B!==null&&B!==g);O===null?v=d:O.next=E,Dr(d,a.memoizedState)||(rr=!0),a.memoizedState=d,a.baseState=v,a.baseQueue=O,c.lastRenderedState=d}if(s=c.interleaved,s!==null){m=s;do g=m.lane,ht.lanes|=g,Rn|=g,m=m.next;while(m!==s)}else m===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Ru(s){var a=kr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var d=c.dispatch,m=c.pending,g=a.memoizedState;if(m!==null){c.pending=null;var v=m=m.next;do g=s(g,v.action),v=v.next;while(v!==m);Dr(g,a.memoizedState)||(rr=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),c.lastRenderedState=g}return[g,d]}function ym(){}function vm(s,a){var c=ht,d=kr(),m=a(),g=!Dr(d.memoizedState,m);if(g&&(d.memoizedState=m,rr=!0),d=d.queue,Pu(_m.bind(null,c,d,s),[s]),d.getSnapshot!==a||g||At!==null&&At.memoizedState.tag&1){if(c.flags|=2048,Hi(9,bm.bind(null,c,d,m,a),void 0,null),Ot===null)throw Error(t(349));(Tn&30)!==0||wm(c,a,m)}return m}function wm(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=ht.updateQueue,a===null?(a={lastEffect:null,stores:null},ht.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function bm(s,a,c,d){a.value=c,a.getSnapshot=d,jm(a)&&Nm(s)}function _m(s,a,c){return c(function(){jm(a)&&Nm(s)})}function jm(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!Dr(s,c)}catch{return!0}}function Nm(s){var a=ys(s,1);a!==null&&Mr(a,s,1,-1)}function Sm(s){var a=ts();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:s},a.queue=s,s=s.dispatch=lv.bind(null,ht,s),[a.memoizedState,s]}function Hi(s,a,c,d){return s={tag:s,create:a,destroy:c,deps:d,next:null},a=ht.updateQueue,a===null?(a={lastEffect:null,stores:null},ht.updateQueue=a,a.lastEffect=s.next=s):(c=a.lastEffect,c===null?a.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,a.lastEffect=s)),s}function km(){return kr().memoizedState}function bl(s,a,c,d){var m=ts();ht.flags|=s,m.memoizedState=Hi(1|a,c,void 0,d===void 0?null:d)}function _l(s,a,c,d){var m=kr();d=d===void 0?null:d;var g=void 0;if(Et!==null){var v=Et.memoizedState;if(g=v.destroy,d!==null&&ku(d,v.deps)){m.memoizedState=Hi(a,c,g,d);return}}ht.flags|=s,m.memoizedState=Hi(1|a,c,g,d)}function Em(s,a){return bl(8390656,8,s,a)}function Pu(s,a){return _l(2048,8,s,a)}function Cm(s,a){return _l(4,2,s,a)}function Tm(s,a){return _l(4,4,s,a)}function Rm(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Pm(s,a,c){return c=c!=null?c.concat([s]):null,_l(4,4,Rm.bind(null,a,s),c)}function Au(){}function Am(s,a){var c=kr();a=a===void 0?null:a;var d=c.memoizedState;return d!==null&&a!==null&&ku(a,d[1])?d[0]:(c.memoizedState=[s,a],s)}function Om(s,a){var c=kr();a=a===void 0?null:a;var d=c.memoizedState;return d!==null&&a!==null&&ku(a,d[1])?d[0]:(s=s(),c.memoizedState=[s,a],s)}function Im(s,a,c){return(Tn&21)===0?(s.baseState&&(s.baseState=!1,rr=!0),s.memoizedState=c):(Dr(c,a)||(c=uf(),ht.lanes|=c,Rn|=c,s.baseState=!0),a)}function iv(s,a){var c=rt;rt=c!==0&&4>c?c:4,s(!0);var d=Su.transition;Su.transition={};try{s(!1),a()}finally{rt=c,Su.transition=d}}function Dm(){return kr().memoizedState}function ov(s,a,c){var d=Qs(s);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},$m(s))Lm(a,c);else if(c=fm(s,a,c,d),c!==null){var m=Kt();Mr(c,s,d,m),Um(c,a,d)}}function lv(s,a,c){var d=Qs(s),m={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if($m(s))Lm(a,m);else{var g=s.alternate;if(s.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var v=a.lastRenderedState,E=g(v,c);if(m.hasEagerState=!0,m.eagerState=E,Dr(E,v)){var O=a.interleaved;O===null?(m.next=m,vu(a)):(m.next=O.next,O.next=m),a.interleaved=m;return}}catch{}finally{}c=fm(s,a,m,d),c!==null&&(m=Kt(),Mr(c,s,d,m),Um(c,a,d))}}function $m(s){var a=s.alternate;return s===ht||a!==null&&a===ht}function Lm(s,a){Bi=wl=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function Um(s,a,c){if((c&4194240)!==0){var d=a.lanes;d&=s.pendingLanes,c|=d,a.lanes=c,Ic(s,c)}}var jl={readContext:Sr,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},cv={readContext:Sr,useCallback:function(s,a){return ts().memoizedState=[s,a===void 0?null:a],s},useContext:Sr,useEffect:Em,useImperativeHandle:function(s,a,c){return c=c!=null?c.concat([s]):null,bl(4194308,4,Rm.bind(null,a,s),c)},useLayoutEffect:function(s,a){return bl(4194308,4,s,a)},useInsertionEffect:function(s,a){return bl(4,2,s,a)},useMemo:function(s,a){var c=ts();return a=a===void 0?null:a,s=s(),c.memoizedState=[s,a],s},useReducer:function(s,a,c){var d=ts();return a=c!==void 0?c(a):a,d.memoizedState=d.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},d.queue=s,s=s.dispatch=ov.bind(null,ht,s),[d.memoizedState,s]},useRef:function(s){var a=ts();return s={current:s},a.memoizedState=s},useState:Sm,useDebugValue:Au,useDeferredValue:function(s){return ts().memoizedState=s},useTransition:function(){var s=Sm(!1),a=s[0];return s=iv.bind(null,s[1]),ts().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,c){var d=ht,m=ts();if(ct){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),Ot===null)throw Error(t(349));(Tn&30)!==0||wm(d,a,c)}m.memoizedState=c;var g={value:c,getSnapshot:a};return m.queue=g,Em(_m.bind(null,d,g,s),[s]),d.flags|=2048,Hi(9,bm.bind(null,d,g,c,a),void 0,null),c},useId:function(){var s=ts(),a=Ot.identifierPrefix;if(ct){var c=xs,d=gs;c=(d&~(1<<32-Ir(d)-1)).toString(32)+c,a=":"+a+"R"+c,c=Vi++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=av++,a=":"+a+"r"+c.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},uv={readContext:Sr,useCallback:Am,useContext:Sr,useEffect:Pu,useImperativeHandle:Pm,useInsertionEffect:Cm,useLayoutEffect:Tm,useMemo:Om,useReducer:Tu,useRef:km,useState:function(){return Tu(qi)},useDebugValue:Au,useDeferredValue:function(s){var a=kr();return Im(a,Et.memoizedState,s)},useTransition:function(){var s=Tu(qi)[0],a=kr().memoizedState;return[s,a]},useMutableSource:ym,useSyncExternalStore:vm,useId:Dm,unstable_isNewReconciler:!1},dv={readContext:Sr,useCallback:Am,useContext:Sr,useEffect:Pu,useImperativeHandle:Pm,useInsertionEffect:Cm,useLayoutEffect:Tm,useMemo:Om,useReducer:Ru,useRef:km,useState:function(){return Ru(qi)},useDebugValue:Au,useDeferredValue:function(s){var a=kr();return Et===null?a.memoizedState=s:Im(a,Et.memoizedState,s)},useTransition:function(){var s=Ru(qi)[0],a=kr().memoizedState;return[s,a]},useMutableSource:ym,useSyncExternalStore:vm,useId:Dm,unstable_isNewReconciler:!1};function Lr(s,a){if(s&&s.defaultProps){a=ie({},a),s=s.defaultProps;for(var c in s)a[c]===void 0&&(a[c]=s[c]);return a}return a}function Ou(s,a,c,d){a=s.memoizedState,c=c(d,a),c=c==null?a:ie({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Nl={isMounted:function(s){return(s=s._reactInternals)?_n(s)===s:!1},enqueueSetState:function(s,a,c){s=s._reactInternals;var d=Kt(),m=Qs(s),g=vs(d,m);g.payload=a,c!=null&&(g.callback=c),a=Ws(s,g,m),a!==null&&(Mr(a,s,m,d),gl(a,s,m))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var d=Kt(),m=Qs(s),g=vs(d,m);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=Ws(s,g,m),a!==null&&(Mr(a,s,m,d),gl(a,s,m))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=Kt(),d=Qs(s),m=vs(c,d);m.tag=2,a!=null&&(m.callback=a),a=Ws(s,m,d),a!==null&&(Mr(a,s,d,c),gl(a,s,d))}};function Fm(s,a,c,d,m,g,v){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,g,v):a.prototype&&a.prototype.isPureReactComponent?!Pi(c,d)||!Pi(m,g):!0}function Mm(s,a,c){var d=!1,m=Vs,g=a.contextType;return typeof g=="object"&&g!==null?g=Sr(g):(m=tr(a)?Nn:zt.current,d=a.contextTypes,g=(d=d!=null)?pa(s,m):Vs),a=new a(c,g),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Nl,s.stateNode=a,a._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=g),a}function zm(s,a,c,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==s&&Nl.enqueueReplaceState(a,a.state,null)}function Iu(s,a,c,d){var m=s.stateNode;m.props=c,m.state=s.memoizedState,m.refs={},wu(s);var g=a.contextType;typeof g=="object"&&g!==null?m.context=Sr(g):(g=tr(a)?Nn:zt.current,m.context=pa(s,g)),m.state=s.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(Ou(s,a,g,c),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&Nl.enqueueReplaceState(m,m.state,null),xl(s,c,m,d),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function ja(s,a){try{var c="",d=a;do c+=Me(d),d=d.return;while(d);var m=c}catch(g){m=`
Error generating stack: `+g.message+`
`+g.stack}return{value:s,source:a,stack:m,digest:null}}function Du(s,a,c){return{value:s,source:null,stack:c??null,digest:a??null}}function $u(s,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var hv=typeof WeakMap=="function"?WeakMap:Map;function Bm(s,a,c){c=vs(-1,c),c.tag=3,c.payload={element:null};var d=a.value;return c.callback=function(){Pl||(Pl=!0,Zu=d),$u(s,a)},c}function Vm(s,a,c){c=vs(-1,c),c.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var m=a.value;c.payload=function(){return d(m)},c.callback=function(){$u(s,a)}}var g=s.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(c.callback=function(){$u(s,a),typeof d!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var v=a.stack;this.componentDidCatch(a.value,{componentStack:v!==null?v:""})}),c}function qm(s,a,c){var d=s.pingCache;if(d===null){d=s.pingCache=new hv;var m=new Set;d.set(a,m)}else m=d.get(a),m===void 0&&(m=new Set,d.set(a,m));m.has(c)||(m.add(c),s=kv.bind(null,s,a,c),a.then(s,s))}function Hm(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Wm(s,a,c,d,m){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=vs(-1,1),a.tag=2,Ws(c,a,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var fv=F.ReactCurrentOwner,rr=!1;function Wt(s,a,c,d){a.child=s===null?hm(a,null,c,d):va(a,s.child,c,d)}function Km(s,a,c,d,m){c=c.render;var g=a.ref;return ba(a,m),d=Eu(s,a,c,d,g,m),c=Cu(),s!==null&&!rr?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,ws(s,a,m)):(ct&&c&&uu(a),a.flags|=1,Wt(s,a,d,m),a.child)}function Gm(s,a,c,d,m){if(s===null){var g=c.type;return typeof g=="function"&&!nd(g)&&g.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=g,Jm(s,a,g,d,m)):(s=Ll(c.type,null,d,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(g=s.child,(s.lanes&m)===0){var v=g.memoizedProps;if(c=c.compare,c=c!==null?c:Pi,c(v,d)&&s.ref===a.ref)return ws(s,a,m)}return a.flags|=1,s=Ys(g,d),s.ref=a.ref,s.return=a,a.child=s}function Jm(s,a,c,d,m){if(s!==null){var g=s.memoizedProps;if(Pi(g,d)&&s.ref===a.ref)if(rr=!1,a.pendingProps=d=g,(s.lanes&m)!==0)(s.flags&131072)!==0&&(rr=!0);else return a.lanes=s.lanes,ws(s,a,m)}return Lu(s,a,c,d,m)}function Qm(s,a,c){var d=a.pendingProps,m=d.children,g=s!==null?s.memoizedState:null;if(d.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(Sa,fr),fr|=c;else{if((c&1073741824)===0)return s=g!==null?g.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,at(Sa,fr),fr|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:c,at(Sa,fr),fr|=d}else g!==null?(d=g.baseLanes|c,a.memoizedState=null):d=c,at(Sa,fr),fr|=d;return Wt(s,a,m,c),a.child}function Zm(s,a){var c=a.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Lu(s,a,c,d,m){var g=tr(c)?Nn:zt.current;return g=pa(a,g),ba(a,m),c=Eu(s,a,c,d,g,m),d=Cu(),s!==null&&!rr?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,ws(s,a,m)):(ct&&d&&uu(a),a.flags|=1,Wt(s,a,c,m),a.child)}function Ym(s,a,c,d,m){if(tr(c)){var g=!0;ll(a)}else g=!1;if(ba(a,m),a.stateNode===null)kl(s,a),Mm(a,c,d),Iu(a,c,d,m),d=!0;else if(s===null){var v=a.stateNode,E=a.memoizedProps;v.props=E;var O=v.context,B=c.contextType;typeof B=="object"&&B!==null?B=Sr(B):(B=tr(c)?Nn:zt.current,B=pa(a,B));var Q=c.getDerivedStateFromProps,Y=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function";Y||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==d||O!==B)&&zm(a,v,d,B),Hs=!1;var J=a.memoizedState;v.state=J,xl(a,d,v,m),O=a.memoizedState,E!==d||J!==O||er.current||Hs?(typeof Q=="function"&&(Ou(a,c,Q,d),O=a.memoizedState),(E=Hs||Fm(a,c,E,d,J,O,B))?(Y||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=O),v.props=d,v.state=O,v.context=B,d=E):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{v=a.stateNode,mm(s,a),E=a.memoizedProps,B=a.type===a.elementType?E:Lr(a.type,E),v.props=B,Y=a.pendingProps,J=v.context,O=c.contextType,typeof O=="object"&&O!==null?O=Sr(O):(O=tr(c)?Nn:zt.current,O=pa(a,O));var ce=c.getDerivedStateFromProps;(Q=typeof ce=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==Y||J!==O)&&zm(a,v,d,O),Hs=!1,J=a.memoizedState,v.state=J,xl(a,d,v,m);var fe=a.memoizedState;E!==Y||J!==fe||er.current||Hs?(typeof ce=="function"&&(Ou(a,c,ce,d),fe=a.memoizedState),(B=Hs||Fm(a,c,B,d,J,fe,O)||!1)?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,fe,O),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,fe,O)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||E===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=fe),v.props=d,v.state=fe,v.context=O,d=B):(typeof v.componentDidUpdate!="function"||E===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),d=!1)}return Uu(s,a,c,d,g,m)}function Uu(s,a,c,d,m,g){Zm(s,a);var v=(a.flags&128)!==0;if(!d&&!v)return m&&sm(a,c,!1),ws(s,a,g);d=a.stateNode,fv.current=a;var E=v&&typeof c.getDerivedStateFromError!="function"?null:d.render();return a.flags|=1,s!==null&&v?(a.child=va(a,s.child,null,g),a.child=va(a,null,E,g)):Wt(s,a,E,g),a.memoizedState=d.state,m&&sm(a,c,!0),a.child}function Xm(s){var a=s.stateNode;a.pendingContext?tm(s,a.pendingContext,a.pendingContext!==a.context):a.context&&tm(s,a.context,!1),bu(s,a.containerInfo)}function ep(s,a,c,d,m){return ya(),mu(m),a.flags|=256,Wt(s,a,c,d),a.child}var Fu={dehydrated:null,treeContext:null,retryLane:0};function Mu(s){return{baseLanes:s,cachePool:null,transitions:null}}function tp(s,a,c){var d=a.pendingProps,m=dt.current,g=!1,v=(a.flags&128)!==0,E;if((E=v)||(E=s!==null&&s.memoizedState===null?!1:(m&2)!==0),E?(g=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),at(dt,m&1),s===null)return fu(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(v=d.children,s=d.fallback,g?(d=a.mode,g=a.child,v={mode:"hidden",children:v},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=v):g=Ul(v,d,0,null),s=In(s,d,c,null),g.return=a,s.return=a,g.sibling=s,a.child=g,a.child.memoizedState=Mu(c),a.memoizedState=Fu,s):zu(a,v));if(m=s.memoizedState,m!==null&&(E=m.dehydrated,E!==null))return mv(s,a,v,d,E,m,c);if(g){g=d.fallback,v=a.mode,m=s.child,E=m.sibling;var O={mode:"hidden",children:d.children};return(v&1)===0&&a.child!==m?(d=a.child,d.childLanes=0,d.pendingProps=O,a.deletions=null):(d=Ys(m,O),d.subtreeFlags=m.subtreeFlags&14680064),E!==null?g=Ys(E,g):(g=In(g,v,c,null),g.flags|=2),g.return=a,d.return=a,d.sibling=g,a.child=d,d=g,g=a.child,v=s.child.memoizedState,v=v===null?Mu(c):{baseLanes:v.baseLanes|c,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=s.childLanes&~c,a.memoizedState=Fu,d}return g=s.child,s=g.sibling,d=Ys(g,{mode:"visible",children:d.children}),(a.mode&1)===0&&(d.lanes=c),d.return=a,d.sibling=null,s!==null&&(c=a.deletions,c===null?(a.deletions=[s],a.flags|=16):c.push(s)),a.child=d,a.memoizedState=null,d}function zu(s,a){return a=Ul({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Sl(s,a,c,d){return d!==null&&mu(d),va(a,s.child,null,c),s=zu(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function mv(s,a,c,d,m,g,v){if(c)return a.flags&256?(a.flags&=-257,d=Du(Error(t(422))),Sl(s,a,v,d)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(g=d.fallback,m=a.mode,d=Ul({mode:"visible",children:d.children},m,0,null),g=In(g,m,v,null),g.flags|=2,d.return=a,g.return=a,d.sibling=g,a.child=d,(a.mode&1)!==0&&va(a,s.child,null,v),a.child.memoizedState=Mu(v),a.memoizedState=Fu,g);if((a.mode&1)===0)return Sl(s,a,v,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var E=d.dgst;return d=E,g=Error(t(419)),d=Du(g,d,void 0),Sl(s,a,v,d)}if(E=(v&s.childLanes)!==0,rr||E){if(d=Ot,d!==null){switch(v&-v){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|v))!==0?0:m,m!==0&&m!==g.retryLane&&(g.retryLane=m,ys(s,m),Mr(d,s,m,-1))}return sd(),d=Du(Error(t(421))),Sl(s,a,v,d)}return m.data==="$?"?(a.flags|=128,a.child=s.child,a=Ev.bind(null,s),m._reactRetry=a,null):(s=g.treeContext,hr=zs(m.nextSibling),dr=a,ct=!0,$r=null,s!==null&&(jr[Nr++]=gs,jr[Nr++]=xs,jr[Nr++]=Sn,gs=s.id,xs=s.overflow,Sn=a),a=zu(a,d.children),a.flags|=4096,a)}function rp(s,a,c){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),yu(s.return,a,c)}function Bu(s,a,c,d,m){var g=s.memoizedState;g===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=m)}function sp(s,a,c){var d=a.pendingProps,m=d.revealOrder,g=d.tail;if(Wt(s,a,d.children,c),d=dt.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&rp(s,c,a);else if(s.tag===19)rp(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(at(dt,d),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(c=a.child,m=null;c!==null;)s=c.alternate,s!==null&&yl(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),Bu(a,!1,m,c,g);break;case"backwards":for(c=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&yl(s)===null){a.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}Bu(a,!0,c,null,g);break;case"together":Bu(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function kl(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function ws(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),Rn|=a.lanes,(c&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,c=Ys(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=Ys(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function pv(s,a,c){switch(a.tag){case 3:Xm(a),ya();break;case 5:xm(a);break;case 1:tr(a.type)&&ll(a);break;case 4:bu(a,a.stateNode.containerInfo);break;case 10:var d=a.type._context,m=a.memoizedProps.value;at(ml,d._currentValue),d._currentValue=m;break;case 13:if(d=a.memoizedState,d!==null)return d.dehydrated!==null?(at(dt,dt.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?tp(s,a,c):(at(dt,dt.current&1),s=ws(s,a,c),s!==null?s.sibling:null);at(dt,dt.current&1);break;case 19:if(d=(c&a.childLanes)!==0,(s.flags&128)!==0){if(d)return sp(s,a,c);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),at(dt,dt.current),d)break;return null;case 22:case 23:return a.lanes=0,Qm(s,a,c)}return ws(s,a,c)}var np,Vu,ap,ip;np=function(s,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Vu=function(){},ap=function(s,a,c,d){var m=s.memoizedProps;if(m!==d){s=a.stateNode,Cn(es.current);var g=null;switch(c){case"input":m=Qr(s,m),d=Qr(s,d),g=[];break;case"select":m=ie({},m,{value:void 0}),d=ie({},d,{value:void 0}),g=[];break;case"textarea":m=$(s,m),d=$(s,d),g=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=al)}mi(c,d);var v;c=null;for(B in m)if(!d.hasOwnProperty(B)&&m.hasOwnProperty(B)&&m[B]!=null)if(B==="style"){var E=m[B];for(v in E)E.hasOwnProperty(v)&&(c||(c={}),c[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in d){var O=d[B];if(E=m!=null?m[B]:void 0,d.hasOwnProperty(B)&&O!==E&&(O!=null||E!=null))if(B==="style")if(E){for(v in E)!E.hasOwnProperty(v)||O&&O.hasOwnProperty(v)||(c||(c={}),c[v]="");for(v in O)O.hasOwnProperty(v)&&E[v]!==O[v]&&(c||(c={}),c[v]=O[v])}else c||(g||(g=[]),g.push(B,c)),c=O;else B==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,E=E?E.__html:void 0,O!=null&&E!==O&&(g=g||[]).push(B,O)):B==="children"?typeof O!="string"&&typeof O!="number"||(g=g||[]).push(B,""+O):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(O!=null&&B==="onScroll"&&ot("scroll",s),g||E===O||(g=[])):(g=g||[]).push(B,O))}c&&(g=g||[]).push("style",c);var B=g;(a.updateQueue=B)&&(a.flags|=4)}},ip=function(s,a,c,d){c!==d&&(a.flags|=4)};function Wi(s,a){if(!ct)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Vt(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,d=0;if(a)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=d,s.childLanes=c,a}function gv(s,a,c){var d=a.pendingProps;switch(du(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(a),null;case 1:return tr(a.type)&&ol(),Vt(a),null;case 3:return d=a.stateNode,_a(),lt(er),lt(zt),Nu(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(hl(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,$r!==null&&(ed($r),$r=null))),Vu(s,a),Vt(a),null;case 5:_u(a);var m=Cn(zi.current);if(c=a.type,s!==null&&a.stateNode!=null)ap(s,a,c,d,m),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!d){if(a.stateNode===null)throw Error(t(166));return Vt(a),null}if(s=Cn(es.current),hl(a)){d=a.stateNode,c=a.type;var g=a.memoizedProps;switch(d[Xr]=a,d[$i]=g,s=(a.mode&1)!==0,c){case"dialog":ot("cancel",d),ot("close",d);break;case"iframe":case"object":case"embed":ot("load",d);break;case"video":case"audio":for(m=0;m<Oi.length;m++)ot(Oi[m],d);break;case"source":ot("error",d);break;case"img":case"image":case"link":ot("error",d),ot("load",d);break;case"details":ot("toggle",d);break;case"input":re(d,g),ot("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},ot("invalid",d);break;case"textarea":q(d,g),ot("invalid",d)}mi(c,g),m=null;for(var v in g)if(g.hasOwnProperty(v)){var E=g[v];v==="children"?typeof E=="string"?d.textContent!==E&&(g.suppressHydrationWarning!==!0&&nl(d.textContent,E,s),m=["children",E]):typeof E=="number"&&d.textContent!==""+E&&(g.suppressHydrationWarning!==!0&&nl(d.textContent,E,s),m=["children",""+E]):o.hasOwnProperty(v)&&E!=null&&v==="onScroll"&&ot("scroll",d)}switch(c){case"input":Or(d),U(d,g,!0);break;case"textarea":Or(d),se(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=al)}d=m,a.updateQueue=d,d!==null&&(a.flags|=4)}else{v=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=X(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=v.createElement(c,{is:d.is}):(s=v.createElement(c),c==="select"&&(v=s,d.multiple?v.multiple=!0:d.size&&(v.size=d.size))):s=v.createElementNS(s,c),s[Xr]=a,s[$i]=d,np(s,a,!1,!1),a.stateNode=s;e:{switch(v=ra(c,d),c){case"dialog":ot("cancel",s),ot("close",s),m=d;break;case"iframe":case"object":case"embed":ot("load",s),m=d;break;case"video":case"audio":for(m=0;m<Oi.length;m++)ot(Oi[m],s);m=d;break;case"source":ot("error",s),m=d;break;case"img":case"image":case"link":ot("error",s),ot("load",s),m=d;break;case"details":ot("toggle",s),m=d;break;case"input":re(s,d),m=Qr(s,d),ot("invalid",s);break;case"option":m=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},m=ie({},d,{value:void 0}),ot("invalid",s);break;case"textarea":q(s,d),m=$(s,d),ot("invalid",s);break;default:m=d}mi(c,m),E=m;for(g in E)if(E.hasOwnProperty(g)){var O=E[g];g==="style"?ta(s,O):g==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&Ze(s,O)):g==="children"?typeof O=="string"?(c!=="textarea"||O!=="")&&vt(s,O):typeof O=="number"&&vt(s,""+O):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?O!=null&&g==="onScroll"&&ot("scroll",s):O!=null&&C(s,g,O,v))}switch(c){case"input":Or(s),U(s,d,!1);break;case"textarea":Or(s),se(s);break;case"option":d.value!=null&&s.setAttribute("value",""+Ve(d.value));break;case"select":s.multiple=!!d.multiple,g=d.value,g!=null?k(s,!!d.multiple,g,!1):d.defaultValue!=null&&k(s,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=al)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Vt(a),null;case 6:if(s&&a.stateNode!=null)ip(s,a,s.memoizedProps,d);else{if(typeof d!="string"&&a.stateNode===null)throw Error(t(166));if(c=Cn(zi.current),Cn(es.current),hl(a)){if(d=a.stateNode,c=a.memoizedProps,d[Xr]=a,(g=d.nodeValue!==c)&&(s=dr,s!==null))switch(s.tag){case 3:nl(d.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&nl(d.nodeValue,c,(s.mode&1)!==0)}g&&(a.flags|=4)}else d=(c.nodeType===9?c:c.ownerDocument).createTextNode(d),d[Xr]=a,a.stateNode=d}return Vt(a),null;case 13:if(lt(dt),d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ct&&hr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)cm(),ya(),a.flags|=98560,g=!1;else if(g=hl(a),d!==null&&d.dehydrated!==null){if(s===null){if(!g)throw Error(t(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Xr]=a}else ya(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Vt(a),g=!1}else $r!==null&&(ed($r),$r=null),g=!0;if(!g)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(dt.current&1)!==0?Ct===0&&(Ct=3):sd())),a.updateQueue!==null&&(a.flags|=4),Vt(a),null);case 4:return _a(),Vu(s,a),s===null&&Ii(a.stateNode.containerInfo),Vt(a),null;case 10:return xu(a.type._context),Vt(a),null;case 17:return tr(a.type)&&ol(),Vt(a),null;case 19:if(lt(dt),g=a.memoizedState,g===null)return Vt(a),null;if(d=(a.flags&128)!==0,v=g.rendering,v===null)if(d)Wi(g,!1);else{if(Ct!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(v=yl(s),v!==null){for(a.flags|=128,Wi(g,!1),d=v.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),a.subtreeFlags=0,d=c,c=a.child;c!==null;)g=c,s=d,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=s,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,s=v.dependencies,g.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return at(dt,dt.current&1|2),a.child}s=s.sibling}g.tail!==null&&wt()>ka&&(a.flags|=128,d=!0,Wi(g,!1),a.lanes=4194304)}else{if(!d)if(s=yl(v),s!==null){if(a.flags|=128,d=!0,c=s.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),Wi(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!ct)return Vt(a),null}else 2*wt()-g.renderingStartTime>ka&&c!==1073741824&&(a.flags|=128,d=!0,Wi(g,!1),a.lanes=4194304);g.isBackwards?(v.sibling=a.child,a.child=v):(c=g.last,c!==null?c.sibling=v:a.child=v,g.last=v)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=wt(),a.sibling=null,c=dt.current,at(dt,d?c&1|2:c&1),a):(Vt(a),null);case 22:case 23:return rd(),d=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(a.flags|=8192),d&&(a.mode&1)!==0?(fr&1073741824)!==0&&(Vt(a),a.subtreeFlags&6&&(a.flags|=8192)):Vt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function xv(s,a){switch(du(a),a.tag){case 1:return tr(a.type)&&ol(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return _a(),lt(er),lt(zt),Nu(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return _u(a),null;case 13:if(lt(dt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ya()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return lt(dt),null;case 4:return _a(),null;case 10:return xu(a.type._context),null;case 22:case 23:return rd(),null;case 24:return null;default:return null}}var El=!1,qt=!1,yv=typeof WeakSet=="function"?WeakSet:Set,he=null;function Na(s,a){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){gt(s,a,d)}else c.current=null}function qu(s,a,c){try{c()}catch(d){gt(s,a,d)}}var op=!1;function vv(s,a){if(ru=Ko,s=Ff(),Gc(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var m=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{c.nodeType,g.nodeType}catch{c=null;break e}var v=0,E=-1,O=-1,B=0,Q=0,Y=s,J=null;t:for(;;){for(var ce;Y!==c||m!==0&&Y.nodeType!==3||(E=v+m),Y!==g||d!==0&&Y.nodeType!==3||(O=v+d),Y.nodeType===3&&(v+=Y.nodeValue.length),(ce=Y.firstChild)!==null;)J=Y,Y=ce;for(;;){if(Y===s)break t;if(J===c&&++B===m&&(E=v),J===g&&++Q===d&&(O=v),(ce=Y.nextSibling)!==null)break;Y=J,J=Y.parentNode}Y=ce}c=E===-1||O===-1?null:{start:E,end:O}}else c=null}c=c||{start:0,end:0}}else c=null;for(su={focusedElem:s,selectionRange:c},Ko=!1,he=a;he!==null;)if(a=he,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,he=s;else for(;he!==null;){a=he;try{var fe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var ge=fe.memoizedProps,bt=fe.memoizedState,L=a.stateNode,I=L.getSnapshotBeforeUpdate(a.elementType===a.type?ge:Lr(a.type,ge),bt);L.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var M=a.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){gt(a,a.return,ee)}if(s=a.sibling,s!==null){s.return=a.return,he=s;break}he=a.return}return fe=op,op=!1,fe}function Ki(s,a,c){var d=a.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&s)===s){var g=m.destroy;m.destroy=void 0,g!==void 0&&qu(a,c,g)}m=m.next}while(m!==d)}}function Cl(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&s)===s){var d=c.create;c.destroy=d()}c=c.next}while(c!==a)}}function Hu(s){var a=s.ref;if(a!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof a=="function"?a(s):a.current=s}}function lp(s){var a=s.alternate;a!==null&&(s.alternate=null,lp(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Xr],delete a[$i],delete a[ou],delete a[tv],delete a[rv])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function cp(s){return s.tag===5||s.tag===3||s.tag===4}function up(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||cp(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Wu(s,a,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(s,a):c.insertBefore(s,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(s,c)):(a=c,a.appendChild(s)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=al));else if(d!==4&&(s=s.child,s!==null))for(Wu(s,a,c),s=s.sibling;s!==null;)Wu(s,a,c),s=s.sibling}function Ku(s,a,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(Ku(s,a,c),s=s.sibling;s!==null;)Ku(s,a,c),s=s.sibling}var $t=null,Ur=!1;function Ks(s,a,c){for(c=c.child;c!==null;)dp(s,a,c),c=c.sibling}function dp(s,a,c){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount(zo,c)}catch{}switch(c.tag){case 5:qt||Na(c,a);case 6:var d=$t,m=Ur;$t=null,Ks(s,a,c),$t=d,Ur=m,$t!==null&&(Ur?(s=$t,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):$t.removeChild(c.stateNode));break;case 18:$t!==null&&(Ur?(s=$t,c=c.stateNode,s.nodeType===8?iu(s.parentNode,c):s.nodeType===1&&iu(s,c),Si(s)):iu($t,c.stateNode));break;case 4:d=$t,m=Ur,$t=c.stateNode.containerInfo,Ur=!0,Ks(s,a,c),$t=d,Ur=m;break;case 0:case 11:case 14:case 15:if(!qt&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var g=m,v=g.destroy;g=g.tag,v!==void 0&&((g&2)!==0||(g&4)!==0)&&qu(c,a,v),m=m.next}while(m!==d)}Ks(s,a,c);break;case 1:if(!qt&&(Na(c,a),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(E){gt(c,a,E)}Ks(s,a,c);break;case 21:Ks(s,a,c);break;case 22:c.mode&1?(qt=(d=qt)||c.memoizedState!==null,Ks(s,a,c),qt=d):Ks(s,a,c);break;default:Ks(s,a,c)}}function hp(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new yv),a.forEach(function(d){var m=Cv.bind(null,s,d);c.has(d)||(c.add(d),d.then(m,m))})}}function Fr(s,a){var c=a.deletions;if(c!==null)for(var d=0;d<c.length;d++){var m=c[d];try{var g=s,v=a,E=v;e:for(;E!==null;){switch(E.tag){case 5:$t=E.stateNode,Ur=!1;break e;case 3:$t=E.stateNode.containerInfo,Ur=!0;break e;case 4:$t=E.stateNode.containerInfo,Ur=!0;break e}E=E.return}if($t===null)throw Error(t(160));dp(g,v,m),$t=null,Ur=!1;var O=m.alternate;O!==null&&(O.return=null),m.return=null}catch(B){gt(m,a,B)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)fp(a,s),a=a.sibling}function fp(s,a){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Fr(a,s),rs(s),d&4){try{Ki(3,s,s.return),Cl(3,s)}catch(ge){gt(s,s.return,ge)}try{Ki(5,s,s.return)}catch(ge){gt(s,s.return,ge)}}break;case 1:Fr(a,s),rs(s),d&512&&c!==null&&Na(c,c.return);break;case 5:if(Fr(a,s),rs(s),d&512&&c!==null&&Na(c,c.return),s.flags&32){var m=s.stateNode;try{vt(m,"")}catch(ge){gt(s,s.return,ge)}}if(d&4&&(m=s.stateNode,m!=null)){var g=s.memoizedProps,v=c!==null?c.memoizedProps:g,E=s.type,O=s.updateQueue;if(s.updateQueue=null,O!==null)try{E==="input"&&g.type==="radio"&&g.name!=null&&Le(m,g),ra(E,v);var B=ra(E,g);for(v=0;v<O.length;v+=2){var Q=O[v],Y=O[v+1];Q==="style"?ta(m,Y):Q==="dangerouslySetInnerHTML"?Ze(m,Y):Q==="children"?vt(m,Y):C(m,Q,Y,B)}switch(E){case"input":nt(m,g);break;case"textarea":oe(m,g);break;case"select":var J=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!g.multiple;var ce=g.value;ce!=null?k(m,!!g.multiple,ce,!1):J!==!!g.multiple&&(g.defaultValue!=null?k(m,!!g.multiple,g.defaultValue,!0):k(m,!!g.multiple,g.multiple?[]:"",!1))}m[$i]=g}catch(ge){gt(s,s.return,ge)}}break;case 6:if(Fr(a,s),rs(s),d&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,g=s.memoizedProps;try{m.nodeValue=g}catch(ge){gt(s,s.return,ge)}}break;case 3:if(Fr(a,s),rs(s),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Si(a.containerInfo)}catch(ge){gt(s,s.return,ge)}break;case 4:Fr(a,s),rs(s);break;case 13:Fr(a,s),rs(s),m=s.child,m.flags&8192&&(g=m.memoizedState!==null,m.stateNode.isHidden=g,!g||m.alternate!==null&&m.alternate.memoizedState!==null||(Qu=wt())),d&4&&hp(s);break;case 22:if(Q=c!==null&&c.memoizedState!==null,s.mode&1?(qt=(B=qt)||Q,Fr(a,s),qt=B):Fr(a,s),rs(s),d&8192){if(B=s.memoizedState!==null,(s.stateNode.isHidden=B)&&!Q&&(s.mode&1)!==0)for(he=s,Q=s.child;Q!==null;){for(Y=he=Q;he!==null;){switch(J=he,ce=J.child,J.tag){case 0:case 11:case 14:case 15:Ki(4,J,J.return);break;case 1:Na(J,J.return);var fe=J.stateNode;if(typeof fe.componentWillUnmount=="function"){d=J,c=J.return;try{a=d,fe.props=a.memoizedProps,fe.state=a.memoizedState,fe.componentWillUnmount()}catch(ge){gt(d,c,ge)}}break;case 5:Na(J,J.return);break;case 22:if(J.memoizedState!==null){gp(Y);continue}}ce!==null?(ce.return=J,he=ce):gp(Y)}Q=Q.sibling}e:for(Q=null,Y=s;;){if(Y.tag===5){if(Q===null){Q=Y;try{m=Y.stateNode,B?(g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(E=Y.stateNode,O=Y.memoizedProps.style,v=O!=null&&O.hasOwnProperty("display")?O.display:null,E.style.display=Lo("display",v))}catch(ge){gt(s,s.return,ge)}}}else if(Y.tag===6){if(Q===null)try{Y.stateNode.nodeValue=B?"":Y.memoizedProps}catch(ge){gt(s,s.return,ge)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===s)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===s)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===s)break e;Q===Y&&(Q=null),Y=Y.return}Q===Y&&(Q=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Fr(a,s),rs(s),d&4&&hp(s);break;case 21:break;default:Fr(a,s),rs(s)}}function rs(s){var a=s.flags;if(a&2){try{e:{for(var c=s.return;c!==null;){if(cp(c)){var d=c;break e}c=c.return}throw Error(t(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(vt(m,""),d.flags&=-33);var g=up(s);Ku(s,g,m);break;case 3:case 4:var v=d.stateNode.containerInfo,E=up(s);Wu(s,E,v);break;default:throw Error(t(161))}}catch(O){gt(s,s.return,O)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function wv(s,a,c){he=s,mp(s)}function mp(s,a,c){for(var d=(s.mode&1)!==0;he!==null;){var m=he,g=m.child;if(m.tag===22&&d){var v=m.memoizedState!==null||El;if(!v){var E=m.alternate,O=E!==null&&E.memoizedState!==null||qt;E=El;var B=qt;if(El=v,(qt=O)&&!B)for(he=m;he!==null;)v=he,O=v.child,v.tag===22&&v.memoizedState!==null?xp(m):O!==null?(O.return=v,he=O):xp(m);for(;g!==null;)he=g,mp(g),g=g.sibling;he=m,El=E,qt=B}pp(s)}else(m.subtreeFlags&8772)!==0&&g!==null?(g.return=m,he=g):pp(s)}}function pp(s){for(;he!==null;){var a=he;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:qt||Cl(5,a);break;case 1:var d=a.stateNode;if(a.flags&4&&!qt)if(c===null)d.componentDidMount();else{var m=a.elementType===a.type?c.memoizedProps:Lr(a.type,c.memoizedProps);d.componentDidUpdate(m,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=a.updateQueue;g!==null&&gm(a,g,d);break;case 3:var v=a.updateQueue;if(v!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}gm(a,v,c)}break;case 5:var E=a.stateNode;if(c===null&&a.flags&4){c=E;var O=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&c.focus();break;case"img":O.src&&(c.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var B=a.alternate;if(B!==null){var Q=B.memoizedState;if(Q!==null){var Y=Q.dehydrated;Y!==null&&Si(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||a.flags&512&&Hu(a)}catch(J){gt(a,a.return,J)}}if(a===s){he=null;break}if(c=a.sibling,c!==null){c.return=a.return,he=c;break}he=a.return}}function gp(s){for(;he!==null;){var a=he;if(a===s){he=null;break}var c=a.sibling;if(c!==null){c.return=a.return,he=c;break}he=a.return}}function xp(s){for(;he!==null;){var a=he;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Cl(4,a)}catch(O){gt(a,c,O)}break;case 1:var d=a.stateNode;if(typeof d.componentDidMount=="function"){var m=a.return;try{d.componentDidMount()}catch(O){gt(a,m,O)}}var g=a.return;try{Hu(a)}catch(O){gt(a,g,O)}break;case 5:var v=a.return;try{Hu(a)}catch(O){gt(a,v,O)}}}catch(O){gt(a,a.return,O)}if(a===s){he=null;break}var E=a.sibling;if(E!==null){E.return=a.return,he=E;break}he=a.return}}var bv=Math.ceil,Tl=F.ReactCurrentDispatcher,Gu=F.ReactCurrentOwner,Er=F.ReactCurrentBatchConfig,Ge=0,Ot=null,_t=null,Lt=0,fr=0,Sa=Bs(0),Ct=0,Gi=null,Rn=0,Rl=0,Ju=0,Ji=null,sr=null,Qu=0,ka=1/0,bs=null,Pl=!1,Zu=null,Gs=null,Al=!1,Js=null,Ol=0,Qi=0,Yu=null,Il=-1,Dl=0;function Kt(){return(Ge&6)!==0?wt():Il!==-1?Il:Il=wt()}function Qs(s){return(s.mode&1)===0?1:(Ge&2)!==0&&Lt!==0?Lt&-Lt:nv.transition!==null?(Dl===0&&(Dl=uf()),Dl):(s=rt,s!==0||(s=window.event,s=s===void 0?16:vf(s.type)),s)}function Mr(s,a,c,d){if(50<Qi)throw Qi=0,Yu=null,Error(t(185));wi(s,c,d),((Ge&2)===0||s!==Ot)&&(s===Ot&&((Ge&2)===0&&(Rl|=c),Ct===4&&Zs(s,Lt)),nr(s,d),c===1&&Ge===0&&(a.mode&1)===0&&(ka=wt()+500,cl&&qs()))}function nr(s,a){var c=s.callbackNode;n0(s,a);var d=qo(s,s===Ot?Lt:0);if(d===0)c!==null&&of(c),s.callbackNode=null,s.callbackPriority=0;else if(a=d&-d,s.callbackPriority!==a){if(c!=null&&of(c),a===1)s.tag===0?sv(vp.bind(null,s)):nm(vp.bind(null,s)),X0(function(){(Ge&6)===0&&qs()}),c=null;else{switch(df(d)){case 1:c=Pc;break;case 4:c=lf;break;case 16:c=Mo;break;case 536870912:c=cf;break;default:c=Mo}c=Ep(c,yp.bind(null,s))}s.callbackPriority=a,s.callbackNode=c}}function yp(s,a){if(Il=-1,Dl=0,(Ge&6)!==0)throw Error(t(327));var c=s.callbackNode;if(Ea()&&s.callbackNode!==c)return null;var d=qo(s,s===Ot?Lt:0);if(d===0)return null;if((d&30)!==0||(d&s.expiredLanes)!==0||a)a=$l(s,d);else{a=d;var m=Ge;Ge|=2;var g=bp();(Ot!==s||Lt!==a)&&(bs=null,ka=wt()+500,An(s,a));do try{Nv();break}catch(E){wp(s,E)}while(!0);gu(),Tl.current=g,Ge=m,_t!==null?a=0:(Ot=null,Lt=0,a=Ct)}if(a!==0){if(a===2&&(m=Ac(s),m!==0&&(d=m,a=Xu(s,m))),a===1)throw c=Gi,An(s,0),Zs(s,d),nr(s,wt()),c;if(a===6)Zs(s,d);else{if(m=s.current.alternate,(d&30)===0&&!_v(m)&&(a=$l(s,d),a===2&&(g=Ac(s),g!==0&&(d=g,a=Xu(s,g))),a===1))throw c=Gi,An(s,0),Zs(s,d),nr(s,wt()),c;switch(s.finishedWork=m,s.finishedLanes=d,a){case 0:case 1:throw Error(t(345));case 2:On(s,sr,bs);break;case 3:if(Zs(s,d),(d&130023424)===d&&(a=Qu+500-wt(),10<a)){if(qo(s,0)!==0)break;if(m=s.suspendedLanes,(m&d)!==d){Kt(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=au(On.bind(null,s,sr,bs),a);break}On(s,sr,bs);break;case 4:if(Zs(s,d),(d&4194240)===d)break;for(a=s.eventTimes,m=-1;0<d;){var v=31-Ir(d);g=1<<v,v=a[v],v>m&&(m=v),d&=~g}if(d=m,d=wt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*bv(d/1960))-d,10<d){s.timeoutHandle=au(On.bind(null,s,sr,bs),d);break}On(s,sr,bs);break;case 5:On(s,sr,bs);break;default:throw Error(t(329))}}}return nr(s,wt()),s.callbackNode===c?yp.bind(null,s):null}function Xu(s,a){var c=Ji;return s.current.memoizedState.isDehydrated&&(An(s,a).flags|=256),s=$l(s,a),s!==2&&(a=sr,sr=c,a!==null&&ed(a)),s}function ed(s){sr===null?sr=s:sr.push.apply(sr,s)}function _v(s){for(var a=s;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var m=c[d],g=m.getSnapshot;m=m.value;try{if(!Dr(g(),m))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Zs(s,a){for(a&=~Ju,a&=~Rl,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var c=31-Ir(a),d=1<<c;s[c]=-1,a&=~d}}function vp(s){if((Ge&6)!==0)throw Error(t(327));Ea();var a=qo(s,0);if((a&1)===0)return nr(s,wt()),null;var c=$l(s,a);if(s.tag!==0&&c===2){var d=Ac(s);d!==0&&(a=d,c=Xu(s,d))}if(c===1)throw c=Gi,An(s,0),Zs(s,a),nr(s,wt()),c;if(c===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,On(s,sr,bs),nr(s,wt()),null}function td(s,a){var c=Ge;Ge|=1;try{return s(a)}finally{Ge=c,Ge===0&&(ka=wt()+500,cl&&qs())}}function Pn(s){Js!==null&&Js.tag===0&&(Ge&6)===0&&Ea();var a=Ge;Ge|=1;var c=Er.transition,d=rt;try{if(Er.transition=null,rt=1,s)return s()}finally{rt=d,Er.transition=c,Ge=a,(Ge&6)===0&&qs()}}function rd(){fr=Sa.current,lt(Sa)}function An(s,a){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,Y0(c)),_t!==null)for(c=_t.return;c!==null;){var d=c;switch(du(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ol();break;case 3:_a(),lt(er),lt(zt),Nu();break;case 5:_u(d);break;case 4:_a();break;case 13:lt(dt);break;case 19:lt(dt);break;case 10:xu(d.type._context);break;case 22:case 23:rd()}c=c.return}if(Ot=s,_t=s=Ys(s.current,null),Lt=fr=a,Ct=0,Gi=null,Ju=Rl=Rn=0,sr=Ji=null,En!==null){for(a=0;a<En.length;a++)if(c=En[a],d=c.interleaved,d!==null){c.interleaved=null;var m=d.next,g=c.pending;if(g!==null){var v=g.next;g.next=m,d.next=v}c.pending=d}En=null}return s}function wp(s,a){do{var c=_t;try{if(gu(),vl.current=jl,wl){for(var d=ht.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}wl=!1}if(Tn=0,At=Et=ht=null,Bi=!1,Vi=0,Gu.current=null,c===null||c.return===null){Ct=1,Gi=a,_t=null;break}e:{var g=s,v=c.return,E=c,O=a;if(a=Lt,E.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var B=O,Q=E,Y=Q.tag;if((Q.mode&1)===0&&(Y===0||Y===11||Y===15)){var J=Q.alternate;J?(Q.updateQueue=J.updateQueue,Q.memoizedState=J.memoizedState,Q.lanes=J.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ce=Hm(v);if(ce!==null){ce.flags&=-257,Wm(ce,v,E,g,a),ce.mode&1&&qm(g,B,a),a=ce,O=B;var fe=a.updateQueue;if(fe===null){var ge=new Set;ge.add(O),a.updateQueue=ge}else fe.add(O);break e}else{if((a&1)===0){qm(g,B,a),sd();break e}O=Error(t(426))}}else if(ct&&E.mode&1){var bt=Hm(v);if(bt!==null){(bt.flags&65536)===0&&(bt.flags|=256),Wm(bt,v,E,g,a),mu(ja(O,E));break e}}g=O=ja(O,E),Ct!==4&&(Ct=2),Ji===null?Ji=[g]:Ji.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,a&=-a,g.lanes|=a;var L=Bm(g,O,a);pm(g,L);break e;case 1:E=O;var I=g.type,M=g.stateNode;if((g.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Gs===null||!Gs.has(M)))){g.flags|=65536,a&=-a,g.lanes|=a;var ee=Vm(g,E,a);pm(g,ee);break e}}g=g.return}while(g!==null)}jp(c)}catch(ye){a=ye,_t===c&&c!==null&&(_t=c=c.return);continue}break}while(!0)}function bp(){var s=Tl.current;return Tl.current=jl,s===null?jl:s}function sd(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Ot===null||(Rn&268435455)===0&&(Rl&268435455)===0||Zs(Ot,Lt)}function $l(s,a){var c=Ge;Ge|=2;var d=bp();(Ot!==s||Lt!==a)&&(bs=null,An(s,a));do try{jv();break}catch(m){wp(s,m)}while(!0);if(gu(),Ge=c,Tl.current=d,_t!==null)throw Error(t(261));return Ot=null,Lt=0,Ct}function jv(){for(;_t!==null;)_p(_t)}function Nv(){for(;_t!==null&&!Jy();)_p(_t)}function _p(s){var a=kp(s.alternate,s,fr);s.memoizedProps=s.pendingProps,a===null?jp(s):_t=a,Gu.current=null}function jp(s){var a=s;do{var c=a.alternate;if(s=a.return,(a.flags&32768)===0){if(c=gv(c,a,fr),c!==null){_t=c;return}}else{if(c=xv(c,a),c!==null){c.flags&=32767,_t=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ct=6,_t=null;return}}if(a=a.sibling,a!==null){_t=a;return}_t=a=s}while(a!==null);Ct===0&&(Ct=5)}function On(s,a,c){var d=rt,m=Er.transition;try{Er.transition=null,rt=1,Sv(s,a,c,d)}finally{Er.transition=m,rt=d}return null}function Sv(s,a,c,d){do Ea();while(Js!==null);if((Ge&6)!==0)throw Error(t(327));c=s.finishedWork;var m=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var g=c.lanes|c.childLanes;if(a0(s,g),s===Ot&&(_t=Ot=null,Lt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Al||(Al=!0,Ep(Mo,function(){return Ea(),null})),g=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||g){g=Er.transition,Er.transition=null;var v=rt;rt=1;var E=Ge;Ge|=4,Gu.current=null,vv(s,c),fp(c,s),H0(su),Ko=!!ru,su=ru=null,s.current=c,wv(c),Qy(),Ge=E,rt=v,Er.transition=g}else s.current=c;if(Al&&(Al=!1,Js=s,Ol=m),g=s.pendingLanes,g===0&&(Gs=null),Xy(c.stateNode),nr(s,wt()),a!==null)for(d=s.onRecoverableError,c=0;c<a.length;c++)m=a[c],d(m.value,{componentStack:m.stack,digest:m.digest});if(Pl)throw Pl=!1,s=Zu,Zu=null,s;return(Ol&1)!==0&&s.tag!==0&&Ea(),g=s.pendingLanes,(g&1)!==0?s===Yu?Qi++:(Qi=0,Yu=s):Qi=0,qs(),null}function Ea(){if(Js!==null){var s=df(Ol),a=Er.transition,c=rt;try{if(Er.transition=null,rt=16>s?16:s,Js===null)var d=!1;else{if(s=Js,Js=null,Ol=0,(Ge&6)!==0)throw Error(t(331));var m=Ge;for(Ge|=4,he=s.current;he!==null;){var g=he,v=g.child;if((he.flags&16)!==0){var E=g.deletions;if(E!==null){for(var O=0;O<E.length;O++){var B=E[O];for(he=B;he!==null;){var Q=he;switch(Q.tag){case 0:case 11:case 15:Ki(8,Q,g)}var Y=Q.child;if(Y!==null)Y.return=Q,he=Y;else for(;he!==null;){Q=he;var J=Q.sibling,ce=Q.return;if(lp(Q),Q===B){he=null;break}if(J!==null){J.return=ce,he=J;break}he=ce}}}var fe=g.alternate;if(fe!==null){var ge=fe.child;if(ge!==null){fe.child=null;do{var bt=ge.sibling;ge.sibling=null,ge=bt}while(ge!==null)}}he=g}}if((g.subtreeFlags&2064)!==0&&v!==null)v.return=g,he=v;else e:for(;he!==null;){if(g=he,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ki(9,g,g.return)}var L=g.sibling;if(L!==null){L.return=g.return,he=L;break e}he=g.return}}var I=s.current;for(he=I;he!==null;){v=he;var M=v.child;if((v.subtreeFlags&2064)!==0&&M!==null)M.return=v,he=M;else e:for(v=I;he!==null;){if(E=he,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:Cl(9,E)}}catch(ye){gt(E,E.return,ye)}if(E===v){he=null;break e}var ee=E.sibling;if(ee!==null){ee.return=E.return,he=ee;break e}he=E.return}}if(Ge=m,qs(),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot(zo,s)}catch{}d=!0}return d}finally{rt=c,Er.transition=a}}return!1}function Np(s,a,c){a=ja(c,a),a=Bm(s,a,1),s=Ws(s,a,1),a=Kt(),s!==null&&(wi(s,1,a),nr(s,a))}function gt(s,a,c){if(s.tag===3)Np(s,s,c);else for(;a!==null;){if(a.tag===3){Np(a,s,c);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Gs===null||!Gs.has(d))){s=ja(c,s),s=Vm(a,s,1),a=Ws(a,s,1),s=Kt(),a!==null&&(wi(a,1,s),nr(a,s));break}}a=a.return}}function kv(s,a,c){var d=s.pingCache;d!==null&&d.delete(a),a=Kt(),s.pingedLanes|=s.suspendedLanes&c,Ot===s&&(Lt&c)===c&&(Ct===4||Ct===3&&(Lt&130023424)===Lt&&500>wt()-Qu?An(s,0):Ju|=c),nr(s,a)}function Sp(s,a){a===0&&((s.mode&1)===0?a=1:(a=Vo,Vo<<=1,(Vo&130023424)===0&&(Vo=4194304)));var c=Kt();s=ys(s,a),s!==null&&(wi(s,a,c),nr(s,c))}function Ev(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),Sp(s,c)}function Cv(s,a){var c=0;switch(s.tag){case 13:var d=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(a),Sp(s,c)}var kp;kp=function(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps||er.current)rr=!0;else{if((s.lanes&c)===0&&(a.flags&128)===0)return rr=!1,pv(s,a,c);rr=(s.flags&131072)!==0}else rr=!1,ct&&(a.flags&1048576)!==0&&am(a,dl,a.index);switch(a.lanes=0,a.tag){case 2:var d=a.type;kl(s,a),s=a.pendingProps;var m=pa(a,zt.current);ba(a,c),m=Eu(null,a,d,s,m,c);var g=Cu();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,tr(d)?(g=!0,ll(a)):g=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,wu(a),m.updater=Nl,a.stateNode=m,m._reactInternals=a,Iu(a,d,s,c),a=Uu(null,a,d,!0,g,c)):(a.tag=0,ct&&g&&uu(a),Wt(null,a,m,c),a=a.child),a;case 16:d=a.elementType;e:{switch(kl(s,a),s=a.pendingProps,m=d._init,d=m(d._payload),a.type=d,m=a.tag=Rv(d),s=Lr(d,s),m){case 0:a=Lu(null,a,d,s,c);break e;case 1:a=Ym(null,a,d,s,c);break e;case 11:a=Km(null,a,d,s,c);break e;case 14:a=Gm(null,a,d,Lr(d.type,s),c);break e}throw Error(t(306,d,""))}return a;case 0:return d=a.type,m=a.pendingProps,m=a.elementType===d?m:Lr(d,m),Lu(s,a,d,m,c);case 1:return d=a.type,m=a.pendingProps,m=a.elementType===d?m:Lr(d,m),Ym(s,a,d,m,c);case 3:e:{if(Xm(a),s===null)throw Error(t(387));d=a.pendingProps,g=a.memoizedState,m=g.element,mm(s,a),xl(a,d,null,c);var v=a.memoizedState;if(d=v.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){m=ja(Error(t(423)),a),a=ep(s,a,d,c,m);break e}else if(d!==m){m=ja(Error(t(424)),a),a=ep(s,a,d,c,m);break e}else for(hr=zs(a.stateNode.containerInfo.firstChild),dr=a,ct=!0,$r=null,c=hm(a,null,d,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ya(),d===m){a=ws(s,a,c);break e}Wt(s,a,d,c)}a=a.child}return a;case 5:return xm(a),s===null&&fu(a),d=a.type,m=a.pendingProps,g=s!==null?s.memoizedProps:null,v=m.children,nu(d,m)?v=null:g!==null&&nu(d,g)&&(a.flags|=32),Zm(s,a),Wt(s,a,v,c),a.child;case 6:return s===null&&fu(a),null;case 13:return tp(s,a,c);case 4:return bu(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=va(a,null,d,c):Wt(s,a,d,c),a.child;case 11:return d=a.type,m=a.pendingProps,m=a.elementType===d?m:Lr(d,m),Km(s,a,d,m,c);case 7:return Wt(s,a,a.pendingProps,c),a.child;case 8:return Wt(s,a,a.pendingProps.children,c),a.child;case 12:return Wt(s,a,a.pendingProps.children,c),a.child;case 10:e:{if(d=a.type._context,m=a.pendingProps,g=a.memoizedProps,v=m.value,at(ml,d._currentValue),d._currentValue=v,g!==null)if(Dr(g.value,v)){if(g.children===m.children&&!er.current){a=ws(s,a,c);break e}}else for(g=a.child,g!==null&&(g.return=a);g!==null;){var E=g.dependencies;if(E!==null){v=g.child;for(var O=E.firstContext;O!==null;){if(O.context===d){if(g.tag===1){O=vs(-1,c&-c),O.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var Q=B.pending;Q===null?O.next=O:(O.next=Q.next,Q.next=O),B.pending=O}}g.lanes|=c,O=g.alternate,O!==null&&(O.lanes|=c),yu(g.return,c,a),E.lanes|=c;break}O=O.next}}else if(g.tag===10)v=g.type===a.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(t(341));v.lanes|=c,E=v.alternate,E!==null&&(E.lanes|=c),yu(v,c,a),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===a){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}Wt(s,a,m.children,c),a=a.child}return a;case 9:return m=a.type,d=a.pendingProps.children,ba(a,c),m=Sr(m),d=d(m),a.flags|=1,Wt(s,a,d,c),a.child;case 14:return d=a.type,m=Lr(d,a.pendingProps),m=Lr(d.type,m),Gm(s,a,d,m,c);case 15:return Jm(s,a,a.type,a.pendingProps,c);case 17:return d=a.type,m=a.pendingProps,m=a.elementType===d?m:Lr(d,m),kl(s,a),a.tag=1,tr(d)?(s=!0,ll(a)):s=!1,ba(a,c),Mm(a,d,m),Iu(a,d,m,c),Uu(null,a,d,!0,s,c);case 19:return sp(s,a,c);case 22:return Qm(s,a,c)}throw Error(t(156,a.tag))};function Ep(s,a){return af(s,a)}function Tv(s,a,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(s,a,c,d){return new Tv(s,a,c,d)}function nd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Rv(s){if(typeof s=="function")return nd(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ae)return 11;if(s===$e)return 14}return 2}function Ys(s,a){var c=s.alternate;return c===null?(c=Cr(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function Ll(s,a,c,d,m,g){var v=2;if(d=s,typeof s=="function")nd(s)&&(v=1);else if(typeof s=="string")v=5;else e:switch(s){case H:return In(c.children,m,g,a);case z:v=8,m|=8;break;case V:return s=Cr(12,c,a,m|2),s.elementType=V,s.lanes=g,s;case de:return s=Cr(13,c,a,m),s.elementType=de,s.lanes=g,s;case _e:return s=Cr(19,c,a,m),s.elementType=_e,s.lanes=g,s;case Ne:return Ul(c,m,g,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:v=10;break e;case Z:v=9;break e;case ae:v=11;break e;case $e:v=14;break e;case Qe:v=16,d=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Cr(v,c,a,m),a.elementType=s,a.type=d,a.lanes=g,a}function In(s,a,c,d){return s=Cr(7,s,d,a),s.lanes=c,s}function Ul(s,a,c,d){return s=Cr(22,s,d,a),s.elementType=Ne,s.lanes=c,s.stateNode={isHidden:!1},s}function ad(s,a,c){return s=Cr(6,s,null,a),s.lanes=c,s}function id(s,a,c){return a=Cr(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function Pv(s,a,c,d,m){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oc(0),this.expirationTimes=Oc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oc(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function od(s,a,c,d,m,g,v,E,O){return s=new Pv(s,a,c,E,O),a===1?(a=1,g===!0&&(a|=8)):a=0,g=Cr(3,null,null,a),s.current=g,g.stateNode=s,g.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},wu(g),s}function Av(s,a,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:d==null?null:""+d,children:s,containerInfo:a,implementation:c}}function Cp(s){if(!s)return Vs;s=s._reactInternals;e:{if(_n(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(tr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var c=s.type;if(tr(c))return rm(s,c,a)}return a}function Tp(s,a,c,d,m,g,v,E,O){return s=od(c,d,!0,s,m,g,v,E,O),s.context=Cp(null),c=s.current,d=Kt(),m=Qs(c),g=vs(d,m),g.callback=a??null,Ws(c,g,m),s.current.lanes=m,wi(s,m,d),nr(s,d),s}function Fl(s,a,c,d){var m=a.current,g=Kt(),v=Qs(m);return c=Cp(c),a.context===null?a.context=c:a.pendingContext=c,a=vs(g,v),a.payload={element:s},d=d===void 0?null:d,d!==null&&(a.callback=d),s=Ws(m,a,v),s!==null&&(Mr(s,m,v,g),gl(s,m,v)),v}function Ml(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Rp(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function ld(s,a){Rp(s,a),(s=s.alternate)&&Rp(s,a)}function Ov(){return null}var Pp=typeof reportError=="function"?reportError:function(s){console.error(s)};function cd(s){this._internalRoot=s}zl.prototype.render=cd.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));Fl(s,a,null,null)},zl.prototype.unmount=cd.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Pn(function(){Fl(null,s,null,null)}),a[ms]=null}};function zl(s){this._internalRoot=s}zl.prototype.unstable_scheduleHydration=function(s){if(s){var a=mf();s={blockedOn:null,target:s,priority:a};for(var c=0;c<Us.length&&a!==0&&a<Us[c].priority;c++);Us.splice(c,0,s),c===0&&xf(s)}};function ud(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Bl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Ap(){}function Iv(s,a,c,d,m){if(m){if(typeof d=="function"){var g=d;d=function(){var B=Ml(v);g.call(B)}}var v=Tp(a,d,s,0,null,!1,!1,"",Ap);return s._reactRootContainer=v,s[ms]=v.current,Ii(s.nodeType===8?s.parentNode:s),Pn(),v}for(;m=s.lastChild;)s.removeChild(m);if(typeof d=="function"){var E=d;d=function(){var B=Ml(O);E.call(B)}}var O=od(s,0,!1,null,null,!1,!1,"",Ap);return s._reactRootContainer=O,s[ms]=O.current,Ii(s.nodeType===8?s.parentNode:s),Pn(function(){Fl(a,O,c,d)}),O}function Vl(s,a,c,d,m){var g=c._reactRootContainer;if(g){var v=g;if(typeof m=="function"){var E=m;m=function(){var O=Ml(v);E.call(O)}}Fl(a,v,s,m)}else v=Iv(c,a,s,m,d);return Ml(v)}hf=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var c=vi(a.pendingLanes);c!==0&&(Ic(a,c|1),nr(a,wt()),(Ge&6)===0&&(ka=wt()+500,qs()))}break;case 13:Pn(function(){var d=ys(s,1);if(d!==null){var m=Kt();Mr(d,s,1,m)}}),ld(s,1)}},Dc=function(s){if(s.tag===13){var a=ys(s,134217728);if(a!==null){var c=Kt();Mr(a,s,134217728,c)}ld(s,134217728)}},ff=function(s){if(s.tag===13){var a=Qs(s),c=ys(s,a);if(c!==null){var d=Kt();Mr(c,s,a,d)}ld(s,a)}},mf=function(){return rt},pf=function(s,a){var c=rt;try{return rt=s,a()}finally{rt=c}},Ec=function(s,a,c){switch(a){case"input":if(nt(s,c),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==s&&d.form===s.form){var m=il(d);if(!m)throw Error(t(90));fs(d),nt(d,m)}}}break;case"textarea":oe(s,c);break;case"select":a=c.value,a!=null&&k(s,!!c.multiple,a,!1)}},Yh=td,Xh=Pn;var Dv={usingClientEntryPoint:!1,Events:[Li,fa,il,Qh,Zh,td]},Zi={findFiberByHostInstance:jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$v={bundleType:Zi.bundleType,version:Zi.version,rendererPackageName:Zi.rendererPackageName,rendererConfig:Zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=sf(s),s===null?null:s.stateNode},findFiberByHostInstance:Zi.findFiberByHostInstance||Ov,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{zo=ql.inject($v),Yr=ql}catch{}}return ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dv,ar.createPortal=function(s,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ud(a))throw Error(t(200));return Av(s,a,null,c)},ar.createRoot=function(s,a){if(!ud(s))throw Error(t(299));var c=!1,d="",m=Pp;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=od(s,1,!1,null,null,c,!1,d,m),s[ms]=a.current,Ii(s.nodeType===8?s.parentNode:s),new cd(a)},ar.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=sf(a),s=s===null?null:s.stateNode,s},ar.flushSync=function(s){return Pn(s)},ar.hydrate=function(s,a,c){if(!Bl(a))throw Error(t(200));return Vl(null,s,a,!0,c)},ar.hydrateRoot=function(s,a,c){if(!ud(s))throw Error(t(405));var d=c!=null&&c.hydratedSources||null,m=!1,g="",v=Pp;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(v=c.onRecoverableError)),a=Tp(a,null,s,1,c??null,m,!1,g,v),s[ms]=a.current,Ii(s),d)for(s=0;s<d.length;s++)c=d[s],m=c._getVersion,m=m(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,m]:a.mutableSourceEagerHydrationData.push(c,m);return new zl(a)},ar.render=function(s,a,c){if(!Bl(a))throw Error(t(200));return Vl(null,s,a,!1,c)},ar.unmountComponentAtNode=function(s){if(!Bl(s))throw Error(t(40));return s._reactRootContainer?(Pn(function(){Vl(null,null,s,!1,function(){s._reactRootContainer=null,s[ms]=null})}),!0):!1},ar.unstable_batchedUpdates=td,ar.unstable_renderSubtreeIntoContainer=function(s,a,c,d){if(!Bl(c))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Vl(s,a,c,!1,d)},ar.version="18.3.1-next-f1338f8080-20240426",ar}var zp;function Kv(){if(zp)return md.exports;zp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),md.exports=Wv(),md.exports}var Bp;function Gv(){if(Bp)return Wl;Bp=1;var r=Kv();return Wl.createRoot=r.createRoot,Wl.hydrateRoot=r.hydrateRoot,Wl}var Jv=Gv(),li=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qv={setTimeout:(r,e)=>setTimeout(r,e),clearTimeout:r=>clearTimeout(r),setInterval:(r,e)=>setInterval(r,e),clearInterval:r=>clearInterval(r)},on,vh,lx,Zv=(lx=class{constructor(){je(this,on,Qv);je(this,vh,!1)}setTimeoutProvider(r){le(this,on,r)}setTimeout(r,e){return R(this,on).setTimeout(r,e)}clearTimeout(r){R(this,on).clearTimeout(r)}setInterval(r,e){return R(this,on).setInterval(r,e)}clearInterval(r){R(this,on).clearInterval(r)}},on=new WeakMap,vh=new WeakMap,lx),Mn=new Zv;function Yv(r){setTimeout(r,0)}var Yn=typeof window>"u"||"Deno"in globalThis;function Yt(){}function Xv(r,e){return typeof r=="function"?r(e):r}function $d(r){return typeof r=="number"&&r>=0&&r!==1/0}function vx(r,e){return Math.max(r+(e||0)-Date.now(),0)}function xn(r,e){return typeof r=="function"?r(e):r}function Pr(r,e){return typeof r=="function"?r(e):r}function Vp(r,e){const{type:t="all",exact:n,fetchStatus:o,predicate:l,queryKey:u,stale:h}=r;if(u){if(n){if(e.queryHash!==bh(u,e.options))return!1}else if(!go(e.queryKey,u))return!1}if(t!=="all"){const f=e.isActive();if(t==="active"&&!f||t==="inactive"&&f)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||o&&o!==e.state.fetchStatus||l&&!l(e))}function qp(r,e){const{exact:t,status:n,predicate:o,mutationKey:l}=r;if(l){if(!e.options.mutationKey)return!1;if(t){if(Xn(e.options.mutationKey)!==Xn(l))return!1}else if(!go(e.options.mutationKey,l))return!1}return!(n&&e.state.status!==n||o&&!o(e))}function bh(r,e){return((e==null?void 0:e.queryKeyHashFn)||Xn)(r)}function Xn(r){return JSON.stringify(r,(e,t)=>Ld(t)?Object.keys(t).sort().reduce((n,o)=>(n[o]=t[o],n),{}):t)}function go(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>go(r[t],e[t])):!1}var ew=Object.prototype.hasOwnProperty;function wx(r,e,t=0){if(r===e)return r;if(t>500)return e;const n=Hp(r)&&Hp(e);if(!n&&!(Ld(r)&&Ld(e)))return e;const l=(n?r:Object.keys(r)).length,u=n?e:Object.keys(e),h=u.length,f=n?new Array(h):{};let p=0;for(let x=0;x<h;x++){const y=n?x:u[x],b=r[y],w=e[y];if(b===w){f[y]=b,(n?x<l:ew.call(r,y))&&p++;continue}if(b===null||w===null||typeof b!="object"||typeof w!="object"){f[y]=w;continue}const N=wx(b,w,t+1);f[y]=N,N===b&&p++}return l===h&&p===l?r:f}function oc(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function Hp(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Ld(r){if(!Wp(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Wp(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Wp(r){return Object.prototype.toString.call(r)==="[object Object]"}function tw(r){return new Promise(e=>{Mn.setTimeout(e,r)})}function Ud(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?wx(r,e):e}function rw(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function sw(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var _h=Symbol();function bx(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===_h?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function jh(r,e){return typeof r=="function"?r(...e):!!r}function nw(r,e,t){let n=!1,o;return Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(o??(o=e()),n||(n=!0,o.aborted?t():o.addEventListener("abort",t,{once:!0})),o)}),r}var Vn,ln,Wa,cx,aw=(cx=class extends li{constructor(){super();je(this,Vn);je(this,ln);je(this,Wa);le(this,Wa,e=>{if(!Yn&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){R(this,ln)||this.setEventListener(R(this,Wa))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,ln))==null||e.call(this),le(this,ln,void 0))}setEventListener(e){var t;le(this,Wa,e),(t=R(this,ln))==null||t.call(this),le(this,ln,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){R(this,Vn)!==e&&(le(this,Vn,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof R(this,Vn)=="boolean"?R(this,Vn):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Vn=new WeakMap,ln=new WeakMap,Wa=new WeakMap,cx),Nh=new aw;function Fd(){let r,e;const t=new Promise((o,l)=>{r=o,e=l});t.status="pending",t.catch(()=>{});function n(o){Object.assign(t,o),delete t.resolve,delete t.reject}return t.resolve=o=>{n({status:"fulfilled",value:o}),r(o)},t.reject=o=>{n({status:"rejected",reason:o}),e(o)},t}var iw=Yv;function ow(){let r=[],e=0,t=h=>{h()},n=h=>{h()},o=iw;const l=h=>{e?r.push(h):o(()=>{t(h)})},u=()=>{const h=r;r=[],h.length&&o(()=>{n(()=>{h.forEach(f=>{t(f)})})})};return{batch:h=>{let f;e++;try{f=h()}finally{e--,e||u()}return f},batchCalls:h=>(...f)=>{l(()=>{h(...f)})},schedule:l,setNotifyFunction:h=>{t=h},setBatchNotifyFunction:h=>{n=h},setScheduler:h=>{o=h}}}var Pt=ow(),Ka,cn,Ga,ux,lw=(ux=class extends li{constructor(){super();je(this,Ka,!0);je(this,cn);je(this,Ga);le(this,Ga,e=>{if(!Yn&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,cn)||this.setEventListener(R(this,Ga))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,cn))==null||e.call(this),le(this,cn,void 0))}setEventListener(e){var t;le(this,Ga,e),(t=R(this,cn))==null||t.call(this),le(this,cn,e(this.setOnline.bind(this)))}setOnline(e){R(this,Ka)!==e&&(le(this,Ka,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,Ka)}},Ka=new WeakMap,cn=new WeakMap,Ga=new WeakMap,ux),lc=new lw;function cw(r){return Math.min(1e3*2**r,3e4)}function _x(r){return(r??"online")==="online"?lc.isOnline():!0}var Md=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function jx(r){let e=!1,t=0,n;const o=Fd(),l=()=>o.status!=="pending",u=_=>{var j;if(!l()){const P=new Md(_);b(P),(j=r.onCancel)==null||j.call(r,P)}},h=()=>{e=!0},f=()=>{e=!1},p=()=>Nh.isFocused()&&(r.networkMode==="always"||lc.isOnline())&&r.canRun(),x=()=>_x(r.networkMode)&&r.canRun(),y=_=>{l()||(n==null||n(),o.resolve(_))},b=_=>{l()||(n==null||n(),o.reject(_))},w=()=>new Promise(_=>{var j;n=P=>{(l()||p())&&_(P)},(j=r.onPause)==null||j.call(r)}).then(()=>{var _;n=void 0,l()||(_=r.onContinue)==null||_.call(r)}),N=()=>{if(l())return;let _;const j=t===0?r.initialPromise:void 0;try{_=j??r.fn()}catch(P){_=Promise.reject(P)}Promise.resolve(_).then(y).catch(P=>{var K;if(l())return;const T=r.retry??(Yn?0:3),C=r.retryDelay??cw,F=typeof C=="function"?C(t,P):C,A=T===!0||typeof T=="number"&&t<T||typeof T=="function"&&T(t,P);if(e||!A){b(P);return}t++,(K=r.onFail)==null||K.call(r,t,P),tw(F).then(()=>p()?void 0:w()).then(()=>{e?b(P):N()})})};return{promise:o,status:()=>o.status,cancel:u,continue:()=>(n==null||n(),o),cancelRetry:h,continueRetry:f,canStart:x,start:()=>(x()?N():w().then(N),o)}}var qn,dx,Nx=(dx=class{constructor(){je(this,qn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$d(this.gcTime)&&le(this,qn,Mn.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Yn?1/0:300*1e3))}clearGcTimeout(){R(this,qn)&&(Mn.clearTimeout(R(this,qn)),le(this,qn,void 0))}},qn=new WeakMap,dx),Hn,Ja,Rr,Wn,Dt,Eo,Kn,Vr,Ns,hx,uw=(hx=class extends Nx{constructor(e){super();je(this,Vr);je(this,Hn);je(this,Ja);je(this,Rr);je(this,Wn);je(this,Dt);je(this,Eo);je(this,Kn);le(this,Kn,!1),le(this,Eo,e.defaultOptions),this.setOptions(e.options),this.observers=[],le(this,Wn,e.client),le(this,Rr,R(this,Wn).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,le(this,Hn,Gp(this.options)),this.state=e.state??R(this,Hn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,Dt))==null?void 0:e.promise}setOptions(e){if(this.options={...R(this,Eo),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Gp(this.options);t.data!==void 0&&(this.setState(Kp(t.data,t.dataUpdatedAt)),le(this,Hn,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,Rr).remove(this)}setData(e,t){const n=Ud(this.state.data,e,this.options);return Ue(this,Vr,Ns).call(this,{data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){Ue(this,Vr,Ns).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var n,o;const t=(n=R(this,Dt))==null?void 0:n.promise;return(o=R(this,Dt))==null||o.cancel(e),t?t.then(Yt).catch(Yt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,Hn))}isActive(){return this.observers.some(e=>Pr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_h||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>xn(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!vx(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=R(this,Dt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=R(this,Dt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,Rr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(R(this,Dt)&&(R(this,Kn)?R(this,Dt).cancel({revert:!0}):R(this,Dt).cancelRetry()),this.scheduleGc()),R(this,Rr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ue(this,Vr,Ns).call(this,{type:"invalidate"})}async fetch(e,t){var f,p,x,y,b,w,N,_,j,P,T,C;if(this.state.fetchStatus!=="idle"&&((f=R(this,Dt))==null?void 0:f.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(R(this,Dt))return R(this,Dt).continueRetry(),R(this,Dt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const F=this.observers.find(A=>A.options.queryFn);F&&this.setOptions(F.options)}const n=new AbortController,o=F=>{Object.defineProperty(F,"signal",{enumerable:!0,get:()=>(le(this,Kn,!0),n.signal)})},l=()=>{const F=bx(this.options,t),K=(()=>{const H={client:R(this,Wn),queryKey:this.queryKey,meta:this.meta};return o(H),H})();return le(this,Kn,!1),this.options.persister?this.options.persister(F,K,this):F(K)},h=(()=>{const F={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:R(this,Wn),state:this.state,fetchFn:l};return o(F),F})();(p=this.options.behavior)==null||p.onFetch(h,this),le(this,Ja,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=h.fetchOptions)==null?void 0:x.meta))&&Ue(this,Vr,Ns).call(this,{type:"fetch",meta:(y=h.fetchOptions)==null?void 0:y.meta}),le(this,Dt,jx({initialPromise:t==null?void 0:t.initialPromise,fn:h.fetchFn,onCancel:F=>{F instanceof Md&&F.revert&&this.setState({...R(this,Ja),fetchStatus:"idle"}),n.abort()},onFail:(F,A)=>{Ue(this,Vr,Ns).call(this,{type:"failed",failureCount:F,error:A})},onPause:()=>{Ue(this,Vr,Ns).call(this,{type:"pause"})},onContinue:()=>{Ue(this,Vr,Ns).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0}));try{const F=await R(this,Dt).start();if(F===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(F),(w=(b=R(this,Rr).config).onSuccess)==null||w.call(b,F,this),(_=(N=R(this,Rr).config).onSettled)==null||_.call(N,F,this.state.error,this),F}catch(F){if(F instanceof Md){if(F.silent)return R(this,Dt).promise;if(F.revert){if(this.state.data===void 0)throw F;return this.state.data}}throw Ue(this,Vr,Ns).call(this,{type:"error",error:F}),(P=(j=R(this,Rr).config).onError)==null||P.call(j,F,this),(C=(T=R(this,Rr).config).onSettled)==null||C.call(T,this.state.data,F,this),F}finally{this.scheduleGc()}}},Hn=new WeakMap,Ja=new WeakMap,Rr=new WeakMap,Wn=new WeakMap,Dt=new WeakMap,Eo=new WeakMap,Kn=new WeakMap,Vr=new WeakSet,Ns=function(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Sx(n.data,this.options),fetchMeta:e.meta??null};case"success":const o={...n,...Kp(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return le(this,Ja,e.manual?o:void 0),o;case"error":const l=e.error;return{...n,error:l,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Pt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,Rr).notify({query:this,type:"updated",action:e})})},hx);function Sx(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_x(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function Kp(r,e){return{data:r,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Gp(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ir,We,Co,Gt,Gn,Qa,ks,un,To,Za,Ya,Jn,Qn,dn,Xa,tt,oo,zd,Bd,Vd,qd,Hd,Wd,Kd,kx,fx,dw=(fx=class extends li{constructor(e,t){super();je(this,tt);je(this,ir);je(this,We);je(this,Co);je(this,Gt);je(this,Gn);je(this,Qa);je(this,ks);je(this,un);je(this,To);je(this,Za);je(this,Ya);je(this,Jn);je(this,Qn);je(this,dn);je(this,Xa,new Set);this.options=t,le(this,ir,e),le(this,un,null),le(this,ks,Fd()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,We).addObserver(this),Jp(R(this,We),this.options)?Ue(this,tt,oo).call(this):this.updateResult(),Ue(this,tt,qd).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gd(R(this,We),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gd(R(this,We),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ue(this,tt,Hd).call(this),Ue(this,tt,Wd).call(this),R(this,We).removeObserver(this)}setOptions(e){const t=this.options,n=R(this,We);if(this.options=R(this,ir).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Pr(this.options.enabled,R(this,We))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ue(this,tt,Kd).call(this),R(this,We).setOptions(this.options),t._defaulted&&!oc(this.options,t)&&R(this,ir).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,We),observer:this});const o=this.hasListeners();o&&Qp(R(this,We),n,this.options,t)&&Ue(this,tt,oo).call(this),this.updateResult(),o&&(R(this,We)!==n||Pr(this.options.enabled,R(this,We))!==Pr(t.enabled,R(this,We))||xn(this.options.staleTime,R(this,We))!==xn(t.staleTime,R(this,We)))&&Ue(this,tt,zd).call(this);const l=Ue(this,tt,Bd).call(this);o&&(R(this,We)!==n||Pr(this.options.enabled,R(this,We))!==Pr(t.enabled,R(this,We))||l!==R(this,dn))&&Ue(this,tt,Vd).call(this,l)}getOptimisticResult(e){const t=R(this,ir).getQueryCache().build(R(this,ir),e),n=this.createResult(t,e);return fw(this,n)&&(le(this,Gt,n),le(this,Qa,this.options),le(this,Gn,R(this,We).state)),n}getCurrentResult(){return R(this,Gt)}trackResult(e,t){return new Proxy(e,{get:(n,o)=>(this.trackProp(o),t==null||t(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,ks).status==="pending"&&R(this,ks).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,o))})}trackProp(e){R(this,Xa).add(e)}getCurrentQuery(){return R(this,We)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=R(this,ir).defaultQueryOptions(e),n=R(this,ir).getQueryCache().build(R(this,ir),t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return Ue(this,tt,oo).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,Gt)))}createResult(e,t){var V;const n=R(this,We),o=this.options,l=R(this,Gt),u=R(this,Gn),h=R(this,Qa),p=e!==n?e.state:R(this,Co),{state:x}=e;let y={...x},b=!1,w;if(t._optimisticResults){const W=this.hasListeners(),Z=!W&&Jp(e,t),ae=W&&Qp(e,n,t,o);(Z||ae)&&(y={...y,...Sx(x.data,e.options)}),t._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:N,errorUpdatedAt:_,status:j}=y;w=y.data;let P=!1;if(t.placeholderData!==void 0&&w===void 0&&j==="pending"){let W;l!=null&&l.isPlaceholderData&&t.placeholderData===(h==null?void 0:h.placeholderData)?(W=l.data,P=!0):W=typeof t.placeholderData=="function"?t.placeholderData((V=R(this,Ya))==null?void 0:V.state.data,R(this,Ya)):t.placeholderData,W!==void 0&&(j="success",w=Ud(l==null?void 0:l.data,W,t),b=!0)}if(t.select&&w!==void 0&&!P)if(l&&w===(u==null?void 0:u.data)&&t.select===R(this,To))w=R(this,Za);else try{le(this,To,t.select),w=t.select(w),w=Ud(l==null?void 0:l.data,w,t),le(this,Za,w),le(this,un,null)}catch(W){le(this,un,W)}R(this,un)&&(N=R(this,un),w=R(this,Za),_=Date.now(),j="error");const T=y.fetchStatus==="fetching",C=j==="pending",F=j==="error",A=C&&T,K=w!==void 0,z={status:j,fetchStatus:y.fetchStatus,isPending:C,isSuccess:j==="success",isError:F,isInitialLoading:A,isLoading:A,data:w,dataUpdatedAt:y.dataUpdatedAt,error:N,errorUpdatedAt:_,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>p.dataUpdateCount||y.errorUpdateCount>p.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:F&&!K,isPaused:y.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:F&&K,isStale:Sh(e,t),refetch:this.refetch,promise:R(this,ks),isEnabled:Pr(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const W=z.data!==void 0,Z=z.status==="error"&&!W,ae=$e=>{Z?$e.reject(z.error):W&&$e.resolve(z.data)},de=()=>{const $e=le(this,ks,z.promise=Fd());ae($e)},_e=R(this,ks);switch(_e.status){case"pending":e.queryHash===n.queryHash&&ae(_e);break;case"fulfilled":(Z||z.data!==_e.value)&&de();break;case"rejected":(!Z||z.error!==_e.reason)&&de();break}}return z}updateResult(){const e=R(this,Gt),t=this.createResult(R(this,We),this.options);if(le(this,Gn,R(this,We).state),le(this,Qa,this.options),R(this,Gn).data!==void 0&&le(this,Ya,R(this,We)),oc(t,e))return;le(this,Gt,t);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!R(this,Xa).size)return!0;const u=new Set(l??R(this,Xa));return this.options.throwOnError&&u.add("error"),Object.keys(R(this,Gt)).some(h=>{const f=h;return R(this,Gt)[f]!==e[f]&&u.has(f)})};Ue(this,tt,kx).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ue(this,tt,qd).call(this)}},ir=new WeakMap,We=new WeakMap,Co=new WeakMap,Gt=new WeakMap,Gn=new WeakMap,Qa=new WeakMap,ks=new WeakMap,un=new WeakMap,To=new WeakMap,Za=new WeakMap,Ya=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,dn=new WeakMap,Xa=new WeakMap,tt=new WeakSet,oo=function(e){Ue(this,tt,Kd).call(this);let t=R(this,We).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Yt)),t},zd=function(){Ue(this,tt,Hd).call(this);const e=xn(this.options.staleTime,R(this,We));if(Yn||R(this,Gt).isStale||!$d(e))return;const n=vx(R(this,Gt).dataUpdatedAt,e)+1;le(this,Jn,Mn.setTimeout(()=>{R(this,Gt).isStale||this.updateResult()},n))},Bd=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,We)):this.options.refetchInterval)??!1},Vd=function(e){Ue(this,tt,Wd).call(this),le(this,dn,e),!(Yn||Pr(this.options.enabled,R(this,We))===!1||!$d(R(this,dn))||R(this,dn)===0)&&le(this,Qn,Mn.setInterval(()=>{(this.options.refetchIntervalInBackground||Nh.isFocused())&&Ue(this,tt,oo).call(this)},R(this,dn)))},qd=function(){Ue(this,tt,zd).call(this),Ue(this,tt,Vd).call(this,Ue(this,tt,Bd).call(this))},Hd=function(){R(this,Jn)&&(Mn.clearTimeout(R(this,Jn)),le(this,Jn,void 0))},Wd=function(){R(this,Qn)&&(Mn.clearInterval(R(this,Qn)),le(this,Qn,void 0))},Kd=function(){const e=R(this,ir).getQueryCache().build(R(this,ir),this.options);if(e===R(this,We))return;const t=R(this,We);le(this,We,e),le(this,Co,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},kx=function(e){Pt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(R(this,Gt))}),R(this,ir).getQueryCache().notify({query:R(this,We),type:"observerResultsUpdated"})})},fx);function hw(r,e){return Pr(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function Jp(r,e){return hw(r,e)||r.state.data!==void 0&&Gd(r,e,e.refetchOnMount)}function Gd(r,e,t){if(Pr(e.enabled,r)!==!1&&xn(e.staleTime,r)!=="static"){const n=typeof t=="function"?t(r):t;return n==="always"||n!==!1&&Sh(r,e)}return!1}function Qp(r,e,t,n){return(r!==e||Pr(n.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&Sh(r,t)}function Sh(r,e){return Pr(e.enabled,r)!==!1&&r.isStaleByTime(xn(e.staleTime,r))}function fw(r,e){return!oc(r.getCurrentResult(),e)}function Zp(r){return{onFetch:(e,t)=>{var x,y,b,w,N;const n=e.options,o=(b=(y=(x=e.fetchOptions)==null?void 0:x.meta)==null?void 0:y.fetchMore)==null?void 0:b.direction,l=((w=e.state.data)==null?void 0:w.pages)||[],u=((N=e.state.data)==null?void 0:N.pageParams)||[];let h={pages:[],pageParams:[]},f=0;const p=async()=>{let _=!1;const j=C=>{nw(C,()=>e.signal,()=>_=!0)},P=bx(e.options,e.fetchOptions),T=async(C,F,A)=>{if(_)return Promise.reject();if(F==null&&C.pages.length)return Promise.resolve(C);const H=(()=>{const Z={client:e.client,queryKey:e.queryKey,pageParam:F,direction:A?"backward":"forward",meta:e.options.meta};return j(Z),Z})(),z=await P(H),{maxPages:V}=e.options,W=A?sw:rw;return{pages:W(C.pages,z,V),pageParams:W(C.pageParams,F,V)}};if(o&&l.length){const C=o==="backward",F=C?mw:Yp,A={pages:l,pageParams:u},K=F(n,A);h=await T(A,K,C)}else{const C=r??l.length;do{const F=f===0?u[0]??n.initialPageParam:Yp(n,h);if(f>0&&F==null)break;h=await T(h,F),f++}while(f<C)}return h};e.options.persister?e.fetchFn=()=>{var _,j;return(j=(_=e.options).persister)==null?void 0:j.call(_,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=p}}}function Yp(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function mw(r,{pages:e,pageParams:t}){var n;return e.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,e[0],e,t[0],t):void 0}var Ro,os,Jt,Zn,ls,en,mx,pw=(mx=class extends Nx{constructor(e){super();je(this,ls);je(this,Ro);je(this,os);je(this,Jt);je(this,Zn);le(this,Ro,e.client),this.mutationId=e.mutationId,le(this,Jt,e.mutationCache),le(this,os,[]),this.state=e.state||Ex(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,os).includes(e)||(R(this,os).push(e),this.clearGcTimeout(),R(this,Jt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){le(this,os,R(this,os).filter(t=>t!==e)),this.scheduleGc(),R(this,Jt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,os).length||(this.state.status==="pending"?this.scheduleGc():R(this,Jt).remove(this))}continue(){var e;return((e=R(this,Zn))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var u,h,f,p,x,y,b,w,N,_,j,P,T,C,F,A,K,H,z,V;const t=()=>{Ue(this,ls,en).call(this,{type:"continue"})},n={client:R(this,Ro),meta:this.options.meta,mutationKey:this.options.mutationKey};le(this,Zn,jx({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(W,Z)=>{Ue(this,ls,en).call(this,{type:"failed",failureCount:W,error:Z})},onPause:()=>{Ue(this,ls,en).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Jt).canRun(this)}));const o=this.state.status==="pending",l=!R(this,Zn).canStart();try{if(o)t();else{Ue(this,ls,en).call(this,{type:"pending",variables:e,isPaused:l}),await((h=(u=R(this,Jt).config).onMutate)==null?void 0:h.call(u,e,this,n));const Z=await((p=(f=this.options).onMutate)==null?void 0:p.call(f,e,n));Z!==this.state.context&&Ue(this,ls,en).call(this,{type:"pending",context:Z,variables:e,isPaused:l})}const W=await R(this,Zn).start();return await((y=(x=R(this,Jt).config).onSuccess)==null?void 0:y.call(x,W,e,this.state.context,this,n)),await((w=(b=this.options).onSuccess)==null?void 0:w.call(b,W,e,this.state.context,n)),await((_=(N=R(this,Jt).config).onSettled)==null?void 0:_.call(N,W,null,this.state.variables,this.state.context,this,n)),await((P=(j=this.options).onSettled)==null?void 0:P.call(j,W,null,e,this.state.context,n)),Ue(this,ls,en).call(this,{type:"success",data:W}),W}catch(W){try{await((C=(T=R(this,Jt).config).onError)==null?void 0:C.call(T,W,e,this.state.context,this,n))}catch(Z){Promise.reject(Z)}try{await((A=(F=this.options).onError)==null?void 0:A.call(F,W,e,this.state.context,n))}catch(Z){Promise.reject(Z)}try{await((H=(K=R(this,Jt).config).onSettled)==null?void 0:H.call(K,void 0,W,this.state.variables,this.state.context,this,n))}catch(Z){Promise.reject(Z)}try{await((V=(z=this.options).onSettled)==null?void 0:V.call(z,void 0,W,e,this.state.context,n))}catch(Z){Promise.reject(Z)}throw Ue(this,ls,en).call(this,{type:"error",error:W}),W}finally{R(this,Jt).runNext(this)}}},Ro=new WeakMap,os=new WeakMap,Jt=new WeakMap,Zn=new WeakMap,ls=new WeakSet,en=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Pt.batch(()=>{R(this,os).forEach(n=>{n.onMutationUpdate(e)}),R(this,Jt).notify({mutation:this,type:"updated",action:e})})},mx);function Ex(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Es,qr,Po,px,gw=(px=class extends li{constructor(e={}){super();je(this,Es);je(this,qr);je(this,Po);this.config=e,le(this,Es,new Set),le(this,qr,new Map),le(this,Po,0)}build(e,t,n){const o=new pw({client:e,mutationCache:this,mutationId:++Hl(this,Po)._,options:e.defaultMutationOptions(t),state:n});return this.add(o),o}add(e){R(this,Es).add(e);const t=Kl(e);if(typeof t=="string"){const n=R(this,qr).get(t);n?n.push(e):R(this,qr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,Es).delete(e)){const t=Kl(e);if(typeof t=="string"){const n=R(this,qr).get(t);if(n)if(n.length>1){const o=n.indexOf(e);o!==-1&&n.splice(o,1)}else n[0]===e&&R(this,qr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Kl(e);if(typeof t=="string"){const n=R(this,qr).get(t),o=n==null?void 0:n.find(l=>l.state.status==="pending");return!o||o===e}else return!0}runNext(e){var n;const t=Kl(e);if(typeof t=="string"){const o=(n=R(this,qr).get(t))==null?void 0:n.find(l=>l!==e&&l.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Pt.batch(()=>{R(this,Es).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,Es).clear(),R(this,qr).clear()})}getAll(){return Array.from(R(this,Es))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>qp(t,n))}findAll(e={}){return this.getAll().filter(t=>qp(e,t))}notify(e){Pt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Pt.batch(()=>Promise.all(e.map(t=>t.continue().catch(Yt))))}},Es=new WeakMap,qr=new WeakMap,Po=new WeakMap,px);function Kl(r){var e;return(e=r.options.scope)==null?void 0:e.id}var Cs,hn,or,Ts,Ps,sc,Jd,gx,xw=(gx=class extends li{constructor(t,n){super();je(this,Ps);je(this,Cs);je(this,hn);je(this,or);je(this,Ts);le(this,Cs,t),this.setOptions(n),this.bindMethods(),Ue(this,Ps,sc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var o;const n=this.options;this.options=R(this,Cs).defaultMutationOptions(t),oc(this.options,n)||R(this,Cs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,or),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Xn(n.mutationKey)!==Xn(this.options.mutationKey)?this.reset():((o=R(this,or))==null?void 0:o.state.status)==="pending"&&R(this,or).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=R(this,or))==null||t.removeObserver(this)}onMutationUpdate(t){Ue(this,Ps,sc).call(this),Ue(this,Ps,Jd).call(this,t)}getCurrentResult(){return R(this,hn)}reset(){var t;(t=R(this,or))==null||t.removeObserver(this),le(this,or,void 0),Ue(this,Ps,sc).call(this),Ue(this,Ps,Jd).call(this)}mutate(t,n){var o;return le(this,Ts,n),(o=R(this,or))==null||o.removeObserver(this),le(this,or,R(this,Cs).getMutationCache().build(R(this,Cs),this.options)),R(this,or).addObserver(this),R(this,or).execute(t)}},Cs=new WeakMap,hn=new WeakMap,or=new WeakMap,Ts=new WeakMap,Ps=new WeakSet,sc=function(){var n;const t=((n=R(this,or))==null?void 0:n.state)??Ex();le(this,hn,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Jd=function(t){Pt.batch(()=>{var n,o,l,u,h,f,p,x;if(R(this,Ts)&&this.hasListeners()){const y=R(this,hn).variables,b=R(this,hn).context,w={client:R(this,Cs),meta:this.options.meta,mutationKey:this.options.mutationKey};if((t==null?void 0:t.type)==="success"){try{(o=(n=R(this,Ts)).onSuccess)==null||o.call(n,t.data,y,b,w)}catch(N){Promise.reject(N)}try{(u=(l=R(this,Ts)).onSettled)==null||u.call(l,t.data,null,y,b,w)}catch(N){Promise.reject(N)}}else if((t==null?void 0:t.type)==="error"){try{(f=(h=R(this,Ts)).onError)==null||f.call(h,t.error,y,b,w)}catch(N){Promise.reject(N)}try{(x=(p=R(this,Ts)).onSettled)==null||x.call(p,void 0,t.error,y,b,w)}catch(N){Promise.reject(N)}}}this.listeners.forEach(y=>{y(R(this,hn))})})},gx),cs,xx,yw=(xx=class extends li{constructor(e={}){super();je(this,cs);this.config=e,le(this,cs,new Map)}build(e,t,n){const o=t.queryKey,l=t.queryHash??bh(o,t);let u=this.get(l);return u||(u=new uw({client:e,queryKey:o,queryHash:l,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(o)}),this.add(u)),u}add(e){R(this,cs).has(e.queryHash)||(R(this,cs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=R(this,cs).get(e.queryHash);t&&(e.destroy(),t===e&&R(this,cs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Pt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,cs).get(e)}getAll(){return[...R(this,cs).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Vp(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>Vp(e,n)):t}notify(e){Pt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Pt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Pt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},cs=new WeakMap,xx),xt,fn,mn,ei,ti,pn,ri,si,yx,vw=(yx=class{constructor(r={}){je(this,xt);je(this,fn);je(this,mn);je(this,ei);je(this,ti);je(this,pn);je(this,ri);je(this,si);le(this,xt,r.queryCache||new yw),le(this,fn,r.mutationCache||new gw),le(this,mn,r.defaultOptions||{}),le(this,ei,new Map),le(this,ti,new Map),le(this,pn,0)}mount(){Hl(this,pn)._++,R(this,pn)===1&&(le(this,ri,Nh.subscribe(async r=>{r&&(await this.resumePausedMutations(),R(this,xt).onFocus())})),le(this,si,lc.subscribe(async r=>{r&&(await this.resumePausedMutations(),R(this,xt).onOnline())})))}unmount(){var r,e;Hl(this,pn)._--,R(this,pn)===0&&((r=R(this,ri))==null||r.call(this),le(this,ri,void 0),(e=R(this,si))==null||e.call(this),le(this,si,void 0))}isFetching(r){return R(this,xt).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return R(this,fn).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=R(this,xt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=R(this,xt).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(xn(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(r){return R(this,xt).findAll(r).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(r,e,t){const n=this.defaultQueryOptions({queryKey:r}),o=R(this,xt).get(n.queryHash),l=o==null?void 0:o.state.data,u=Xv(e,l);if(u!==void 0)return R(this,xt).build(this,n).setData(u,{...t,manual:!0})}setQueriesData(r,e,t){return Pt.batch(()=>R(this,xt).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=R(this,xt).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=R(this,xt);Pt.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=R(this,xt);return Pt.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},n=Pt.batch(()=>R(this,xt).findAll(r).map(o=>o.cancel(t)));return Promise.all(n).then(Yt).catch(Yt)}invalidateQueries(r,e={}){return Pt.batch(()=>(R(this,xt).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=Pt.batch(()=>R(this,xt).findAll(r).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,t);return t.throwOnError||(l=l.catch(Yt)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(n).then(Yt)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=R(this,xt).build(this,e);return t.isStaleByTime(xn(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(Yt).catch(Yt)}fetchInfiniteQuery(r){return r.behavior=Zp(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(Yt).catch(Yt)}ensureInfiniteQueryData(r){return r.behavior=Zp(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return lc.isOnline()?R(this,fn).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,xt)}getMutationCache(){return R(this,fn)}getDefaultOptions(){return R(this,mn)}setDefaultOptions(r){le(this,mn,r)}setQueryDefaults(r,e){R(this,ei).set(Xn(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...R(this,ei).values()],t={};return e.forEach(n=>{go(r,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(r,e){R(this,ti).set(Xn(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...R(this,ti).values()],t={};return e.forEach(n=>{go(r,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...R(this,mn).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=bh(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===_h&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...R(this,mn).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){R(this,xt).clear(),R(this,fn).clear()}},xt=new WeakMap,fn=new WeakMap,mn=new WeakMap,ei=new WeakMap,ti=new WeakMap,pn=new WeakMap,ri=new WeakMap,si=new WeakMap,yx),Cx=S.createContext(void 0),wc=r=>{const e=S.useContext(Cx);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ww=({client:r,children:e})=>(S.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),i.jsx(Cx.Provider,{value:r,children:e})),Tx=S.createContext(!1),bw=()=>S.useContext(Tx);Tx.Provider;function _w(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var jw=S.createContext(_w()),Nw=()=>S.useContext(jw),Sw=(r,e,t)=>{const n=t!=null&&t.state.error&&typeof r.throwOnError=="function"?jh(r.throwOnError,[t.state.error,t]):r.throwOnError;(r.suspense||r.experimental_prefetchInRender||n)&&(e.isReset()||(r.retryOnMount=!1))},kw=r=>{S.useEffect(()=>{r.clearReset()},[r])},Ew=({result:r,errorResetBoundary:e,throwOnError:t,query:n,suspense:o})=>r.isError&&!e.isReset()&&!r.isFetching&&n&&(o&&r.data===void 0||jh(t,[r.error,n])),Cw=r=>{if(r.suspense){const t=o=>o==="static"?o:Math.max(o??1e3,1e3),n=r.staleTime;r.staleTime=typeof n=="function"?(...o)=>t(n(...o)):t(n),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},Tw=(r,e)=>r.isLoading&&r.isFetching&&!e,Rw=(r,e)=>(r==null?void 0:r.suspense)&&e.isPending,Xp=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function Pw(r,e,t){var b,w,N,_;const n=bw(),o=Nw(),l=wc(),u=l.defaultQueryOptions(r);(w=(b=l.getDefaultOptions().queries)==null?void 0:b._experimental_beforeQuery)==null||w.call(b,u);const h=l.getQueryCache().get(u.queryHash);u._optimisticResults=n?"isRestoring":"optimistic",Cw(u),Sw(u,o,h),kw(o);const f=!l.getQueryCache().get(u.queryHash),[p]=S.useState(()=>new e(l,u)),x=p.getOptimisticResult(u),y=!n&&r.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(j=>{const P=y?p.subscribe(Pt.batchCalls(j)):Yt;return p.updateResult(),P},[p,y]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),S.useEffect(()=>{p.setOptions(u)},[u,p]),Rw(u,x))throw Xp(u,p,o);if(Ew({result:x,errorResetBoundary:o,throwOnError:u.throwOnError,query:h,suspense:u.suspense}))throw x.error;if((_=(N=l.getDefaultOptions().queries)==null?void 0:N._experimental_afterQuery)==null||_.call(N,u,x),u.experimental_prefetchInRender&&!Yn&&Tw(x,n)){const j=f?Xp(u,p,o):h==null?void 0:h.promise;j==null||j.catch(Yt).finally(()=>{p.updateResult()})}return u.notifyOnChangeProps?x:p.trackResult(x)}function bn(r,e){return Pw(r,dw)}function Rx(r,e){const t=wc(),[n]=S.useState(()=>new xw(t,r));S.useEffect(()=>{n.setOptions(r)},[n,r]);const o=S.useSyncExternalStore(S.useCallback(u=>n.subscribe(Pt.batchCalls(u)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),l=S.useCallback((u,h)=>{n.mutate(u,h).catch(Yt)},[n]);if(o.error&&jh(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var eg="popstate";function Aw(r={}){function e(n,o){let{pathname:l,search:u,hash:h}=n.location;return Qd("",{pathname:l,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(n,o){return typeof o=="string"?o:xo(o)}return Iw(e,t,null,r)}function ut(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function vr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ow(){return Math.random().toString(36).substring(2,10)}function tg(r,e){return{usr:r.state,key:r.key,idx:e}}function Qd(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ci(e):e,state:t,key:e&&e.key||n||Ow()}}function xo({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function ci(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function Iw(r,e,t,n={}){let{window:o=document.defaultView,v5Compat:l=!1}=n,u=o.history,h="POP",f=null,p=x();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function x(){return(u.state||{idx:null}).idx}function y(){h="POP";let j=x(),P=j==null?null:j-p;p=j,f&&f({action:h,location:_.location,delta:P})}function b(j,P){h="PUSH";let T=Qd(_.location,j,P);p=x()+1;let C=tg(T,p),F=_.createHref(T);try{u.pushState(C,"",F)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;o.location.assign(F)}l&&f&&f({action:h,location:_.location,delta:1})}function w(j,P){h="REPLACE";let T=Qd(_.location,j,P);p=x();let C=tg(T,p),F=_.createHref(T);u.replaceState(C,"",F),l&&f&&f({action:h,location:_.location,delta:0})}function N(j){return Dw(j)}let _={get action(){return h},get location(){return r(o,u)},listen(j){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(eg,y),f=j,()=>{o.removeEventListener(eg,y),f=null}},createHref(j){return e(o,j)},createURL:N,encodeLocation(j){let P=N(j);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:b,replace:w,go(j){return u.go(j)}};return _}function Dw(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ut(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:xo(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function Px(r,e,t="/"){return $w(r,e,t,!1)}function $w(r,e,t,n){let o=typeof e=="string"?ci(e):e,l=As(o.pathname||"/",t);if(l==null)return null;let u=Ax(r);Lw(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=Gw(l);h=Ww(u[f],p,n)}return h}function Ax(r,e=[],t=[],n="",o=!1){let l=(u,h,f=o,p)=>{let x={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(n)&&f)return;ut(x.relativePath.startsWith(n),`Absolute route path "${x.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(n.length)}let y=Rs([n,x.relativePath]),b=t.concat(x);u.children&&u.children.length>0&&(ut(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Ax(u.children,e,b,y,f)),!(u.path==null&&!u.index)&&e.push({path:y,score:qw(y,u.index),routesMeta:b})};return r.forEach((u,h)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))l(u,h);else for(let p of Ox(u.path))l(u,h,!0,p)}),e}function Ox(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(n.length===0)return o?[l,""]:[l];let u=Ox(n.join("/")),h=[];return h.push(...u.map(f=>f===""?l:[l,f].join("/"))),o&&h.push(...u),h.map(f=>r.startsWith("/")&&f===""?"/":f)}function Lw(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Hw(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var Uw=/^:[\w-]+$/,Fw=3,Mw=2,zw=1,Bw=10,Vw=-2,rg=r=>r==="*";function qw(r,e){let t=r.split("/"),n=t.length;return t.some(rg)&&(n+=Vw),e&&(n+=Mw),t.filter(o=>!rg(o)).reduce((o,l)=>o+(Uw.test(l)?Fw:l===""?zw:Bw),n)}function Hw(r,e){return r.length===e.length&&r.slice(0,-1).every((n,o)=>n===e[o])?r[r.length-1]-e[e.length-1]:0}function Ww(r,e,t=!1){let{routesMeta:n}=r,o={},l="/",u=[];for(let h=0;h<n.length;++h){let f=n[h],p=h===n.length-1,x=l==="/"?e:e.slice(l.length)||"/",y=cc({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},x),b=f.route;if(!y&&p&&t&&!n[n.length-1].route.index&&(y=cc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},x)),!y)return null;Object.assign(o,y.params),u.push({params:o,pathname:Rs([l,y.pathname]),pathnameBase:Yw(Rs([l,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(l=Rs([l,y.pathnameBase]))}return u}function cc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=Kw(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],u=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:n.reduce((p,{paramName:x,isOptional:y},b)=>{if(x==="*"){let N=h[b]||"";u=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const w=h[b];return y&&!w?p[x]=void 0:p[x]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:r}}function Kw(r,e=!1,t=!0){vr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(n.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),n]}function Gw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function As(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var Ix=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jw=r=>Ix.test(r);function Qw(r,e="/"){let{pathname:t,search:n="",hash:o=""}=typeof r=="string"?ci(r):r,l;if(t)if(Jw(t))l=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),vr(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?l=sg(t.substring(1),"/"):l=sg(t,e)}else l=e;return{pathname:l,search:Xw(n),hash:eb(o)}}function sg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function xd(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Zw(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function kh(r){let e=Zw(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Eh(r,e,t,n=!1){let o;typeof r=="string"?o=ci(r):(o={...r},ut(!o.pathname||!o.pathname.includes("?"),xd("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),xd("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),xd("#","search","hash",o)));let l=r===""||o.pathname==="",u=l?"/":o.pathname,h;if(u==null)h=t;else{let y=e.length-1;if(!n&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),y-=1;o.pathname=b.join("/")}h=y>=0?e[y]:"/"}let f=Qw(o,h),p=u&&u!=="/"&&u.endsWith("/"),x=(l||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||x)&&(f.pathname+="/"),f}var Rs=r=>r.join("/").replace(/\/\/+/g,"/"),Yw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Xw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,eb=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,tb=class{constructor(r,e,t,n=!1){this.status=r,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function rb(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function sb(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Dx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $x(r,e){let t=r;if(typeof t!="string"||!Ix.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,o=!1;if(Dx)try{let l=new URL(window.location.href),u=t.startsWith("//")?new URL(l.protocol+t):new URL(t),h=As(u.pathname,e);u.origin===l.origin&&h!=null?t=h+u.search+u.hash:o=!0}catch{vr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Lx=["POST","PUT","PATCH","DELETE"];new Set(Lx);var nb=["GET",...Lx];new Set(nb);var ui=S.createContext(null);ui.displayName="DataRouter";var bc=S.createContext(null);bc.displayName="DataRouterState";var ab=S.createContext(!1),Ux=S.createContext({isTransitioning:!1});Ux.displayName="ViewTransition";var ib=S.createContext(new Map);ib.displayName="Fetchers";var ob=S.createContext(null);ob.displayName="Await";var br=S.createContext(null);br.displayName="Navigation";var Ao=S.createContext(null);Ao.displayName="Location";var hs=S.createContext({outlet:null,matches:[],isDataRoute:!1});hs.displayName="Route";var Ch=S.createContext(null);Ch.displayName="RouteError";var Fx="REACT_ROUTER_ERROR",lb="REDIRECT",cb="ROUTE_ERROR_RESPONSE";function ub(r){if(r.startsWith(`${Fx}:${lb}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function db(r){if(r.startsWith(`${Fx}:${cb}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new tb(e.status,e.statusText,e.data)}catch{}}function hb(r,{relative:e}={}){ut(di(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=S.useContext(br),{hash:o,pathname:l,search:u}=Oo(r,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:Rs([t,l])),n.createHref({pathname:h,search:u,hash:o})}function di(){return S.useContext(Ao)!=null}function Gr(){return ut(di(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Ao).location}var Mx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zx(r){S.useContext(br).static||S.useLayoutEffect(r)}function hi(){let{isDataRoute:r}=S.useContext(hs);return r?Sb():fb()}function fb(){ut(di(),"useNavigate() may be used only in the context of a <Router> component.");let r=S.useContext(ui),{basename:e,navigator:t}=S.useContext(br),{matches:n}=S.useContext(hs),{pathname:o}=Gr(),l=JSON.stringify(kh(n)),u=S.useRef(!1);return zx(()=>{u.current=!0}),S.useCallback((f,p={})=>{if(vr(u.current,Mx),!u.current)return;if(typeof f=="number"){t.go(f);return}let x=Eh(f,JSON.parse(l),o,p.relative==="path");r==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Rs([e,x.pathname])),(p.replace?t.replace:t.push)(x,p.state,p)},[e,t,l,o,r])}S.createContext(null);function Oo(r,{relative:e}={}){let{matches:t}=S.useContext(hs),{pathname:n}=Gr(),o=JSON.stringify(kh(t));return S.useMemo(()=>Eh(r,JSON.parse(o),n,e==="path"),[r,o,n,e])}function mb(r,e){return Bx(r,e)}function Bx(r,e,t,n,o){var T;ut(di(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=S.useContext(br),{matches:u}=S.useContext(hs),h=u[u.length-1],f=h?h.params:{},p=h?h.pathname:"/",x=h?h.pathnameBase:"/",y=h&&h.route;{let C=y&&y.path||"";qx(p,!y||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let b=Gr(),w;if(e){let C=typeof e=="string"?ci(e):e;ut(x==="/"||((T=C.pathname)==null?void 0:T.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${C.pathname}" was given in the \`location\` prop.`),w=C}else w=b;let N=w.pathname||"/",_=N;if(x!=="/"){let C=x.replace(/^\//,"").split("/");_="/"+N.replace(/^\//,"").split("/").slice(C.length).join("/")}let j=Px(r,{pathname:_});vr(y||j!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),vr(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=vb(j&&j.map(C=>Object.assign({},C,{params:Object.assign({},f,C.params),pathname:Rs([x,l.encodeLocation?l.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?x:Rs([x,l.encodeLocation?l.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),u,t,n,o);return e&&P?S.createElement(Ao.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},P):P}function pb(){let r=Nb(),e=rb(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",r),u=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:l},"ErrorBoundary")," or"," ",S.createElement("code",{style:l},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),t?S.createElement("pre",{style:o},t):null,u)}var gb=S.createElement(pb,null),Vx=class extends S.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=db(r.digest);t&&(r=t)}let e=r!==void 0?S.createElement(hs.Provider,{value:this.props.routeContext},S.createElement(Ch.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?S.createElement(xb,{error:r},e):e}};Vx.contextType=ab;var yd=new WeakMap;function xb({children:r,error:e}){let{basename:t}=S.useContext(br);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=ub(e.digest);if(n){let o=yd.get(e);if(o)throw o;let l=$x(n.location,t);if(Dx&&!yd.get(e))if(l.isExternal||n.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:n.replace}));throw yd.set(e,u),u}return S.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function yb({routeContext:r,match:e,children:t}){let n=S.useContext(ui);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(hs.Provider,{value:r},t)}function vb(r,e=[],t=null,n=null,o=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,u=t==null?void 0:t.errors;if(u!=null){let x=l.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);ut(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,x+1))}let h=!1,f=-1;if(t)for(let x=0;x<l.length;x++){let y=l[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=x),y.route.id){let{loaderData:b,errors:w}=t,N=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||N){h=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}let p=t&&n?(x,y)=>{var b,w;n(x,{location:t.location,params:((w=(b=t.matches)==null?void 0:b[0])==null?void 0:w.params)??{},unstable_pattern:sb(t.matches),errorInfo:y})}:void 0;return l.reduceRight((x,y,b)=>{let w,N=!1,_=null,j=null;t&&(w=u&&y.route.id?u[y.route.id]:void 0,_=y.route.errorElement||gb,h&&(f<0&&b===0?(qx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,j=null):f===b&&(N=!0,j=y.route.hydrateFallbackElement||null)));let P=e.concat(l.slice(0,b+1)),T=()=>{let C;return w?C=_:N?C=j:y.route.Component?C=S.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=x,S.createElement(yb,{match:y,routeContext:{outlet:x,matches:P,isDataRoute:t!=null},children:C})};return t&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?S.createElement(Vx,{location:t.location,revalidation:t.revalidation,component:_,error:w,children:T(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:p}):T()},null)}function Th(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wb(r){let e=S.useContext(ui);return ut(e,Th(r)),e}function bb(r){let e=S.useContext(bc);return ut(e,Th(r)),e}function _b(r){let e=S.useContext(hs);return ut(e,Th(r)),e}function Rh(r){let e=_b(r),t=e.matches[e.matches.length-1];return ut(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function jb(){return Rh("useRouteId")}function Nb(){var n;let r=S.useContext(Ch),e=bb("useRouteError"),t=Rh("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function Sb(){let{router:r}=wb("useNavigate"),e=Rh("useNavigate"),t=S.useRef(!1);return zx(()=>{t.current=!0}),S.useCallback(async(o,l={})=>{vr(t.current,Mx),t.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var ng={};function qx(r,e,t){!e&&!ng[r]&&(ng[r]=!0,vr(!1,t))}S.memo(kb);function kb({routes:r,future:e,state:t,onError:n}){return Bx(r,void 0,t,n,e)}function Hx({to:r,replace:e,state:t,relative:n}){ut(di(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=S.useContext(br);vr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=S.useContext(hs),{pathname:u}=Gr(),h=hi(),f=Eh(r,kh(l),u,n==="path"),p=JSON.stringify(f);return S.useEffect(()=>{h(JSON.parse(p),{replace:e,state:t,relative:n})},[h,p,n,e,t]),null}function Ht(r){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Eb({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:o,static:l=!1,unstable_useTransitions:u}){ut(!di(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),f=S.useMemo(()=>({basename:h,navigator:o,static:l,unstable_useTransitions:u,future:{}}),[h,o,l,u]);typeof t=="string"&&(t=ci(t));let{pathname:p="/",search:x="",hash:y="",state:b=null,key:w="default"}=t,N=S.useMemo(()=>{let _=As(p,h);return _==null?null:{location:{pathname:_,search:x,hash:y,state:b,key:w},navigationType:n}},[h,p,x,y,b,w,n]);return vr(N!=null,`<Router basename="${h}"> is not able to match the URL "${p}${x}${y}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:S.createElement(br.Provider,{value:f},S.createElement(Ao.Provider,{children:e,value:N}))}function Cb({children:r,location:e}){return mb(Zd(r),e)}function Zd(r,e=[]){let t=[];return S.Children.forEach(r,(n,o)=>{if(!S.isValidElement(n))return;let l=[...e,o];if(n.type===S.Fragment){t.push.apply(t,Zd(n.props.children,l));return}ut(n.type===Ht,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=Zd(n.props.children,l)),t.push(u)}),t}var nc="get",ac="application/x-www-form-urlencoded";function _c(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function Tb(r){return _c(r)&&r.tagName.toLowerCase()==="button"}function Rb(r){return _c(r)&&r.tagName.toLowerCase()==="form"}function Pb(r){return _c(r)&&r.tagName.toLowerCase()==="input"}function Ab(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Ob(r,e){return r.button===0&&(!e||e==="_self")&&!Ab(r)}function Yd(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let n=r[t];return e.concat(Array.isArray(n)?n.map(o=>[t,o]):[[t,n]])},[]))}function Ib(r,e){let t=Yd(r);return e&&e.forEach((n,o)=>{t.has(o)||e.getAll(o).forEach(l=>{t.append(o,l)})}),t}var Gl=null;function Db(){if(Gl===null)try{new FormData(document.createElement("form"),0),Gl=!1}catch{Gl=!0}return Gl}var $b=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vd(r){return r!=null&&!$b.has(r)?(vr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ac}"`),null):r}function Lb(r,e){let t,n,o,l,u;if(Rb(r)){let h=r.getAttribute("action");n=h?As(h,e):null,t=r.getAttribute("method")||nc,o=vd(r.getAttribute("enctype"))||ac,l=new FormData(r)}else if(Tb(r)||Pb(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=r.getAttribute("formaction")||h.getAttribute("action");if(n=f?As(f,e):null,t=r.getAttribute("formmethod")||h.getAttribute("method")||nc,o=vd(r.getAttribute("formenctype"))||vd(h.getAttribute("enctype"))||ac,l=new FormData(h,r),!Db()){let{name:p,type:x,value:y}=r;if(x==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,y)}}else{if(_c(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=nc,n=null,o=ac,u=r}return l&&o==="text/plain"&&(u=l,l=void 0),{action:n,method:t.toLowerCase(),encType:o,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ph(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ub(r,e,t,n){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${n}`:o.pathname=`${o.pathname}.${n}`:o.pathname==="/"?o.pathname=`_root.${n}`:e&&As(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${n}`,o}async function Fb(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Mb(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function zb(r,e,t){let n=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let u=await Fb(l,t);return u.links?u.links():[]}return[]}));return Hb(n.flat(1).filter(Mb).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function ag(r,e,t,n,o,l){let u=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,h=(f,p)=>{var x;return t[p].pathname!==f.pathname||((x=t[p].route.path)==null?void 0:x.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return l==="assets"?e.filter((f,p)=>u(f,p)||h(f,p)):l==="data"?e.filter((f,p)=>{var y;let x=n.routes[f.route.id];if(!x||!x.hasLoader)return!1;if(u(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(r,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Bb(r,e,{includeHydrateFallback:t}={}){return Vb(r.map(n=>{let o=e.routes[n.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function Vb(r){return[...new Set(r)]}function qb(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function Hb(r,e){let t=new Set;return new Set(e),r.reduce((n,o)=>{let l=JSON.stringify(qb(o));return t.has(l)||(t.add(l),n.push({key:l,link:o})),n},[])}function Wx(){let r=S.useContext(ui);return Ph(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Wb(){let r=S.useContext(bc);return Ph(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Ah=S.createContext(void 0);Ah.displayName="FrameworkContext";function Kx(){let r=S.useContext(Ah);return Ph(r,"You must render this element inside a <HydratedRouter> element"),r}function Kb(r,e){let t=S.useContext(Ah),[n,o]=S.useState(!1),[l,u]=S.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:x,onTouchStart:y}=e,b=S.useRef(null);S.useEffect(()=>{if(r==="render"&&u(!0),r==="viewport"){let _=P=>{P.forEach(T=>{u(T.isIntersecting)})},j=new IntersectionObserver(_,{threshold:.5});return b.current&&j.observe(b.current),()=>{j.disconnect()}}},[r]),S.useEffect(()=>{if(n){let _=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(_)}}},[n]);let w=()=>{o(!0)},N=()=>{o(!1),u(!1)};return t?r!=="intent"?[l,b,{}]:[l,b,{onFocus:Xi(h,w),onBlur:Xi(f,N),onMouseEnter:Xi(p,w),onMouseLeave:Xi(x,N),onTouchStart:Xi(y,w)}]:[!1,b,{}]}function Xi(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function Gb({page:r,...e}){let{router:t}=Wx(),n=S.useMemo(()=>Px(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?S.createElement(Qb,{page:r,matches:n,...e}):null}function Jb(r){let{manifest:e,routeModules:t}=Kx(),[n,o]=S.useState([]);return S.useEffect(()=>{let l=!1;return zb(r,e,t).then(u=>{l||o(u)}),()=>{l=!0}},[r,e,t]),n}function Qb({page:r,matches:e,...t}){let n=Gr(),{future:o,manifest:l,routeModules:u}=Kx(),{basename:h}=Wx(),{loaderData:f,matches:p}=Wb(),x=S.useMemo(()=>ag(r,e,p,l,n,"data"),[r,e,p,l,n]),y=S.useMemo(()=>ag(r,e,p,l,n,"assets"),[r,e,p,l,n]),b=S.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let _=new Set,j=!1;if(e.forEach(T=>{var F;let C=l.routes[T.route.id];!C||!C.hasLoader||(!x.some(A=>A.route.id===T.route.id)&&T.route.id in f&&((F=u[T.route.id])!=null&&F.shouldRevalidate)||C.hasClientLoader?j=!0:_.add(T.route.id))}),_.size===0)return[];let P=Ub(r,h,o.unstable_trailingSlashAwareDataRequests,"data");return j&&_.size>0&&P.searchParams.set("_routes",e.filter(T=>_.has(T.route.id)).map(T=>T.route.id).join(",")),[P.pathname+P.search]},[h,o.unstable_trailingSlashAwareDataRequests,f,n,l,x,e,r,u]),w=S.useMemo(()=>Bb(y,l),[y,l]),N=Jb(y);return S.createElement(S.Fragment,null,b.map(_=>S.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),w.map(_=>S.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),N.map(({key:_,link:j})=>S.createElement("link",{key:_,nonce:t.nonce,...j})))}function Zb(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Yb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Yb&&(window.__reactRouterVersion="7.12.0")}catch{}function Xb({basename:r,children:e,unstable_useTransitions:t,window:n}){let o=S.useRef();o.current==null&&(o.current=Aw({window:n,v5Compat:!0}));let l=o.current,[u,h]=S.useState({action:l.action,location:l.location}),f=S.useCallback(p=>{t===!1?h(p):S.startTransition(()=>h(p))},[t]);return S.useLayoutEffect(()=>l.listen(f),[l,f]),S.createElement(Eb,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:l,unstable_useTransitions:t})}var Gx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Va=S.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:o,reloadDocument:l,replace:u,state:h,target:f,to:p,preventScrollReset:x,viewTransition:y,unstable_defaultShouldRevalidate:b,...w},N){let{basename:_,unstable_useTransitions:j}=S.useContext(br),P=typeof p=="string"&&Gx.test(p),T=$x(p,_);p=T.to;let C=hb(p,{relative:o}),[F,A,K]=Kb(n,w),H=s_(p,{replace:u,state:h,target:f,preventScrollReset:x,relative:o,viewTransition:y,unstable_defaultShouldRevalidate:b,unstable_useTransitions:j});function z(W){e&&e(W),W.defaultPrevented||H(W)}let V=S.createElement("a",{...w,...K,href:T.absoluteURL||C,onClick:T.isExternal||l?e:z,ref:Zb(N,A),target:f,"data-discover":!P&&t==="render"?"true":void 0});return F&&!P?S.createElement(S.Fragment,null,V,S.createElement(Gb,{page:C})):V});Va.displayName="Link";var e_=S.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:o=!1,style:l,to:u,viewTransition:h,children:f,...p},x){let y=Oo(u,{relative:p.relative}),b=Gr(),w=S.useContext(bc),{navigator:N,basename:_}=S.useContext(br),j=w!=null&&c_(y)&&h===!0,P=N.encodeLocation?N.encodeLocation(y).pathname:y.pathname,T=b.pathname,C=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(T=T.toLowerCase(),C=C?C.toLowerCase():null,P=P.toLowerCase()),C&&_&&(C=As(C,_)||C);const F=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let A=T===P||!o&&T.startsWith(P)&&T.charAt(F)==="/",K=C!=null&&(C===P||!o&&C.startsWith(P)&&C.charAt(P.length)==="/"),H={isActive:A,isPending:K,isTransitioning:j},z=A?e:void 0,V;typeof n=="function"?V=n(H):V=[n,A?"active":null,K?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let W=typeof l=="function"?l(H):l;return S.createElement(Va,{...p,"aria-current":z,className:V,ref:x,style:W,to:u,viewTransition:h},typeof f=="function"?f(H):f)});e_.displayName="NavLink";var t_=S.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:o,state:l,method:u=nc,action:h,onSubmit:f,relative:p,preventScrollReset:x,viewTransition:y,unstable_defaultShouldRevalidate:b,...w},N)=>{let{unstable_useTransitions:_}=S.useContext(br),j=o_(),P=l_(h,{relative:p}),T=u.toLowerCase()==="get"?"get":"post",C=typeof h=="string"&&Gx.test(h),F=A=>{if(f&&f(A),A.defaultPrevented)return;A.preventDefault();let K=A.nativeEvent.submitter,H=(K==null?void 0:K.getAttribute("formmethod"))||u,z=()=>j(K||A.currentTarget,{fetcherKey:e,method:H,navigate:t,replace:o,state:l,relative:p,preventScrollReset:x,viewTransition:y,unstable_defaultShouldRevalidate:b});_&&t!==!1?S.startTransition(()=>z()):z()};return S.createElement("form",{ref:N,method:T,action:P,onSubmit:n?f:F,...w,"data-discover":!C&&r==="render"?"true":void 0})});t_.displayName="Form";function r_(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jx(r){let e=S.useContext(ui);return ut(e,r_(r)),e}function s_(r,{target:e,replace:t,state:n,preventScrollReset:o,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:h,unstable_useTransitions:f}={}){let p=hi(),x=Gr(),y=Oo(r,{relative:l});return S.useCallback(b=>{if(Ob(b,e)){b.preventDefault();let w=t!==void 0?t:xo(x)===xo(y),N=()=>p(r,{replace:w,state:n,preventScrollReset:o,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:h});f?S.startTransition(()=>N()):N()}},[x,p,y,t,n,e,r,o,l,u,h,f])}function n_(r){vr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=S.useRef(Yd(r)),t=S.useRef(!1),n=Gr(),o=S.useMemo(()=>Ib(n.search,t.current?null:e.current),[n.search]),l=hi(),u=S.useCallback((h,f)=>{const p=Yd(typeof h=="function"?h(new URLSearchParams(o)):h);t.current=!0,l("?"+p,f)},[l,o]);return[o,u]}var a_=0,i_=()=>`__${String(++a_)}__`;function o_(){let{router:r}=Jx("useSubmit"),{basename:e}=S.useContext(br),t=jb(),n=r.fetch,o=r.navigate;return S.useCallback(async(l,u={})=>{let{action:h,method:f,encType:p,formData:x,body:y}=Lb(l,e);if(u.navigate===!1){let b=u.fetcherKey||i_();await n(b,t,u.action||h,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:x,body:y,formMethod:u.method||f,formEncType:u.encType||p,flushSync:u.flushSync})}else await o(u.action||h,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:x,body:y,formMethod:u.method||f,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[n,o,e,t])}function l_(r,{relative:e}={}){let{basename:t}=S.useContext(br),n=S.useContext(hs);ut(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),l={...Oo(r||".",{relative:e})},u=Gr();if(r==null){l.search=u.search;let h=new URLSearchParams(l.search),f=h.getAll("index");if(f.some(x=>x==="")){h.delete("index"),f.filter(y=>y).forEach(y=>h.append("index",y));let x=h.toString();l.search=x?`?${x}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Rs([t,l.pathname])),xo(l)}function c_(r,{relative:e}={}){let t=S.useContext(Ux);ut(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Jx("useViewTransitionState"),o=Oo(r,{relative:e});if(!t.isTransitioning)return!1;let l=As(t.currentLocation.pathname,n)||t.currentLocation.pathname,u=As(t.nextLocation.pathname,n)||t.nextLocation.pathname;return cc(o.pathname,u)!=null||cc(o.pathname,l)!=null}function jc(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(r);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(t[n[o]]=r[n[o]]);return t}function u_(r,e,t,n){function o(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(x){try{p(n.next(x))}catch(y){u(y)}}function f(x){try{p(n.throw(x))}catch(y){u(y)}}function p(x){x.done?l(x.value):o(x.value).then(h,f)}p((n=n.apply(r,e||[])).next())})}const d_=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class Oh extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class h_ extends Oh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ig extends Oh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class og extends Oh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Xd;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Xd||(Xd={}));class f_{constructor(e,{headers:t={},customFetch:n,region:o=Xd.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=d_(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return u_(this,arguments,void 0,function*(t,n={}){var o;let l,u;try{const{headers:h,method:f,body:p,signal:x,timeout:y}=n;let b={},{region:w}=n;w||(w=this.region);const N=new URL(`${this.url}/${t}`);w&&w!=="any"&&(b["x-region"]=w,N.searchParams.set("forceFunctionRegion",w));let _;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",_=p):typeof p=="string"?(b["Content-Type"]="text/plain",_=p):typeof FormData<"u"&&p instanceof FormData?_=p:(b["Content-Type"]="application/json",_=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?_=JSON.stringify(p):_=p;let j=x;y&&(u=new AbortController,l=setTimeout(()=>u.abort(),y),x?(j=u.signal,x.addEventListener("abort",()=>u.abort())):j=u.signal);const P=yield this.fetch(N.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),h),body:_,signal:j}).catch(A=>{throw new h_(A)}),T=P.headers.get("x-relay-error");if(T&&T==="true")throw new ig(P);if(!P.ok)throw new og(P);let C=((o=P.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),F;return C==="application/json"?F=yield P.json():C==="application/octet-stream"||C==="application/pdf"?F=yield P.blob():C==="text/event-stream"?F=P:C==="multipart/form-data"?F=yield P.formData():F=yield P.text(),{data:F,error:null,response:P}}catch(h){return{data:null,error:h,response:h instanceof og||h instanceof ig?h.context:void 0}}finally{l&&clearTimeout(l)}})}}var m_=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},p_=class{constructor(r){var e,t;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(e=r.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=r.signal,this.isMaybeSingle=(t=r.isMaybeSingle)!==null&&t!==void 0?t:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,e){return this.headers=new Headers(this.headers),this.headers.set(r,e),this}then(r,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let o=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let u=null,h=null,f=null,p=l.status,x=l.statusText;if(l.ok){var y,b;if(t.method!=="HEAD"){var w;const P=await l.text();P===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((w=t.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?h=P:h=JSON.parse(P))}const _=(y=t.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),j=(b=l.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");_&&j&&j.length>1&&(f=parseInt(j[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var N;const _=await l.text();try{u=JSON.parse(_),Array.isArray(u)&&l.status===404&&(h=[],u=null,p=200,x="OK")}catch{l.status===404&&_===""?(p=204,x="No Content"):u={message:_}}if(u&&t.isMaybeSingle&&(!(u==null||(N=u.details)===null||N===void 0)&&N.includes("0 rows"))&&(u=null,p=200,x="OK"),u&&t.shouldThrowOnError)throw new m_(u)}return{error:u,data:h,count:f,status:p,statusText:x}});return this.shouldThrowOnError||(o=o.catch(l=>{var u;let h="";const f=l==null?void 0:l.cause;if(f){var p,x,y,b;const N=(p=f==null?void 0:f.message)!==null&&p!==void 0?p:"",_=(x=f==null?void 0:f.code)!==null&&x!==void 0?x:"";h=`${(y=l==null?void 0:l.name)!==null&&y!==void 0?y:"FetchError"}: ${l==null?void 0:l.message}`,h+=`

Caused by: ${(b=f==null?void 0:f.name)!==null&&b!==void 0?b:"Error"}: ${N}`,_&&(h+=` (${_})`),f!=null&&f.stack&&(h+=`
${f.stack}`)}else{var w;h=(w=l==null?void 0:l.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(r,e)}returns(){return this}overrideTypes(){return this}},g_=class extends p_{select(r){let e=!1;const t=(r??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:e=!0,nullsFirst:t,foreignTable:n,referencedTable:o=n}={}){const l=o?`${o}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${r}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:e,referencedTable:t=e}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${r}`),this}range(r,e,{foreignTable:t,referencedTable:n=t}={}){const o=typeof n>"u"?"offset":`${n}.offset`,l=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(l,`${e-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:e=!1,settings:t=!1,buffers:n=!1,wal:o=!1,format:l="text"}={}){var u;const h=[r?"analyze":null,e?"verbose":null,t?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${f}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const lg=new RegExp("[,()]");var La=class extends g_{eq(r,e){return this.url.searchParams.append(r,`eq.${e}`),this}neq(r,e){return this.url.searchParams.append(r,`neq.${e}`),this}gt(r,e){return this.url.searchParams.append(r,`gt.${e}`),this}gte(r,e){return this.url.searchParams.append(r,`gte.${e}`),this}lt(r,e){return this.url.searchParams.append(r,`lt.${e}`),this}lte(r,e){return this.url.searchParams.append(r,`lte.${e}`),this}like(r,e){return this.url.searchParams.append(r,`like.${e}`),this}likeAllOf(r,e){return this.url.searchParams.append(r,`like(all).{${e.join(",")}}`),this}likeAnyOf(r,e){return this.url.searchParams.append(r,`like(any).{${e.join(",")}}`),this}ilike(r,e){return this.url.searchParams.append(r,`ilike.${e}`),this}ilikeAllOf(r,e){return this.url.searchParams.append(r,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(r,e){return this.url.searchParams.append(r,`ilike(any).{${e.join(",")}}`),this}regexMatch(r,e){return this.url.searchParams.append(r,`match.${e}`),this}regexIMatch(r,e){return this.url.searchParams.append(r,`imatch.${e}`),this}is(r,e){return this.url.searchParams.append(r,`is.${e}`),this}isDistinct(r,e){return this.url.searchParams.append(r,`isdistinct.${e}`),this}in(r,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&lg.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(r,`in.(${t})`),this}notIn(r,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&lg.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(r,`not.in.(${t})`),this}contains(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cs.{${e.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(e)}`),this}containedBy(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cd.{${e.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(e)}`),this}rangeGt(r,e){return this.url.searchParams.append(r,`sr.${e}`),this}rangeGte(r,e){return this.url.searchParams.append(r,`nxl.${e}`),this}rangeLt(r,e){return this.url.searchParams.append(r,`sl.${e}`),this}rangeLte(r,e){return this.url.searchParams.append(r,`nxr.${e}`),this}rangeAdjacent(r,e){return this.url.searchParams.append(r,`adj.${e}`),this}overlaps(r,e){return typeof e=="string"?this.url.searchParams.append(r,`ov.${e}`):this.url.searchParams.append(r,`ov.{${e.join(",")}}`),this}textSearch(r,e,{config:t,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const l=t===void 0?"":`(${t})`;return this.url.searchParams.append(r,`${o}fts${l}.${e}`),this}match(r){return Object.entries(r).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(r,e,t){return this.url.searchParams.append(r,`not.${e}.${t}`),this}or(r,{foreignTable:e,referencedTable:t=e}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${r})`),this}filter(r,e,t){return this.url.searchParams.append(r,`${e}.${t}`),this}},x_=class{constructor(r,{headers:e={},schema:t,fetch:n}){this.url=r,this.headers=new Headers(e),this.schema=t,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(r,e){const{head:t=!1,count:n}=e??{},o=t?"HEAD":"GET";let l=!1;const u=(r??"*").split("").map(p=>/\s/.test(p)&&!l?"":(p==='"'&&(l=!l),p)).join(""),{url:h,headers:f}=this.cloneRequestState();return h.searchParams.set("select",u),n&&f.append("Prefer",`count=${n}`),new La({method:o,url:h,headers:f,schema:this.schema,fetch:this.fetch})}insert(r,{count:e,defaultToNull:t=!0}={}){var n;const o="POST",{url:l,headers:u}=this.cloneRequestState();if(e&&u.append("Prefer",`count=${e}`),t||u.append("Prefer","missing=default"),Array.isArray(r)){const h=r.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);l.searchParams.set("columns",f.join(","))}}return new La({method:o,url:l,headers:u,schema:this.schema,body:r,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(r,{onConflict:e,ignoreDuplicates:t=!1,count:n,defaultToNull:o=!0}={}){var l;const u="POST",{url:h,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&h.searchParams.set("on_conflict",e),n&&f.append("Prefer",`count=${n}`),o||f.append("Prefer","missing=default"),Array.isArray(r)){const p=r.reduce((x,y)=>x.concat(Object.keys(y)),[]);if(p.length>0){const x=[...new Set(p)].map(y=>`"${y}"`);h.searchParams.set("columns",x.join(","))}}return new La({method:u,url:h,headers:f,schema:this.schema,body:r,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(r,{count:e}={}){var t;const n="PATCH",{url:o,headers:l}=this.cloneRequestState();return e&&l.append("Prefer",`count=${e}`),new La({method:n,url:o,headers:l,schema:this.schema,body:r,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:r}={}){var e;const t="DELETE",{url:n,headers:o}=this.cloneRequestState();return r&&o.append("Prefer",`count=${r}`),new La({method:t,url:n,headers:o,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},y_=class Qx{constructor(e,{headers:t={},schema:n,fetch:o}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new x_(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Qx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:o=!1,count:l}={}){var u;let h;const f=new URL(`${this.url}/rpc/${e}`);let p;const x=w=>w!==null&&typeof w=="object"&&(!Array.isArray(w)||w.some(x)),y=n&&Object.values(t).some(x);y?(h="POST",p=t):n||o?(h=n?"HEAD":"GET",Object.entries(t).filter(([w,N])=>N!==void 0).map(([w,N])=>[w,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([w,N])=>{f.searchParams.append(w,N)})):(h="POST",p=t);const b=new Headers(this.headers);return y?b.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&b.set("Prefer",`count=${l}`),new La({method:h,url:f,headers:b,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class v_{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const n=t.versions;if(n&&n.node){const o=n.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const w_="2.91.0",b_=`realtime-js/${w_}`,__="1.0.0",Zx="2.0.0",cg=Zx,eh=1e4,j_=1e3,N_=100;var tn;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(tn||(tn={}));var Rt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Rt||(Rt={}));var Hr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Hr||(Hr={}));var th;(function(r){r.websocket="websocket"})(th||(th={}));var Un;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Un||(Un={}));class S_{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const o=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var t,n;const o=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,t,n){var o,l;const u=e.topic,h=(o=e.ref)!==null&&o!==void 0?o:"",f=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,x=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(x).length===0?"":JSON.stringify(x);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+h.length+u.length+p.length+y.length,w=new ArrayBuffer(this.HEADER_LENGTH+b);let N=new DataView(w),_=0;N.setUint8(_++,this.KINDS.userBroadcastPush),N.setUint8(_++,f.length),N.setUint8(_++,h.length),N.setUint8(_++,u.length),N.setUint8(_++,p.length),N.setUint8(_++,y.length),N.setUint8(_++,t),Array.from(f,P=>N.setUint8(_++,P.charCodeAt(0))),Array.from(h,P=>N.setUint8(_++,P.charCodeAt(0))),Array.from(u,P=>N.setUint8(_++,P.charCodeAt(0))),Array.from(p,P=>N.setUint8(_++,P.charCodeAt(0))),Array.from(y,P=>N.setUint8(_++,P.charCodeAt(0)));var j=new Uint8Array(w.byteLength+n.byteLength);return j.set(new Uint8Array(w),0),j.set(new Uint8Array(n),w.byteLength),j.buffer}decode(e,t){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return t(n)}if(typeof e=="string"){const n=JSON.parse(e),[o,l,u,h,f]=n;return t({join_ref:o,ref:l,topic:u,event:h,payload:f})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),o=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,o)}}_decodeUserBroadcast(e,t,n){const o=t.getUint8(1),l=t.getUint8(2),u=t.getUint8(3),h=t.getUint8(4);let f=this.HEADER_LENGTH+4;const p=n.decode(e.slice(f,f+o));f=f+o;const x=n.decode(e.slice(f,f+l));f=f+l;const y=n.decode(e.slice(f,f+u));f=f+u;const b=e.slice(f,e.byteLength),w=h===this.JSON_ENCODING?JSON.parse(n.decode(b)):b,N={type:this.BROADCAST_EVENT,event:x,payload:w};return u>0&&(N.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>t.includes(n)))}}class Yx{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(it||(it={}));const ug=(r,e,t={})=>{var n;const o=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=k_(u,r,e,o),l),{}):{}},k_=(r,e,t,n)=>{const o=e.find(h=>h.name===r),l=o==null?void 0:o.type,u=t[r];return l&&!n.includes(l)?Xx(l,u):rh(u)},Xx=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return R_(e,t)}switch(r){case it.bool:return E_(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return C_(e);case it.json:case it.jsonb:return T_(e);case it.timestamp:return P_(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return rh(e);default:return rh(e)}},rh=r=>r,E_=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},C_=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},T_=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},R_=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let l;const u=r.slice(1,t);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(h=>Xx(e,h))}return r},P_=r=>typeof r=="string"?r.replace(" ","T"):r,ey=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class wd{constructor(e,t,n={},o=eh){this.channel=e,this.event=t,this.payload=n,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dg;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(dg||(dg={}));class uo{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},o=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=uo.syncState(this.state,o,l,u),this.pendingDiffs.forEach(f=>{this.state=uo.syncDiff(this.state,f,l,u)}),this.pendingDiffs=[],h()}),this.channel._on(n.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=uo.syncDiff(this.state,o,l,u),h())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,o){const l=this.cloneDeep(e),u=this.transformState(t),h={},f={};return this.map(l,(p,x)=>{u[p]||(f[p]=x)}),this.map(u,(p,x)=>{const y=l[p];if(y){const b=x.map(j=>j.presence_ref),w=y.map(j=>j.presence_ref),N=x.filter(j=>w.indexOf(j.presence_ref)<0),_=y.filter(j=>b.indexOf(j.presence_ref)<0);N.length>0&&(h[p]=N),_.length>0&&(f[p]=_)}else h[p]=x}),this.syncDiff(l,{joins:h,leaves:f},n,o)}static syncDiff(e,t,n,o){const{joins:l,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),o||(o=()=>{}),this.map(l,(h,f)=>{var p;const x=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(f),x.length>0){const y=e[h].map(w=>w.presence_ref),b=x.filter(w=>y.indexOf(w.presence_ref)<0);e[h].unshift(...b)}n(h,x,f)}),this.map(u,(h,f)=>{let p=e[h];if(!p)return;const x=f.map(y=>y.presence_ref);p=p.filter(y=>x.indexOf(y.presence_ref)<0),e[h]=p,o(h,p,f),p.length===0&&delete e[h]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const o=e[n];return"metas"in o?t[n]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[n]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hg;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(hg||(hg={}));var ho;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(ho||(ho={}));var Ss;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ss||(Ss={}));class Ba{constructor(e,t={config:{}},n){var o,l;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new wd(this,Hr.join,this.params,this.timeout),this.rejoinTimer=new Yx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hr.reply,{},(u,h)=>{this._trigger(this._replyEventName(h),u)}),this.presence=new uo(this),this.broadcastEndpointURL=ey(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Rt.closed){const{config:{broadcast:u,presence:h,private:f}}=this.params,p=(o=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(w=>w.filter))!==null&&o!==void 0?o:[],x=!!this.bindings[ho.PRESENCE]&&this.bindings[ho.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,y={},b={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:x}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(Ss.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(Ss.CLOSED)),this.updateJoinPayload(Object.assign({config:b},y)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:w})=>{var N;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){e==null||e(Ss.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,j=(N=_==null?void 0:_.length)!==null&&N!==void 0?N:0,P=[];for(let T=0;T<j;T++){const C=_[T],{filter:{event:F,schema:A,table:K,filter:H}}=C,z=w&&w[T];if(z&&z.event===F&&Ba.isFilterValueEqual(z.schema,A)&&Ba.isFilterValueEqual(z.table,K)&&Ba.isFilterValueEqual(z.filter,H))P.push(Object.assign(Object.assign({},C),{id:z.id}));else{this.unsubscribe(),this.state=Rt.errored,e==null||e(Ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,e&&e(Ss.SUBSCRIBED);return}}).receive("error",w=>{this.state=Rt.errored,e==null||e(Ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Rt.joined&&e===ho.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var o;if(t==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);if(h.status===202)return{success:!0};let f=h.statusText;try{const p=await h.json();f=p.error||p.message||f}catch{}return Promise.reject(new Error(f))}async send(e,t={}){var n,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,h,f;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Rt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(o=>{n=new wd(this,Hr.leave,{},e),n.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Rt.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const o=new AbortController,l=setTimeout(()=>o.abort(),n),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(l),u}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new wd(this,e,t,n);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>N_){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var o,l;const u=e.toLocaleLowerCase(),{close:h,error:f,leave:p,join:x}=Hr;if(n&&[h,f,p,x].indexOf(u)>=0&&n!==this._joinRef())return;let b=this._onMessage(u,t,n);if(t&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var N,_,j;return((N=w.filter)===null||N===void 0?void 0:N.event)==="*"||((j=(_=w.filter)===null||_===void 0?void 0:_.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===u}).map(w=>w.callback(b,n)):(l=this.bindings[u])===null||l===void 0||l.filter(w=>{var N,_,j,P,T,C,F,A;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const K=w.id,H=(N=w.filter)===null||N===void 0?void 0:N.event;return K&&((_=t.ids)===null||_===void 0?void 0:_.includes(K))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((j=t.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))&&(!(!((P=w.filter)===null||P===void 0)&&P.table)||w.filter.table===((T=t.data)===null||T===void 0?void 0:T.table))}else{const K=(F=(C=w==null?void 0:w.filter)===null||C===void 0?void 0:C.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return K==="*"||K===((A=t==null?void 0:t.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof b=="object"&&"ids"in b){const N=b.data,{schema:_,table:j,commit_timestamp:P,type:T,errors:C}=N;b=Object.assign(Object.assign({},{schema:_,table:j,commit_timestamp:P,eventType:T,new:{},old:{},errors:C}),this._getPayloadRecords(N))}w.callback(b,n)})}_isClosed(){return this.state===Rt.closed}_isJoined(){return this.state===Rt.joined}_isJoining(){return this.state===Rt.joining}_isLeaving(){return this.state===Rt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const o=e.toLocaleLowerCase(),l={type:o,filter:t,callback:n};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===n&&Ba.isEqual(o.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hr.close,{},e)}_onError(e){this._on(Hr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ug(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ug(e.columns,e.old_record)),t}}const bd=()=>{},Jl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},A_=[1e3,2e3,5e3,1e4],O_=1e4,I_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class D_{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=eh,this.transport=null,this.heartbeatIntervalMs=Jl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bd,this.ref=0,this.reconnectTimer=null,this.vsn=cg,this.logger=bd,this.conn=null,this.sendBuffer=[],this.serializer=new S_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${th.websocket}`,this.httpEndpoint=ey(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v_.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case tn.connecting:return Un.Connecting;case tn.open:return Un.Open;case tn.closing:return Un.Closing;default:return Un.Closed}}isConnected(){return this.connectionState()===Un.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===n);if(o)return o;{const l=new Ba(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:n,payload:o,ref:l}=e,u=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${t} ${n} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(j_,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Jl.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",p)}catch(x){this.log("error","error in heartbeat callback",x)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:o,payload:l,ref:u}=t,h=u?`(${u})`:"",f=l.status||"";this.log("receive",`${f} ${n} ${o} ${h}`.trim(),l),this.channels.filter(p=>p._isMember(n)).forEach(p=>p._trigger(o,l,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===tn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===tn.open||this.conn.readyState===tn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Hr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${n}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([I_],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,n=!1;if(e)t=e,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(o=>{const l={access_token:t,version:b_};t&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(Hr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Yx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Jl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,o,l,u,h,f,p,x,y,b,w;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:eh,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:Jl.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:bd,this.vsn=(f=e==null?void 0:e.vsn)!==null&&f!==void 0?f:cg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(N=>A_[N-1]||O_),this.vsn){case __:this.encode=(x=e==null?void 0:e.encode)!==null&&x!==void 0?x:((N,_)=>_(JSON.stringify(N))),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:((N,_)=>_(JSON.parse(N)));break;case Zx:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var yo=class extends Error{constructor(r,e){var t;super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $_(r,e,t){const n=new URL(e,r);if(t)for(const[o,l]of Object.entries(t))l!==void 0&&n.searchParams.set(o,l);return n.toString()}async function L_(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function U_(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:t,path:n,query:o,body:l,headers:u}){const h=$_(r.baseUrl,n,o),f=await L_(r.auth),p=await e(h,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...f,...u},body:l?JSON.stringify(l):void 0}),x=await p.text(),y=(p.headers.get("content-type")||"").includes("application/json"),b=y&&x?JSON.parse(x):x;if(!p.ok){const w=y?b:void 0,N=w==null?void 0:w.error;throw new yo((N==null?void 0:N.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:N==null?void 0:N.type,icebergCode:N==null?void 0:N.code,details:w})}return{status:p.status,headers:p.headers,data:b}}}}function Ql(r){return r.join("")}var F_=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:Ql(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(r,e){const t={namespace:r.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ql(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ql(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ql(r.namespace)}`}),!0}catch(e){if(e instanceof yo&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(t){if(t instanceof yo&&t.status===409)return;throw t}}};function Ca(r){return r.join("")}var M_=class{constructor(r,e="",t){this.client=r,this.prefix=e,this.accessDelegation=t}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ca(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ca(r.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(r,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ca(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ca(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ca(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ca(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(t){if(t instanceof yo&&t.status===404)return!1;throw t}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(t){if(t instanceof yo&&t.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw t}}},z_=class{constructor(r){var n;let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const t=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=U_({baseUrl:t,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(n=r.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new F_(this.client,e),this.tableOps=new M_(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}},Nc=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function ft(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var B_=class extends Nc{constructor(r,e,t){super(r),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},sh=class extends Nc{constructor(r,e){super(r),this.name="StorageUnknownError",this.originalError=e}};const Ih=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),V_=()=>Response,nh=r=>{if(Array.isArray(r))return r.map(t=>nh(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const o=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=nh(n)}),e},q_=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},H_=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function vo(r){"@babel/helpers - typeof";return vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo(r)}function W_(r,e){if(vo(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(vo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function K_(r){var e=W_(r,"string");return vo(e)=="symbol"?e:e+""}function G_(r,e,t){return(e=K_(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function fg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function Te(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fg(Object(t),!0).forEach(function(n){G_(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fg(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}const _d=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},J_=async(r,e,t)=>{r instanceof await V_()&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{const o=r.status||500,l=(n==null?void 0:n.statusCode)||o+"";e(new B_(_d(n),o,l))}).catch(n=>{e(new sh(_d(n),n))}):e(new sh(_d(r),r))},Q_=(r,e,t,n)=>{const o={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!n?o:(q_(n)?(o.headers=Te({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(n)):o.body=n,e!=null&&e.duplex&&(o.duplex=e.duplex),Te(Te({},o),t))};async function Io(r,e,t,n,o,l){return new Promise((u,h)=>{r(t,Q_(e,n,o,l)).then(f=>{if(!f.ok)throw f;return n!=null&&n.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>J_(f,h,n))})}async function wo(r,e,t,n){return Io(r,"GET",e,t,n)}async function Br(r,e,t,n,o){return Io(r,"POST",e,n,o,t)}async function ah(r,e,t,n,o){return Io(r,"PUT",e,n,o,t)}async function Z_(r,e,t,n){return Io(r,"HEAD",e,Te(Te({},t),{},{noResolveJson:!0}),n)}async function Dh(r,e,t,n,o){return Io(r,"DELETE",e,n,o,t)}var Y_=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e}then(r,e){return this.execute().then(r,e)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}}};let ty;ty=Symbol.toStringTag;var X_=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e,this[ty]="BlobDownloadBuilder",this.promise=null}asStream(){return new Y_(this.downloadFn,this.shouldThrowOnError)}then(r,e){return this.getPromise().then(r,e)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}}};const ej={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var tj=class{constructor(r,e={},t,n){this.shouldThrowOnError=!1,this.url=r,this.headers=e,this.bucketId=t,this.fetch=Ih(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(r,e,t,n){var o=this;try{let l;const u=Te(Te({},mg),n);let h=Te(Te({},o.headers),r==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",o.encodeMetadata(f)),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),f&&!l.has("metadata")&&l.append("metadata",o.encodeMetadata(f))):(l=t,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=o.toBase64(o.encodeMetadata(f))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),n!=null&&n.headers&&(h=Te(Te({},h),n.headers));const p=o._removeEmptyFolders(e),x=o._getFinalPath(p),y=await(r=="PUT"?ah:Br)(o.fetch,`${o.url}/object/${x}`,l,Te({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(ft(l))return{data:null,error:l};throw l}}async upload(r,e,t){return this.uploadOrUpdate("POST",r,e,t)}async uploadToSignedUrl(r,e,t,n){var o=this;const l=o._removeEmptyFolders(r),u=o._getFinalPath(l),h=new URL(o.url+`/object/upload/sign/${u}`);h.searchParams.set("token",e);try{let f;const p=Te({upsert:mg.upsert},n),x=Te(Te({},o.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&t instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",t)):typeof FormData<"u"&&t instanceof FormData?(f=t,f.append("cacheControl",p.cacheControl)):(f=t,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType),{data:{path:l,fullPath:(await ah(o.fetch,h.toString(),f,{headers:x})).Key},error:null}}catch(f){if(o.shouldThrowOnError)throw f;if(ft(f))return{data:null,error:f};throw f}}async createSignedUploadUrl(r,e){var t=this;try{let n=t._getFinalPath(r);const o=Te({},t.headers);e!=null&&e.upsert&&(o["x-upsert"]="true");const l=await Br(t.fetch,`${t.url}/object/upload/sign/${n}`,{},{headers:o}),u=new URL(t.url+l.url),h=u.searchParams.get("token");if(!h)throw new Nc("No token returned by API");return{data:{signedUrl:u.toString(),path:r,token:h},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}}async update(r,e,t){return this.uploadOrUpdate("PUT",r,e,t)}async move(r,e,t){var n=this;try{return{data:await Br(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ft(o))return{data:null,error:o};throw o}}async copy(r,e,t){var n=this;try{return{data:{path:(await Br(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:n.headers})).Key},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ft(o))return{data:null,error:o};throw o}}async createSignedUrl(r,e,t){var n=this;try{let o=n._getFinalPath(r),l=await Br(n.fetch,`${n.url}/object/sign/${o}`,Te({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:n.headers});const u=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return l={signedUrl:encodeURI(`${n.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ft(o))return{data:null,error:o};throw o}}async createSignedUrls(r,e,t){var n=this;try{const o=await Br(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:r},{headers:n.headers}),l=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:o.map(u=>Te(Te({},u),{},{signedUrl:u.signedURL?encodeURI(`${n.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ft(o))return{data:null,error:o};throw o}}download(r,e){const t=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=n?`?${n}`:"",l=this._getFinalPath(r),u=()=>wo(this.fetch,`${this.url}/${t}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new X_(u,this.shouldThrowOnError)}async info(r){var e=this;const t=e._getFinalPath(r);try{return{data:nh(await wo(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}}async exists(r){var e=this;const t=e._getFinalPath(r);try{return await Z_(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ft(n)&&n instanceof sh){const o=n.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:n}}throw n}}getPublicUrl(r,e){const t=this._getFinalPath(r),n=[],o=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&n.push(o);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});u!==""&&n.push(u);let h=n.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${t}${h}`)}}}async remove(r){var e=this;try{return{data:await Dh(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}}async list(r,e,t){var n=this;try{const o=Te(Te(Te({},ej),e),{},{prefix:r||""});return{data:await Br(n.fetch,`${n.url}/object/list/${n.bucketId}`,o,{headers:n.headers},t),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ft(o))return{data:null,error:o};throw o}}async listV2(r,e){var t=this;try{const n=Te({},r);return{data:await Br(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,n,{headers:t.headers},e),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const e=[];return r.width&&e.push(`width=${r.width}`),r.height&&e.push(`height=${r.height}`),r.resize&&e.push(`resize=${r.resize}`),r.format&&e.push(`format=${r.format}`),r.quality&&e.push(`quality=${r.quality}`),e.join("&")}};const ry="2.91.0",sy={"X-Client-Info":`storage-js/${ry}`};var rj=class{constructor(r,e={},t,n){this.shouldThrowOnError=!1;const o=new URL(r);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Te(Te({},sy),e),this.fetch=Ih(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(r){var e=this;try{const t=e.listBucketOptionsToQueryString(r);return{data:await wo(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}}async getBucket(r){var e=this;try{return{data:await wo(e.fetch,`${e.url}/bucket/${r}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}}async createBucket(r,e={public:!1}){var t=this;try{return{data:await Br(t.fetch,`${t.url}/bucket`,{id:r,name:r,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}}async updateBucket(r,e){var t=this;try{return{data:await ah(t.fetch,`${t.url}/bucket/${r}`,{id:r,name:r,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}}async emptyBucket(r){var e=this;try{return{data:await Br(e.fetch,`${e.url}/bucket/${r}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await Dh(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(r){const e={};return r&&("limit"in r&&(e.limit=String(r.limit)),"offset"in r&&(e.offset=String(r.offset)),r.search&&(e.search=r.search),r.sortColumn&&(e.sortColumn=r.sortColumn),r.sortOrder&&(e.sortOrder=r.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},sj=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Te(Te({},sy),e),this.fetch=Ih(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var e=this;try{return{data:await Br(e.fetch,`${e.url}/bucket`,{name:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}}async listBuckets(r){var e=this;try{const t=new URLSearchParams;(r==null?void 0:r.limit)!==void 0&&t.set("limit",r.limit.toString()),(r==null?void 0:r.offset)!==void 0&&t.set("offset",r.offset.toString()),r!=null&&r.sortColumn&&t.set("sortColumn",r.sortColumn),r!=null&&r.sortOrder&&t.set("sortOrder",r.sortOrder),r!=null&&r.search&&t.set("search",r.search);const n=t.toString(),o=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await wo(e.fetch,o,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await Dh(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}}from(r){var e=this;if(!H_(r))throw new Nc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new z_({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(t,{get(o,l){const u=o[l];return typeof u!="function"?u:async(...h)=>{try{return{data:await u.apply(o,h),error:null}}catch(f){if(n)throw f;return{data:null,error:f}}}}})}};const $h={"X-Client-Info":`storage-js/${ry}`,"Content-Type":"application/json"};var ny=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function gr(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var jd=class extends ny{constructor(r,e,t){super(r),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},nj=class extends ny{constructor(r,e){super(r),this.name="StorageVectorsUnknownError",this.originalError=e}};const Lh=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),aj=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},pg=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),ij=async(r,e,t)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(t!=null&&t.noResolveJson)){const n=r.status||500,o=r;if(typeof o.json=="function")o.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||n+"";e(new jd(pg(l),n,u))}).catch(()=>{const l=n+"";e(new jd(o.statusText||`HTTP ${n} error`,n,l))});else{const l=n+"";e(new jd(o.statusText||`HTTP ${n} error`,n,l))}}else e(new nj(pg(r),r))},oj=(r,e,t,n)=>{const o={method:r,headers:(e==null?void 0:e.headers)||{}};return n?(aj(n)?(o.headers=Te({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(n)):o.body=n,Te(Te({},o),t)):o};async function lj(r,e,t,n,o,l){return new Promise((u,h)=>{r(t,oj(e,n,o,l)).then(f=>{if(!f.ok)throw f;if(n!=null&&n.noResolveJson)return f;const p=f.headers.get("content-type");return!p||!p.includes("application/json")?{}:f.json()}).then(f=>u(f)).catch(f=>ij(f,h,n))})}async function xr(r,e,t,n,o){return lj(r,"POST",e,n,o,t)}var cj=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Te(Te({},$h),e),this.fetch=Lh(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(r){var e=this;try{return{data:await xr(e.fetch,`${e.url}/CreateIndex`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}}async getIndex(r,e){var t=this;try{return{data:await xr(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(gr(n))return{data:null,error:n};throw n}}async listIndexes(r){var e=this;try{return{data:await xr(e.fetch,`${e.url}/ListIndexes`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}}async deleteIndex(r,e){var t=this;try{return{data:await xr(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(gr(n))return{data:null,error:n};throw n}}},uj=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Te(Te({},$h),e),this.fetch=Lh(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(r){var e=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await xr(e.fetch,`${e.url}/PutVectors`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}}async getVectors(r){var e=this;try{return{data:await xr(e.fetch,`${e.url}/GetVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}}async listVectors(r){var e=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:await xr(e.fetch,`${e.url}/ListVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}}async queryVectors(r){var e=this;try{return{data:await xr(e.fetch,`${e.url}/QueryVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}}async deleteVectors(r){var e=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await xr(e.fetch,`${e.url}/DeleteVectors`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}}},dj=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Te(Te({},$h),e),this.fetch=Lh(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var e=this;try{return{data:await xr(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}}async getBucket(r){var e=this;try{return{data:await xr(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}}async listBuckets(r={}){var e=this;try{return{data:await xr(e.fetch,`${e.url}/ListVectorBuckets`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await xr(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}}},hj=class extends dj{constructor(r,e={}){super(r,e.headers||{},e.fetch)}from(r){return new fj(this.url,this.headers,r,this.fetch)}async createBucket(r){var e=()=>super.createBucket,t=this;return e().call(t,r)}async getBucket(r){var e=()=>super.getBucket,t=this;return e().call(t,r)}async listBuckets(r={}){var e=()=>super.listBuckets,t=this;return e().call(t,r)}async deleteBucket(r){var e=()=>super.deleteBucket,t=this;return e().call(t,r)}},fj=class extends cj{constructor(r,e,t,n){super(r,e,n),this.vectorBucketName=t}async createIndex(r){var e=()=>super.createIndex,t=this;return e().call(t,Te(Te({},r),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(r={}){var e=()=>super.listIndexes,t=this;return e().call(t,Te(Te({},r),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(r){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,r)}async deleteIndex(r){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,r)}index(r){return new mj(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},mj=class extends uj{constructor(r,e,t,n,o){super(r,e,o),this.vectorBucketName=t,this.indexName=n}async putVectors(r){var e=()=>super.putVectors,t=this;return e().call(t,Te(Te({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(r){var e=()=>super.getVectors,t=this;return e().call(t,Te(Te({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(r={}){var e=()=>super.listVectors,t=this;return e().call(t,Te(Te({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(r){var e=()=>super.queryVectors,t=this;return e().call(t,Te(Te({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(r){var e=()=>super.deleteVectors,t=this;return e().call(t,Te(Te({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},pj=class extends rj{constructor(r,e={},t,n){super(r,e,t,n)}from(r){return new tj(this.url,this.headers,r,this.fetch)}get vectors(){return new hj(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new sj(this.url+"/iceberg",this.headers,this.fetch)}};const ay="2.91.0",Ua=30*1e3,ih=3,Nd=ih*Ua,gj="http://localhost:9999",xj="supabase.auth.token",yj={"X-Client-Info":`gotrue-js/${ay}`},oh="X-Supabase-Api-Version",iy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wj=600*1e3;class bo extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function be(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class bj extends bo{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function _j(r){return be(r)&&r.name==="AuthApiError"}class Fn extends bo{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Is extends bo{constructor(e,t,n,o){super(e,n,o),this.name=t,this.status=n}}class pr extends Is{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jj(r){return be(r)&&r.name==="AuthSessionMissingError"}class Ta extends Is{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zl extends Is{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Yl extends Is{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Nj(r){return be(r)&&r.name==="AuthImplicitGrantRedirectError"}class gg extends Is{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sj extends Is{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class lh extends Is{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Sd(r){return be(r)&&r.name==="AuthRetryableFetchError"}class xg extends Is{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class ch extends Is{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const uc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yg=` 	
\r=`.split(""),kj=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<yg.length;e+=1)r[yg[e].charCodeAt(0)]=-2;for(let e=0;e<uc.length;e+=1)r[uc[e].charCodeAt(0)]=e;return r})();function vg(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(uc[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(uc[n]),e.queuedBits-=6}}function oy(r,e,t){const n=kj[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function wg(r){const e=[],t=u=>{e.push(String.fromCodePoint(u))},n={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{Tj(u,n,t)};for(let u=0;u<r.length;u+=1)oy(r.charCodeAt(u),o,l);return e.join("")}function Ej(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Cj(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const o=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}Ej(n,e)}}function Tj(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function qa(r){const e=[],t={queue:0,queuedBits:0},n=o=>{e.push(o)};for(let o=0;o<r.length;o+=1)oy(r.charCodeAt(o),t,n);return new Uint8Array(e)}function Rj(r){const e=[];return Cj(r,t=>e.push(t)),new Uint8Array(e)}function zn(r){const e=[],t={queue:0,queuedBits:0},n=o=>{e.push(o)};return r.forEach(o=>vg(o,t,n)),vg(null,t,n),e.join("")}function Pj(r){return Math.round(Date.now()/1e3)+r}function Aj(){return Symbol("auth-callback")}const Ft=()=>typeof window<"u"&&typeof document<"u",Dn={tested:!1,writable:!1},ly=()=>{if(!Ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Dn.tested)return Dn.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Dn.tested=!0,Dn.writable=!0}catch{Dn.tested=!0,Dn.writable=!1}return Dn.writable};function Oj(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return t.searchParams.forEach((n,o)=>{e[o]=n}),e}const cy=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Ij=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Fa=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},$n=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ut=async(r,e)=>{await r.removeItem(e)};class Sc{constructor(){this.promise=new Sc.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Sc.promiseConstructor=Promise;function kd(r){const e=r.split(".");if(e.length!==3)throw new ch("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!vj.test(e[n]))throw new ch("JWT not in base64url format");return{header:JSON.parse(wg(e[0])),payload:JSON.parse(wg(e[1])),signature:qa(e[2]),raw:{header:e[0],payload:e[1]}}}async function Dj(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function $j(r,e){return new Promise((n,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await r(l);if(!e(l,null,u)){n(u);return}}catch(u){if(!e(l,u)){o(u);return}}})()})}function Lj(r){return("0"+r.toString(16)).substr(-2)}function Uj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let o="";for(let l=0;l<56;l++)o+=t.charAt(Math.floor(Math.random()*n));return o}return crypto.getRandomValues(e),Array.from(e,Lj).join("")}async function Fj(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(n);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function Mj(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Fj(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ra(r,e,t=!1){const n=Uj();let o=n;t&&(o+="/PASSWORD_RECOVERY"),await Fa(r,`${e}-code-verifier`,o);const l=await Mj(n);return[l,n===l?"plain":"s256"]}const zj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Bj(r){const e=r.headers.get(oh);if(!e||!e.match(zj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Vj(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function qj(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Hj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pa(r){if(!Hj.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ed(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Wj(r,e){return new Proxy(r,{get:(t,n,o)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const l=n.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,o)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,o)}})}function bg(r){return JSON.parse(JSON.stringify(r))}const Ln=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Kj=[502,503,504];async function _g(r){var e;if(!Ij(r))throw new lh(Ln(r),0);if(Kj.includes(r.status))throw new lh(Ln(r),r.status);let t;try{t=await r.json()}catch(l){throw new Fn(Ln(l),l)}let n;const o=Bj(r);if(o&&o.getTime()>=iy["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new xg(Ln(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new pr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new xg(Ln(t),r.status,t.weak_password.reasons);throw new bj(Ln(t),r.status||500,n)}const Gj=(r,e,t,n)=>{const o={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),t))};async function Ce(r,e,t,n){var o;const l=Object.assign({},n==null?void 0:n.headers);l[oh]||(l[oh]=iy["2024-01-01"].name),n!=null&&n.jwt&&(l.Authorization=`Bearer ${n.jwt}`);const u=(o=n==null?void 0:n.query)!==null&&o!==void 0?o:{};n!=null&&n.redirectTo&&(u.redirect_to=n.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await Jj(r,e,t+h,{headers:l,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(f):{data:Object.assign({},f),error:null}}async function Jj(r,e,t,n,o,l){const u=Gj(e,n,o,l);let h;try{h=await r(t,Object.assign({},u))}catch(f){throw console.error(f),new lh(Ln(f),0)}if(h.ok||await _g(h),n!=null&&n.noResolveJson)return h;try{return await h.json()}catch(f){await _g(f)}}function zr(r){var e;let t=null;Yj(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Pj(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function jg(r){const e=zr(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function sn(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Qj(r){return{data:r,error:null}}function Zj(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:o,verification_type:l}=r,u=jc(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:t,hashed_token:n,redirect_to:o,verification_type:l},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function Ng(r){return r}function Yj(r){return r.access_token&&r.refresh_token&&r.expires_in}const Cd=["global","local","others"];class Xj{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=cy(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Cd[0]){if(Cd.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cd.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:sn})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=jc(e,["options"]),o=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(o.new_email=n==null?void 0:n.newEmail,delete o.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Zj,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(be(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:sn})}catch(t){if(be(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,o,l,u,h,f;try{const p={nextPage:null,lastPage:0,total:0},x=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Ng});if(x.error)throw x.error;const y=await x.json(),b=(u=x.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(f=(h=x.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return w.length>0&&(w.forEach(N=>{const _=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(N.split(";")[1].split("=")[1]);p[`${j}Page`]=_}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(be(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Pa(e);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:sn})}catch(t){if(be(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Pa(e);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:sn})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Pa(e);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:sn})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Pa(e.userId);try{const{data:t,error:n}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:n}}catch(t){if(be(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Pa(e.userId),Pa(e.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,o,l,u,h,f;try{const p={nextPage:null,lastPage:0,total:0},x=await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Ng});if(x.error)throw x.error;const y=await x.json(),b=(u=x.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(f=(h=x.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return w.length>0&&(w.forEach(N=>{const _=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(N.split(";")[1].split("=")[1]);p[`${j}Page`]=_}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(be(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(be(t))return{data:null,error:t};throw t}}}function Sg(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const Aa={debug:!!(globalThis&&ly()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uy extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class eN extends uy{}async function tN(r,e,t){Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async o=>{if(o){Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await t()}finally{Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(e===0)throw Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new eN(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Aa.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function rN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function dy(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function sN(r){return parseInt(r,16)}function nN(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function aN(r){var e;const{chainId:t,domain:n,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:h,requestId:f,resources:p,scheme:x,uri:y,version:b}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const w=dy(r.address),N=x?`${x}://${n}`:n,_=r.statement?`${r.statement}
`:"",j=`${N} wants you to sign in with your Ethereum account:
${w}

${_}`;let P=`URI: ${y}
Version: ${b}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(P+=`
Expiration Time: ${o.toISOString()}`),h&&(P+=`
Not Before: ${h.toISOString()}`),f&&(P+=`
Request ID: ${f}`),p){let T=`
Resources:`;for(const C of p){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);T+=`
- ${C}`}P+=T}return`${j}
${P}`}class Nt extends Error{constructor({message:e,code:t,cause:n,name:o}){var l;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(l=o??(n instanceof Error?n.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class dc extends Nt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function iN({error:r,options:e}){var t,n,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((n=l.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Nt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return l.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new Nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const u=window.location.hostname;if(hy(u)){if(l.rp.id!==u)return new Nt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function oN({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Nt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(hy(n)){if(t.rpId!==n)return new Nt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class lN{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const cN=new lN;function uN(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:n}=r,o=jc(r,["challenge","user","excludeCredentials"]),l=qa(e).buffer,u=Object.assign(Object.assign({},t),{id:qa(t.id).buffer}),h=Object.assign(Object.assign({},o),{challenge:l,user:u});if(n&&n.length>0){h.excludeCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const p=n[f];h.excludeCredentials[f]=Object.assign(Object.assign({},p),{id:qa(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function dN(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,n=jc(r,["challenge","allowCredentials"]),o=qa(e).buffer,l=Object.assign(Object.assign({},n),{challenge:o});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const h=t[u];l.allowCredentials[u]=Object.assign(Object.assign({},h),{id:qa(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function hN(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:zn(new Uint8Array(r.response.attestationObject)),clientDataJSON:zn(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function fN(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,n=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:zn(new Uint8Array(o.authenticatorData)),clientDataJSON:zn(new Uint8Array(o.clientDataJSON)),signature:zn(new Uint8Array(o.signature)),userHandle:o.userHandle?zn(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hy(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function kg(){var r,e;return!!(Ft()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function mN(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new dc("Browser returned unexpected credential type",e)}:{data:null,error:new dc("Empty credential response",e)}}catch(e){return{data:null,error:iN({error:e,options:r})}}}async function pN(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new dc("Browser returned unexpected credential type",e)}:{data:null,error:new dc("Empty credential response",e)}}catch(e){return{data:null,error:oN({error:e,options:r})}}}const gN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},xN={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function hc(...r){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),n={};for(const o of r)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))n[l]=u;else if(t(u))n[l]=u;else if(e(u)){const h=n[l];e(h)?n[l]=hc(h,u):n[l]=hc(u)}else n[l]=u}return n}function yN(r,e){return hc(gN,r,e||{})}function vN(r,e){return hc(xN,r,e||{})}class wN{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:o},l){try{const{data:u,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:h};const f=o??cN.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${n}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=yN(u.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:x,error:y}=await mN({publicKey:p,signal:f});return x?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:x}},error:null}:{data:null,error:y}}case"request":{const p=vN(u.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:x,error:y}=await pN(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:f}));return x?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:x}},error:null}:{data:null,error:y}}}}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new Fn("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new bo("rpId is required for WebAuthn authentication")};try{if(!kg())return{data:null,error:new Fn("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:o},{request:l});if(!u)return{data:null,error:h};const{webauthn:f}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:f.type,rpId:t,rpOrigins:n,credential_response:f.credential_response}})}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new Fn("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new bo("rpId is required for WebAuthn registration")};try{if(!kg())return{data:null,error:new Fn("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(x=>{var y;return(y=x.data)===null||y===void 0?void 0:y.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:h};const{data:f,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:o},{create:l});return f?this._verify({factorId:u.id,challengeId:f.challengeId,webauthn:{rpId:t,rpOrigins:n,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:p}}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new Fn("Unexpected error in register",u)}}}}rN();const bN={url:gj,storageKey:xj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Eg(r,e,t){return await t()}const Oa={};class _o{get jwks(){var e,t;return(t=(e=Oa[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Oa[this.storageKey]=Object.assign(Object.assign({},Oa[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Oa[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Oa[this.storageKey]=Object.assign(Object.assign({},Oa[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},bN),e);if(this.storageKey=l.storageKey,this.instanceID=(t=_o.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,_o.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Ft()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Xj({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=cy(l.fetch),this.lock=l.lock||Eg,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&Ft()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=tN:this.lock=Eg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wN(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:ly()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Sg(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Sg(this.memoryStorage)),Ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ay}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if(Ft()&&(t=Oj(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Ft()&&this.detectSessionInUrl&&n!=="none"){const{data:o,error:l}=await this._getSessionFromURL(t,n);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Nj(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:u,redirectType:h}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return be(t)?this._returnResult({error:t}):this._returnResult({error:new Fn("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,o;try{const l=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:zr}),{data:u,error:h}=l;if(h||!u)return this._returnResult({data:{user:null,session:null},error:h});const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(l){if(be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,n,o;try{let l;if("email"in e){const{email:x,password:y,options:b}=e;let w=null,N=null;this.flowType==="pkce"&&([w,N]=await Ra(this.storage,this.storageKey)),l=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:x,password:y,data:(t=b==null?void 0:b.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:w,code_challenge_method:N},xform:zr})}else if("phone"in e){const{phone:x,password:y,options:b}=e;l=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:y,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},channel:(o=b==null?void 0:b.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:zr})}else throw new Zl("You must provide either an email or phone number and a password");const{data:u,error:h}=l;if(h||!u)return await Ut(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(l){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:u,options:h}=e;t=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:jg})}else if("phone"in e){const{phone:l,password:u,options:h}=e;t=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:jg})}else throw new Zl("You must provide either an email or phone number and a password");const{data:n,error:o}=t;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!n||!n.session||!n.user){const l=new Ta;return this._returnResult({data:{user:null,session:null},error:l})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:o})}catch(t){if(be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,o,l,u,h,f,p,x,y,b;let w,N;if("message"in e)w=e.message,N=e.signature;else{const{chain:_,wallet:j,statement:P,options:T}=e;let C;if(Ft())if(typeof j=="object")C=j;else{const V=window;if("ethereum"in V&&typeof V.ethereum=="object"&&"request"in V.ethereum&&typeof V.ethereum.request=="function")C=V.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=j}const F=new URL((t=T==null?void 0:T.url)!==null&&t!==void 0?t:window.location.href),A=await C.request({method:"eth_requestAccounts"}).then(V=>V).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const K=dy(A[0]);let H=(n=T==null?void 0:T.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!H){const V=await C.request({method:"eth_chainId"});H=sN(V)}const z={domain:F.host,address:K,statement:P,uri:F.href,version:"1",chainId:H,nonce:(o=T==null?void 0:T.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=T==null?void 0:T.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(h=T==null?void 0:T.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(f=T==null?void 0:T.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(p=T==null?void 0:T.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(x=T==null?void 0:T.signInWithEthereum)===null||x===void 0?void 0:x.resources};w=aN(z),N=await C.request({method:"personal_sign",params:[nN(w),K]})}try{const{data:_,error:j}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:N},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:zr});if(j)throw j;if(!_||!_.session||!_.user){const P=new Ta;return this._returnResult({data:{user:null,session:null},error:P})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:j})}catch(_){if(be(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var t,n,o,l,u,h,f,p,x,y,b,w;let N,_;if("message"in e)N=e.message,_=e.signature;else{const{chain:j,wallet:P,statement:T,options:C}=e;let F;if(Ft())if(typeof P=="object")F=P;else{const K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))F=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=P}const A=new URL((t=C==null?void 0:C.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in F&&F.signIn){const K=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),T?{statement:T}:null));let H;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")H=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)H=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)N=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),_=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${A.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(o=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((f=C==null?void 0:C.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((p=C==null?void 0:C.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((y=(x=C==null?void 0:C.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||y===void 0)&&y.length?["Resources",...C.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const K=await F.signMessage(new TextEncoder().encode(N),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=K}}try{const{data:j,error:P}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:zn(_)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:zr});if(P)throw P;if(!j||!j.session||!j.user){const T=new Ta;return this._returnResult({data:{user:null,session:null},error:T})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:P})}catch(j){if(be(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(e){const t=await $n(this.storage,`${this.storageKey}-code-verifier`),[n,o]=(t??"").split("/");try{if(!n&&this.flowType==="pkce")throw new Sj;const{data:l,error:u}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:zr});if(await Ut(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const h=new Ta;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return l.session&&(await this._saveSession(l.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",l.session)},0)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),be(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:n,token:o,access_token:l,nonce:u}=e,h=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:zr}),{data:f,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f||!f.session||!f.user){const x=new Ta;return this._returnResult({data:{user:null,session:null},error:x})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:p})}catch(t){if(be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,o,l,u;try{if("email"in e){const{email:h,options:f}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Ra(this.storage,this.storageKey));const{error:y}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},create_user:(n=f==null?void 0:f.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:h,options:f}=e,{data:p,error:x}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(o=f==null?void 0:f.data)!==null&&o!==void 0?o:{},create_user:(l=f==null?void 0:f.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(u=f==null?void 0:f.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:x})}throw new Zl("You must provide either an email or phone number.")}catch(h){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),be(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var t,n;try{let o,l;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:u,error:h}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:zr});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,p=u.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(o){if(be(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var t,n,o,l,u;try{let h=null,f=null;this.flowType==="pkce"&&([h,f]=await Ra(this.storage,this.storageKey));const p=await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:f}),headers:this.headers,xform:Qj});return!((l=p.data)===null||l===void 0)&&l.url&&Ft()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),be(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new pr;const{error:o}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(be(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:o,options:l}=e,{error:u}=await Ce(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:n,type:o,options:l}=e,{data:u,error:h}=await Ce(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new Zl("You must provide either an email or phone number and a type")}catch(t){if(be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await $n(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Nd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const u=await $n(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Ed()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=Wj(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:sn}):await this._useSession(async t=>{var n,o,l;const{data:u,error:h}=t;if(h)throw h;return!(!((n=u.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pr}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:sn})})}catch(t){if(be(t))return jj(t)&&(await this._removeSession(),await Ut(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:o,error:l}=n;if(l)throw l;if(!o.session)throw new pr;const u=o.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await Ra(this.storage,this.storageKey));const{data:p,error:x}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:sn});if(x)throw x;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(n){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),be(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pr;const t=Date.now()/1e3;let n=t,o=!0,l=null;const{payload:u}=kd(e.access_token);if(u.exp&&(n=u.exp,o=n<=t),o){const{data:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)throw f;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(be(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:u,error:h}=t;if(h)throw h;e=(n=u.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new pr;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Ft())throw new Yl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new gg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yl("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gg("No code detected.");const{data:T,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:h,expires_at:f,token_type:p}=e;if(!l||!h||!u||!p)throw new Yl("No session defined in URL");const x=Math.round(Date.now()/1e3),y=parseInt(h);let b=x+y;f&&(b=parseInt(f));const w=b-x;w*1e3<=Ua&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${y}s`);const N=b-y;x-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,b,x):x-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,b,x);const{data:_,error:j}=await this._getUser(l);if(j)throw j;const P={provider_token:n,provider_refresh_token:o,access_token:l,expires_in:y,expires_at:b,refresh_token:u,token_type:p,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:P,redirectType:e.type},error:null})}catch(n){if(be(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await $n(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:o,error:l}=t;if(l)return this._returnResult({error:l});const u=(n=o.session)===null||n===void 0?void 0:n.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(_j(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await Ut(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Aj(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,o;try{const{data:{session:l},error:u}=t;if(u)throw u;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let n=null,o=null;this.flowType==="pkce"&&([n,o]=await Ra(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),be(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:o}=await this._useSession(async l=>{var u,h,f,p,x;const{data:y,error:b}=l;if(b)throw b;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",w,{headers:this.headers,jwt:(x=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(o)throw o;return Ft()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(be(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:o,data:{session:l}}=t;if(o)throw o;const{options:u,provider:h,token:f,access_token:p,nonce:x}=e,y=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=l==null?void 0:l.access_token)!==null&&n!==void 0?n:void 0,body:{provider:h,id_token:f,access_token:p,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:zr}),{data:b,error:w}=y;return w?this._returnResult({data:{user:null,session:null},error:w}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Ta}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:w}))}catch(o){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),be(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,o;const{data:l,error:u}=t;if(u)throw u;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await $j(async o=>(o>0&&await Dj(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:zr})),(o,l)=>{const u=200*Math.pow(2,o);return l&&Sd(l)&&Date.now()+u-n<Ua})}catch(n){if(this._debug(t,"error",n),be(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ft()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const o=await $n(this.storage,this.storageKey);if(o&&this.userStorage){let u=await $n(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Fa(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Ed()}else if(o&&!o.user&&!o.user){const u=await $n(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await Ut(this.storage,this.storageKey+"-user"),await Fa(this.storage,this.storageKey,o)):o.user=Ed()}if(this._debug(n,"session from storage",o),!this._isValidSession(o)){this._debug(n,"session is not valid"),o!==null&&await this._removeSession();return}const l=((t=o.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Nd;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${Nd}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Sd(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(o.access_token);!h&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(n,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(n,"error",o),console.error(o);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new pr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Sc;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new pr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={data:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(o,"error",l),be(l)){const u={data:null,error:l};return Sd(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,n=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,t)}catch(f){l.push(f)}});if(await Promise.all(u),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ut(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await Fa(this.userStorage,this.storageKey+"-user",{user:t.user});const o=Object.assign({},t);delete o.user;const l=bg(o);await Fa(this.storage,this.storageKey,l)}else{const o=bg(t);await Fa(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ut(this.storage,this.storageKey),await Ut(this.storage,this.storageKey+"-code-verifier"),await Ut(this.storage,this.storageKey+"-user"),this.userStorage&&await Ut(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ft()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ua);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((n.expires_at*1e3-e)/Ua);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Ua}ms, refresh threshold is ${ih} ticks`),o<=ih&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof uy)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ft()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const o=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&o.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&o.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[l,u]=await Ra(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(h.toString())}if(n!=null&&n.queryParams){const l=new URLSearchParams(n.queryParams);o.push(l.toString())}return n!=null&&n.skipBrowserRedirect&&o.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:o,error:l}=t;return l?this._returnResult({data:null,error:l}):await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,o;const{data:l,error:u}=t;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:p}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&f.type==="totp"&&(!((o=f==null?void 0:f.totp)===null||o===void 0)&&o.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?hN(e.webauthn.credential_response):fN(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:f}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:f}))})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});if(u.error)return u;const{data:h}=u;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:uN(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:dN(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=kd(n.access_token);let u=null;l.aal&&(u=l.aal);let h=u;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(x=>x.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(h="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:o}=t;return o?this._returnResult({data:null,error:o}):n?await Ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new pr})})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:o},error:l}=n;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new pr});const u=await Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&Ft()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:o},error:l}=n;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new pr});const u=await Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&Ft()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await Ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new pr})})}catch(e){if(be(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:o}=t;return o?this._returnResult({data:null,error:o}):n?(await Ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new pr})})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(h=>h.kid===e);if(n)return n;const o=Date.now();if(n=this.jwks.keys.find(h=>h.kid===e),n&&this.jwks_cached_at+wj>o)return n;const{data:l,error:u}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,n=l.keys.find(h=>h.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:w,error:N}=await this.getSession();if(N||!w.session)return this._returnResult({data:null,error:N});n=w.session.access_token}const{header:o,payload:l,signature:u,raw:{header:h,payload:f}}=kd(n);t!=null&&t.allowExpired||Vj(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:w}=await this.getUser(n);if(w)throw w;return{data:{claims:l,header:o,signature:u},error:null}}const x=qj(o.alg),y=await crypto.subtle.importKey("jwk",p,x,!0,["verify"]);if(!await crypto.subtle.verify(x,y,u,Rj(`${h}.${f}`)))throw new ch("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}}_o.nextInstanceID={};const _N=_o,jN="2.91.0";let lo="";typeof Deno<"u"?lo="deno":typeof document<"u"?lo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?lo="react-native":lo="node";const NN={"X-Client-Info":`supabase-js-${lo}/${jN}`},SN={headers:NN},kN={schema:"public"},EN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},CN={};function jo(r){"@babel/helpers - typeof";return jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(r)}function TN(r,e){if(jo(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(jo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function RN(r){var e=TN(r,"string");return jo(e)=="symbol"?e:e+""}function PN(r,e,t){return(e=RN(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Cg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function yt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Cg(Object(t),!0).forEach(function(n){PN(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Cg(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}const AN=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),ON=()=>Headers,IN=(r,e,t)=>{const n=AN(t),o=ON();return async(l,u)=>{var h;const f=(h=await e())!==null&&h!==void 0?h:r;let p=new o(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),n(l,yt(yt({},u),{},{headers:p}))}};function DN(r){return r.endsWith("/")?r:r+"/"}function $N(r,e){var t,n;const{db:o,auth:l,realtime:u,global:h}=r,{db:f,auth:p,realtime:x,global:y}=e,b={db:yt(yt({},f),o),auth:yt(yt({},p),l),realtime:yt(yt({},x),u),storage:{},global:yt(yt(yt({},y),h),{},{headers:yt(yt({},(t=y==null?void 0:y.headers)!==null&&t!==void 0?t:{}),(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return r.accessToken?b.accessToken=r.accessToken:delete b.accessToken,b}function LN(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(DN(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var UN=class extends _N{constructor(r){super(r)}},FN=class{constructor(r,e,t){var n,o;this.supabaseUrl=r,this.supabaseKey=e;const l=LN(r);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:kN,realtime:CN,auth:yt(yt({},EN),{},{storageKey:u}),global:SN},f=$N(t??{},h);if(this.storageKey=(n=f.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(x,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=f.auth)!==null&&p!==void 0?p:{},this.headers,f.global.fetch)}this.fetch=IN(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(yt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new y_(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new pj(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new f_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,e,t)}channel(r,e={config:{}}){return this.realtime.channel(r,e)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,e,t;if(r.accessToken)return await r.accessToken();const{data:n}=await r.auth.getSession();return(e=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:o,storageKey:l,flowType:u,lock:h,debug:f,throwOnError:p},x,y){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new UN({url:this.authUrl.href,headers:yt(yt({},b),x),storageKey:l,autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:o,flowType:u,lock:h,debug:f,throwOnError:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new D_(this.realtimeUrl.href,yt(yt({},r),{},{params:yt(yt({},{apikey:this.supabaseKey}),r==null?void 0:r.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,e)=>{this._handleTokenChanged(r,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(r,e,t){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Uh=(r,e,t)=>new FN(r,e,t);function MN(){if(typeof window<"u")return!1;const r=globalThis.process;if(!r)return!1;const e=r.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}MN()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fy="https://xvkxccqaopbnkvwgyfjv.supabase.co",zN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2a3hjY3Fhb3Bibmt2d2d5Zmp2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4MjMwMTIsImV4cCI6MjA2MzM5OTAxMn0.z9UkKHDm4RPMs_2IIzEPEYzd3-sbQSF6XpxaQg3vZhU",BN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2a3hjY3Fhb3Bibmt2d2d5Zmp2Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NzgyMzAxMiwiZXhwIjoyMDYzMzk5MDEyfQ.priN_SHguFTwZu47KUwtUNzN5jkmNFDGgAQy4rvdMXw",Re=Uh(fy,zN,{auth:{persistSession:!0,autoRefreshToken:!0}}),my=Uh(fy,BN,{auth:{persistSession:!1,autoRefreshToken:!1}}),VN=Object.freeze(Object.defineProperty({__proto__:null,supabase:Re,supabaseAdmin:my},Symbol.toStringTag,{value:"Module"})),eo={"admin@hopehospital.com":{password:"admin123",profile:{id:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa",email:"admin@hopehospital.com",full_name:"Super Administrator",phone:"+91-9876543210",role:"super_admin",hospital_id:void 0,hospital_name:void 0,can_approve_appeals:!0,can_view_financials:!0,can_export_data:!0,status:"active",last_login_at:new Date().toISOString(),created_at:"2026-01-11T00:00:00Z",updated_at:new Date().toISOString()}},"hope@hopehospital.com":{password:"hope123",profile:{id:"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb",email:"hope@hopehospital.com",full_name:"Hope Hospital Admin",phone:"+91-9876543211",role:"hospital_admin",hospital_id:"hope-hospital-id",hospital_name:"Hope Hospital",can_approve_appeals:!0,can_view_financials:!0,can_export_data:!0,status:"active",last_login_at:new Date().toISOString(),created_at:"2026-01-11T00:00:00Z",updated_at:new Date().toISOString()}},"staff@hopehospital.com":{password:"staff123",profile:{id:"cccccccc-cccc-cccc-cccc-cccccccccccc",email:"staff@hopehospital.com",full_name:"Billing Staff Member",phone:"+91-9876543212",role:"staff",hospital_id:"hope-hospital-id",hospital_name:"Hope Hospital",can_approve_appeals:!1,can_view_financials:!1,can_export_data:!1,status:"active",last_login_at:new Date().toISOString(),created_at:"2026-01-11T00:00:00Z",updated_at:new Date().toISOString()}}},_s={SESSION:"zerorisk_mock_session",USER:"zerorisk_mock_user",PROFILE:"zerorisk_mock_profile"};class qN{constructor(){mr(this,"currentSession",null);mr(this,"currentUser",null);mr(this,"currentProfile",null);this.loadSavedSession()}loadSavedSession(){try{const e=localStorage.getItem(_s.SESSION),t=localStorage.getItem(_s.USER),n=localStorage.getItem(_s.PROFILE);if(e&&t&&n){const o=JSON.parse(e);Date.now()<o.expires_at?(this.currentSession=o,this.currentUser=JSON.parse(t),this.currentProfile=JSON.parse(n)):this.signOut()}}catch(e){console.error("Error loading saved session:",e),this.signOut()}}saveSession(e,t,n){localStorage.setItem(_s.SESSION,JSON.stringify(e)),localStorage.setItem(_s.USER,JSON.stringify(t)),localStorage.setItem(_s.PROFILE,JSON.stringify(n))}clearSession(){localStorage.removeItem(_s.SESSION),localStorage.removeItem(_s.USER),localStorage.removeItem(_s.PROFILE)}async signIn(e,t){return new Promise(n=>{setTimeout(()=>{const o=eo[e.toLowerCase()];if(!o||o.password!==t){n({session:null,error:"Invalid email or password"});return}const l={id:o.profile.id,email:o.profile.email,created_at:o.profile.created_at,updated_at:o.profile.updated_at},u={access_token:`mock_token_${Date.now()}`,refresh_token:`mock_refresh_${Date.now()}`,expires_at:Date.now()+1440*60*1e3,user:l};o.profile.last_login_at=new Date().toISOString(),this.currentSession=u,this.currentUser=l,this.currentProfile=o.profile,this.saveSession(u,l,o.profile),n({session:u,error:null})},500)})}async signUp(e,t,n){return new Promise(o=>{setTimeout(()=>{if(eo[e.toLowerCase()]){o({user:null,error:"User already exists"});return}const l=`mock_${Date.now()}`,u=new Date().toISOString(),h={id:l,email:e,created_at:u,updated_at:u},f={id:l,email:e,full_name:n.full_name,role:n.role,hospital_id:n.hospital_id,hospital_name:n.hospital_id==="hope-hospital-id"?"Hope Hospital":void 0,can_approve_appeals:n.role==="hospital_admin"||n.role==="super_admin",can_view_financials:n.role==="hospital_admin"||n.role==="super_admin",can_export_data:n.role==="hospital_admin"||n.role==="super_admin",status:"active",created_at:u,updated_at:u};eo[e.toLowerCase()]={password:t,profile:f},o({user:h,error:null})},800)})}async signOut(){this.currentSession=null,this.currentUser=null,this.currentProfile=null,this.clearSession()}getSession(){return{session:this.currentSession,user:this.currentUser}}getProfile(){return this.currentProfile}onAuthStateChange(e){return e(this.currentSession),{unsubscribe:()=>{}}}async updateProfile(e){return new Promise(t=>{setTimeout(()=>{if(!this.currentProfile||!this.currentUser){t({error:"No user logged in"});return}this.currentProfile={...this.currentProfile,...e,updated_at:new Date().toISOString()};const n=this.currentUser.email;eo[n]&&(eo[n].profile=this.currentProfile),this.currentSession&&this.saveSession(this.currentSession,this.currentUser,this.currentProfile),t({error:null})},300)})}}const ss=new qN,HN="https://xvkxccqaopbnkvwgyfjv.supabase.co",WN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2a3hjY3Fhb3Bibmt2d2d5Zmp2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4MjMwMTIsImV4cCI6MjA2MzM5OTAxMn0.z9UkKHDm4RPMs_2IIzEPEYzd3-sbQSF6XpxaQg3vZhU",Tr=Uh(HN,WN);class KN{constructor(){mr(this,"currentUser",null);this.loadSavedUser()}isAvailable(){return Tr!==null}loadSavedUser(){try{const e=localStorage.getItem("zerorisk_supabase_user");if(e){const t=JSON.parse(e);this.currentUser=t,this.verifyUser(t.id).then(n=>{n||(console.log("User verification failed, signing out"),this.signOut())}).catch(n=>{console.error("User verification error:",n)})}}catch(e){console.error("Error loading saved user:",e),this.currentUser=null,this.clearUser()}}saveUser(e){localStorage.setItem("zerorisk_supabase_user",JSON.stringify(e))}clearUser(){localStorage.removeItem("zerorisk_supabase_user")}async verifyUser(e){if(!Tr)return!1;try{const{data:t,error:n}=await Tr.from("zero_login_user").select("id").eq("id",e).eq("status","active").single();return!n&&t!==null}catch{return!1}}async signIn(e,t){if(!Tr)return{user:null,error:"Database connection not available"};try{const{data:n,error:o}=await Tr.from("zero_login_user").select("*").eq("email",e.toLowerCase()).eq("password",t).eq("status","active").single();if(o||!n)return{user:null,error:"Invalid email or password"};const l={id:n.id,email:n.email,full_name:n.full_name,password:n.password,role:n.role,status:n.status,created_at:n.created_at};return this.currentUser=l,this.saveUser(l),{user:l,error:null}}catch(n){return console.error("Login error:",n),{user:null,error:n instanceof Error?n.message:"Login failed"}}}async signUp(e,t,n){if(!Tr)return{user:null,error:"Database connection not available"};try{const{data:o}=await Tr.from("zero_login_user").select("email").eq("email",e.toLowerCase()).single();if(o)return{user:null,error:"User already exists"};const{data:l,error:u}=await Tr.from("zero_login_user").insert({email:e.toLowerCase(),password:t,full_name:n.full_name,role:n.role,status:"active"}).select().single();return u||!l?{user:null,error:(u==null?void 0:u.message)||"Failed to create user"}:{user:{id:l.id,email:l.email,full_name:l.full_name,password:l.password,role:l.role,status:l.status,created_at:l.created_at},error:null}}catch(o){return console.error("Signup error:",o),{user:null,error:o instanceof Error?o.message:"Signup failed"}}}async signOut(){this.currentUser=null,this.clearUser()}getCurrentUser(){return this.currentUser}async updateProfile(e){if(!Tr||!this.currentUser)return{error:"Not authenticated"};try{const{data:t,error:n}=await Tr.from("zero_login_user").update(e).eq("id",this.currentUser.id).select().single();return n||!t?{error:(n==null?void 0:n.message)||"Failed to update profile"}:(this.currentUser={...this.currentUser,...e},this.saveUser(this.currentUser),{error:null})}catch(t){return console.error("Update profile error:",t),{error:t instanceof Error?t.message:"Update failed"}}}async getAllUsers(){if(!Tr)return{users:null,error:"Database connection not available"};try{const{data:e,error:t}=await Tr.from("zero_login_user").select("*").order("created_at",{ascending:!1});return t?{users:null,error:t.message}:{users:e||[],error:null}}catch(e){return console.error("Get users error:",e),{users:null,error:e instanceof Error?e.message:"Failed to fetch users"}}}}const to=new KN,py=S.createContext(void 0);function GN({children:r}){const[e,t]=S.useState(null),[n,o]=S.useState(null),[l,u]=S.useState(null),[h,f]=S.useState(!0),[p,x]=S.useState(!1),y=()=>!to.isAvailable();S.useEffect(()=>{const V=y();x(V),V?(console.log(" Using Mock Authentication Mode"),b()):(console.log(" Using Database Authentication (zero_login_user)"),w())},[]);const b=()=>{const{session:V,user:W}=ss.getSession(),Z=ss.getProfile();u(V),t(W),o(Z),f(!1),ss.onAuthStateChange(ae=>{u(ae),t((ae==null?void 0:ae.user)||null),o(ss.getProfile())})},w=()=>{const V=to.getCurrentUser();if(V){console.log("Auth initialized with user:",V.email,"role:",V.role),t(V);const W={id:V.id,email:V.email,full_name:V.full_name,role:V.role,can_approve_appeals:V.role==="super_admin"||V.role==="hospital_admin",can_view_financials:V.role==="super_admin"||V.role==="hospital_admin",can_export_data:V.role==="super_admin"||V.role==="hospital_admin",status:V.status};o(W)}else console.log("Auth initialized: no saved user found");f(!1)},N=async V=>{var W;try{f(!0);const{data:Z,error:ae}=await Re.from("users").select(`
          *,
          hospitals:hospital_id (
            name
          )
        `).eq("id",V).single();if(ae){console.error("Error fetching profile:",ae);return}if(Z){const de={id:Z.id,email:Z.email,full_name:Z.full_name,phone:Z.phone,role:Z.role,hospital_id:Z.hospital_id,hospital_name:(W=Z.hospitals)==null?void 0:W.name,can_approve_appeals:Z.can_approve_appeals,can_view_financials:Z.can_view_financials,can_export_data:Z.can_export_data,status:Z.status,last_login_at:Z.last_login_at};o(de),await Re.from("users").update({last_login_at:new Date().toISOString()}).eq("id",V)}}catch(Z){console.error("Error in fetchProfile:",Z)}finally{f(!1)}},_=async(V,W,Z)=>{if(p){const{user:_e,error:$e}=await ss.signUp(V,W,Z);return{error:$e?new Error($e):null}}const{user:ae,error:de}=await to.signUp(V,W,{full_name:Z.full_name,role:Z.role});return de?{error:new Error(de)}:{error:null}},j=async(V,W)=>{if(p){const{session:de,error:_e}=await ss.signIn(V,W);return de&&(u(de),t(de.user),o(ss.getProfile())),{error:_e?new Error(_e):null}}const{user:Z,error:ae}=await to.signIn(V,W);if(ae)return{error:new Error(ae)};if(Z){t(Z);const de={id:Z.id,email:Z.email,full_name:Z.full_name,role:Z.role,can_approve_appeals:Z.role==="super_admin"||Z.role==="hospital_admin",can_view_financials:Z.role==="super_admin"||Z.role==="hospital_admin",can_export_data:Z.role==="super_admin"||Z.role==="hospital_admin",status:Z.status};o(de)}return{error:null}},P=async()=>{p?await ss.signOut():await to.signOut(),u(null),t(null),o(null)},T=async V=>{if(p){const{error:W}=await ss.updateProfile(V);return W||o(ss.getProfile()),{error:W?new Error(W):null}}if(!e)return{error:"No user found"};try{const{error:W}=await Re.from("users").update(V).eq("id",e.id);return W?{error:W}:(await N(e.id),{error:null})}catch(W){return{error:W}}},C=(n==null?void 0:n.role)==="hospital_admin"||(n==null?void 0:n.role)==="super_admin",F=(n==null?void 0:n.role)==="super_admin",A=(n==null?void 0:n.can_view_financials)||!1,K=(n==null?void 0:n.can_export_data)||!1,H=(n==null?void 0:n.can_approve_appeals)||!1,z={user:e,profile:n,session:l,loading:h,signUp:_,signIn:j,signOut:P,updateProfile:T,isAdmin:C,isSuperAdmin:F,canViewFinancials:A,canExportData:K,canApproveAppeals:H,isMockMode:p};return i.jsx(py.Provider,{value:z,children:r})}const JN=()=>{const r=S.useContext(py);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},Jr=JN;function ns({children:r,requiredRole:e,requireFinancialAccess:t=!1,requireApprovalAccess:n=!1}){const{user:o,profile:l,loading:u}=Jr(),h=Gr();if(u)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("span",{className:"material-icon text-primary-600 animate-pulse",style:{fontSize:"48px"},children:"autorenew"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!o||!l)return i.jsx(Hx,{to:"/login",state:{from:h},replace:!0});if(l.status!=="active")return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"max-w-md text-center",children:[i.jsx("span",{className:"material-icon text-red-600 mb-4",style:{fontSize:"64px"},children:"block"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Suspended"}),i.jsxs("p",{className:"text-gray-600",children:["Your account has been ",l.status,". Please contact your administrator."]})]})});if(e){const f=Array.isArray(e)?e:[e];if(!f.includes(l.role))return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"max-w-md text-center",children:[i.jsx("span",{className:"material-icon text-orange-600 mb-4",style:{fontSize:"64px"},children:"security"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),i.jsxs("p",{className:"text-gray-600",children:["You don't have permission to access this page. Required role: ",f.join(" or "),"."]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Your current role: ",l.role]})]})})}return t&&!l.can_view_financials?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"max-w-md text-center",children:[i.jsx("span",{className:"material-icon text-orange-600 mb-4",style:{fontSize:"64px"},children:"account_balance"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Financial Access Required"}),i.jsx("p",{className:"text-gray-600",children:"You don't have permission to view financial data. Contact your administrator."})]})}):n&&!l.can_approve_appeals?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"max-w-md text-center",children:[i.jsx("span",{className:"material-icon text-orange-600 mb-4",style:{fontSize:"64px"},children:"gavel"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Approval Access Required"}),i.jsx("p",{className:"text-gray-600",children:"You don't have permission to approve appeals. Contact your administrator."})]})}):i.jsx(i.Fragment,{children:r})}const Tg=[{stage:"ESIC Referral",statuses:[{status:"Patient Referral",inPatient:28,opd:65,counts:93,enhancement:0},{status:"Need More Information [Ref]",inPatient:0,opd:0,counts:0,enhancement:0,isHighlighted:!0}]},{stage:"Hospital Intimation",statuses:[{status:"EIR To Model Hospital",inPatient:11,opd:0,counts:11,enhancement:0},{status:"Intimation Acknowledged",inPatient:5,opd:0,counts:5,enhancement:0}]},{stage:"BPA Acknowledgement",statuses:[{status:"Need More Information [Int]",inPatient:0,opd:0,counts:0,enhancement:0,isHighlighted:!0}]},{stage:"Hospital Submission",statuses:[{status:"Claim Submitted Electronically - More Info",inPatient:36,opd:0,counts:36,enhancement:0,isHighlighted:!0}]},{stage:"ESIC - Document Receiver",statuses:[{status:"Document Received",inPatient:0,opd:0,counts:0,enhancement:0,isHighlighted:!0}]},{stage:"ESIC - Document Verifier",statuses:[{status:"Recommended for Rejection",inPatient:0,opd:0,counts:0,enhancement:0,isHighlighted:!0}]},{stage:"BPA Scrutinizer",statuses:[{status:"Scrutinizer Verified",inPatient:9,opd:1,counts:10,enhancement:0},{status:"Need More Info [Scr]",inPatient:3,opd:0,counts:3,enhancement:0,isHighlighted:!0},{status:"Recommended for Rejection",inPatient:5,opd:0,counts:5,enhancement:0,isHighlighted:!0}]},{stage:"ESIC - Medical Officer L1",statuses:[{status:"Claim Authorized",inPatient:20,opd:0,counts:20,enhancement:0},{status:"Need More Information [Val]",inPatient:0,opd:0,counts:0,enhancement:0,isHighlighted:!0},{status:"Recommended for Rejection",inPatient:1,opd:0,counts:1,enhancement:0,isHighlighted:!0},{status:"Recommended for Approval",inPatient:10,opd:0,counts:10,enhancement:0}]},{stage:"ESIC - Medical Officer L2",statuses:[{status:"Review By Validator",inPatient:1,opd:0,counts:1,enhancement:0},{status:"Need More Information [App]",inPatient:24,opd:0,counts:24,enhancement:0,isHighlighted:!0},{status:"Recommended for Rejection",inPatient:1,opd:0,counts:1,enhancement:0,isHighlighted:!0}]},{stage:"ESIC - CFA Sanction",statuses:[{status:"Rejected",inPatient:0,opd:0,counts:0,enhancement:0,isHighlighted:!0}]},{stage:"ESIC - Accounts",statuses:[{status:"Proceed for Payment (by ESIC)",inPatient:5,opd:0,counts:5,enhancement:0},{status:"Rejected Claims",inPatient:0,opd:0,counts:0,enhancement:0,isHighlighted:!0}]},{stage:"BPA Maintenance",statuses:[{status:"Inactive Intimations",inPatient:0,opd:0,counts:0,enhancement:0},{status:"Inactive Submission",inPatient:0,opd:0,counts:0,enhancement:0}]}];function gy(){var K;Jr();const[r,e]=S.useState("ESI Hospital/ RO/ DCBO"),[t,n]=S.useState(""),[o,l]=S.useState(null),[u,h]=S.useState(!0),[f,p]=S.useState(null),[x,y]=S.useState([]),[b,w]=S.useState("");S.useEffect(()=>{N(),j(),T()},[]),S.useEffect(()=>{b&&P(b)},[b]);const N=()=>{try{const H=localStorage.getItem("tempESICData");if(H){const z=JSON.parse(H);p(z),e(z.hospitalName),localStorage.removeItem("tempESICData")}}catch(H){console.error("Error parsing temp dashboard data:",H)}},_=async()=>{if(f)try{console.log("Saving temp data:",f);const{data:H,error:z}=await Re.from("esic_claims_extractions").insert({hospital_name:f.hospitalName,extracted_at:f.extractedAt,total_claims:f.totalClaims,stage_data:f.stageData,payer_type:f.panelType||"esic"}).select();z?(console.error("Detailed error saving temp data:",z),alert(`Failed to save data: ${z.message}`)):(console.log("Temp data saved successfully:",H),l(f),p(null),j(),alert("Data saved to database successfully!"))}catch(H){console.error("Catch block error:",H),alert(`Failed to save data: ${H instanceof Error?H.message:"Unknown error"}`)}},j=async()=>{try{const{data:H,error:z}=await Re.from("esic_claims_extractions").select("extracted_at").order("extracted_at",{ascending:!1});if(z){console.error("Error fetching available dates:",z);return}if(H&&H.length>0){const V=H.map(Z=>new Date(Z.extracted_at).toISOString().split("T")[0]),W=[...new Set(V)];y(W)}}catch(H){console.error("Error fetching available dates:",H)}},P=async H=>{try{h(!0);const z=`${H}T00:00:00Z`,V=`${H}T23:59:59Z`,{data:W,error:Z}=await Re.from("esic_claims_extractions").select("*").gte("extracted_at",z).lte("extracted_at",V).order("created_at",{ascending:!1}).limit(1).single();if(Z&&Z.code!=="PGRST116")throw Z;l(W?{panelType:W.payer_type||"esic",hospitalName:W.hospital_name,extractedAt:W.extracted_at,totalClaims:W.total_claims,stageData:W.stage_data}:null)}catch(z){console.error("Error fetching claims data by date:",z)}finally{h(!1)}},T=async()=>{try{h(!0);const{data:H,error:z}=await Re.from("esic_claims_extractions").select("*").order("created_at",{ascending:!1}).limit(1).single();if(z&&z.code!=="PGRST116")throw z;H?(l({panelType:H.payer_type||"esic",hospitalName:H.hospital_name,extractedAt:H.extracted_at,totalClaims:H.total_claims,stageData:H.stage_data}),e(H.hospital_name)):l(null)}catch(H){console.error("Error fetching claims data:",H)}finally{h(!1)}},C=f||o,F=(K=C==null?void 0:C.stageData)!=null&&K.length?C.stageData:Tg,A=C?C.totalClaims:Tg.reduce((H,z)=>(z.statuses.forEach(V=>{H.inPatient+=V.inPatient,H.opd+=V.opd,H.counts+=V.counts,H.enhancement+=V.enhancement}),H),{inPatient:0,opd:0,counts:0,enhancement:0});return u?i.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("span",{className:"material-icon text-primary-600 animate-pulse",style:{fontSize:"48px"},children:"autorenew"}),i.jsx("p",{className:"text-gray-600",children:"Loading claims dashboard..."})]})}):i.jsxs("div",{className:"min-h-screen bg-white",children:[i.jsx("div",{className:"bg-white border-b border-gray-300 px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:r}),i.jsxs("select",{className:"bg-yellow-200 border border-gray-400 rounded px-3 py-1 text-sm font-medium",value:r,onChange:H=>e(H.target.value),children:[i.jsx("option",{value:"ESI Hospital/ RO/ DCBO",children:"Select Hospital"}),i.jsx("option",{value:"Hope Hospital Mumbai",children:"Hope Hospital Mumbai"}),i.jsx("option",{value:"City Care Hospital Delhi",children:"City Care Hospital Delhi"}),i.jsx("option",{value:"Metro Clinic Bangalore",children:"Metro Clinic Bangalore"})]}),x.length>0&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View Date:"}),i.jsxs("select",{className:"bg-blue-100 border border-gray-400 rounded px-3 py-1 text-sm font-medium",value:b,onChange:H=>w(H.target.value),children:[i.jsx("option",{value:"",children:"Latest Data"}),x.map(H=>i.jsx("option",{value:H,children:new Date(H).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})},H))]})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Hospital"}),i.jsxs("div",{className:"flex items-center gap-3",children:[f&&i.jsxs("div",{className:"flex items-center gap-2 bg-blue-100 px-3 py-1 rounded-full",children:[i.jsx("span",{className:"material-icon text-blue-600",style:{fontSize:"16px"},children:"preview"}),i.jsx("span",{className:"text-xs text-blue-700 font-medium",children:"Extracted Data"})]}),!f&&o&&b&&i.jsxs("div",{className:"flex items-center gap-2 bg-purple-100 px-3 py-1 rounded-full",children:[i.jsx("span",{className:"material-icon text-purple-600",style:{fontSize:"16px"},children:"history"}),i.jsx("span",{className:"text-xs text-purple-700 font-medium",children:"Historical Data"})]}),!f&&o&&!b&&i.jsxs("div",{className:"flex items-center gap-2 bg-green-100 px-3 py-1 rounded-full",children:[i.jsx("span",{className:"material-icon text-green-600",style:{fontSize:"16px"},children:"check_circle"}),i.jsx("span",{className:"text-xs text-green-700 font-medium",children:"Live Data"})]}),!f&&!o&&i.jsxs("div",{className:"flex items-center gap-2 bg-yellow-100 px-3 py-1 rounded-full",children:[i.jsx("span",{className:"material-icon text-yellow-600",style:{fontSize:"16px"},children:"info"}),i.jsx("span",{className:"text-xs text-yellow-700 font-medium",children:"Demo Data"})]}),f&&i.jsxs("button",{onClick:_,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded text-sm font-medium flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"16px"},children:"save"}),"SAVE DATA"]}),i.jsxs("button",{onClick:T,className:"bg-teal-600 hover:bg-teal-700 text-white px-6 py-2 rounded text-sm font-medium flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"16px"},children:"refresh"}),"REFRESH"]})]})]})]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"overflow-x-auto border border-gray-400",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-teal-100 border-b border-gray-400",children:[i.jsx("th",{className:"border-r border-gray-400 px-4 py-3 text-left font-semibold text-gray-800 w-40",children:"Stage"}),i.jsx("th",{className:"border-r border-gray-400 px-4 py-3 text-left font-semibold text-gray-800 min-w-80",children:"Status"}),i.jsx("th",{className:"border-r border-gray-400 px-4 py-3 text-center font-semibold text-gray-800 w-20",children:"In Patient"}),i.jsx("th",{className:"border-r border-gray-400 px-4 py-3 text-center font-semibold text-gray-800 w-20",children:"OPD Patient"}),i.jsx("th",{className:"border-r border-gray-400 px-4 py-3 text-center font-semibold text-gray-800 w-20",children:"Counts"}),i.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-800 w-24",children:"Enhancement"})]})}),i.jsxs("tbody",{children:[F.map((H,z)=>(H.statuses||[]).map((V,W)=>i.jsxs("tr",{className:"border-b border-gray-300 hover:bg-gray-50",children:[W===0&&i.jsx("td",{rowSpan:(H.statuses||[]).length,className:"border-r border-gray-400 px-4 py-3 bg-teal-50 font-medium text-gray-800 align-top",children:H.stage}),i.jsx("td",{className:`border-r border-gray-400 px-4 py-3 ${V.isHighlighted?"text-red-700 font-medium":"text-gray-700"}`,children:V.status}),i.jsx("td",{className:"border-r border-gray-400 px-4 py-3 text-center text-gray-700",children:V.inPatient}),i.jsx("td",{className:"border-r border-gray-400 px-4 py-3 text-center text-gray-700",children:V.opd}),i.jsx("td",{className:"border-r border-gray-400 px-4 py-3 text-center text-gray-700",children:V.counts}),i.jsx("td",{className:"px-4 py-3 text-center text-gray-700",children:V.enhancement})]},`${z}-${W}`))),i.jsxs("tr",{className:"bg-yellow-100 border-t-2 border-gray-400 font-semibold",children:[i.jsx("td",{className:"border-r border-gray-400 px-4 py-3 text-gray-800"}),i.jsx("td",{className:"border-r border-gray-400 px-4 py-3 text-gray-800 font-bold",children:"Total Claims"}),i.jsx("td",{className:"border-r border-gray-400 px-4 py-3 text-center text-gray-800",children:A.inPatient}),i.jsx("td",{className:"border-r border-gray-400 px-4 py-3 text-center text-gray-800",children:A.opd}),i.jsx("td",{className:"border-r border-gray-400 px-4 py-3 text-center text-gray-800",children:A.counts}),i.jsx("td",{className:"px-4 py-3 text-center text-gray-800",children:A.enhancement})]})]})]})}),i.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[i.jsx("span",{className:"text-sm text-gray-700",children:"Get Claim Status for ID"}),i.jsx("input",{type:"text",value:t,onChange:H=>n(H.target.value),className:"border border-gray-400 px-3 py-1 text-sm w-48",placeholder:"Enter claim ID..."}),i.jsx("button",{className:"bg-teal-600 hover:bg-teal-700 text-white px-6 py-1.5 text-sm font-medium",children:"CLAIM STATUS"})]})]}),i.jsx("footer",{className:"mt-8 py-6 border-t border-gray-200 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-xs text-gray-400",children:[i.jsx("p",{children:"v1.7 | Last Updated: 2026-01-21 | zeroriskagent.com | Claims Tracking System"}),f&&i.jsx("p",{className:"mt-1 text-blue-600",children:'Extracted data from upload  Data not yet saved to database  Click "SAVE DATA" to store permanently'}),!f&&o&&b&&i.jsxs("p",{className:"mt-1 text-purple-600",children:["Historical data from ",new Date(o.extractedAt).toLocaleDateString("en-IN"),'  Select "Latest Data" to view current data']}),!f&&o&&!b&&i.jsxs("p",{className:"mt-1 text-green-600",children:["Data extracted on ",new Date(o.extractedAt).toLocaleDateString("en-IN"),"  Upload new dashboard image to update"]}),!f&&!o&&i.jsxs("p",{className:"mt-1 text-yellow-600",children:["Demo data  Upload dashboard image at ",i.jsx("a",{href:"/upload",className:"underline hover:text-yellow-700",children:"/upload"})," for live data"]})]})})]})}async function xy(){const{data:r,error:e}=await Re.from("bill_preparation").select("bill_amount, received_amount, deduction_amount, nmi, received_date");if(e)throw console.error("Error fetching bill_preparation:",e),e;const t=(r==null?void 0:r.reduce((p,x)=>p+(x.bill_amount||0),0))||0,n=(r==null?void 0:r.reduce((p,x)=>p+(x.received_amount||0),0))||0,o=(r==null?void 0:r.reduce((p,x)=>p+(x.deduction_amount||0),0))||0,l=(r==null?void 0:r.filter(p=>!p.received_date))||[],u=(r==null?void 0:r.filter(p=>p.received_date))||[],h=(r==null?void 0:r.filter(p=>p.nmi&&p.nmi.trim()!=="").length)||0;return{totalBills:(r==null?void 0:r.length)||0,totalAmount:t,pendingBills:l.length,pendingAmount:l.reduce((p,x)=>p+(x.bill_amount||0),0),receivedBills:u.length,receivedAmount:n,deductionAmount:o,nmiCount:h}}async function QN(){const{data:r,error:e}=await Re.from("bill_preparation").select("id, visit_id, bill_amount, received_amount, received_date, nmi, corporate");if(e)throw console.error("Error fetching bill_preparation:",e),e;const t=[...new Set((r==null?void 0:r.map(f=>f.visit_id).filter(Boolean))||[])],{data:n,error:o}=await Re.from("visits").select("visit_id, patient_id").in("visit_id",t);if(o)throw console.error("Error fetching visits:",o),o;const l=new Map(n==null?void 0:n.map(f=>[f.visit_id,f.patient_id])),u=new Map;return r==null||r.forEach(f=>{const p=f.corporate||"private",x=l.get(f.visit_id);u.has(p)||u.set(p,{payer_type:p,total_bills:0,total_amount:0,pending_count:0,received_count:0,pending_amount:0,received_amount:0,patient_count:0,nmi_count:0,patientIds:new Set});const y=u.get(p);y.total_bills++,y.total_amount+=f.bill_amount||0,x&&y.patientIds.add(x),f.received_date?(y.received_count++,y.received_amount+=f.received_amount||0):(y.pending_count++,y.pending_amount+=f.bill_amount||0),f.nmi&&f.nmi.trim()!==""&&y.nmi_count++}),Array.from(u.values()).map(f=>({payer_type:f.payer_type,total_bills:f.total_bills,total_amount:f.total_amount,pending_count:f.pending_count,received_count:f.received_count,pending_amount:f.pending_amount,received_amount:f.received_amount,patient_count:f.patientIds.size,nmi_count:f.nmi_count})).sort((f,p)=>p.total_amount-f.total_amount)}async function yy(r){const e=(r==null?void 0:r.limit)||20,t=(r==null?void 0:r.offset)||0;let n=Re.from("bill_preparation").select("*",{count:"exact"}).order("created_at",{ascending:!1});r!=null&&r.payerType&&(n=n.eq("corporate",r.payerType));const{data:o,error:l}=await n;if(l)throw console.error("Error fetching bill_preparation:",l),l;const u=[...new Set((o==null?void 0:o.map(A=>A.visit_id).filter(Boolean))||[])],{data:h,error:f}=await Re.from("visits").select("visit_id, patient_id, claim_id").in("visit_id",u);if(f)throw console.error("Error fetching visits:",f),f;const p=[...new Set((h==null?void 0:h.map(A=>A.patient_id).filter(Boolean))||[])],{data:x,error:y}=await Re.from("patients").select("id, name").in("id",p);if(y)throw console.error("Error fetching patients:",y),y;const b=new Map(h==null?void 0:h.map(A=>[A.visit_id,A.patient_id])),w=new Map(h==null?void 0:h.map(A=>[A.visit_id,A.claim_id])),N=new Map(x==null?void 0:x.map(A=>[A.id,A.name])),_=(A,K)=>A.nmi&&A.nmi.trim()!==""&&!A.nmi_answered?"nmi":A.received_date&&A.received_amount?A.received_amount>=A.bill_amount?"received":"partial":K>0?"overdue":"pending",j=A=>{if(!A)return 0;const K=new Date(A),z=new Date().getTime()-K.getTime();return Math.floor(z/(1e3*60*60*24))},P=A=>{if(!A)return 0;const K=new Date(A),z=new Date().getTime()-K.getTime(),V=Math.floor(z/(1e3*60*60*24));return V>0?V:0},T=A=>A===0?"-":A<=30?"0-30":A<=60?"31-60":A<=90?"61-90":A<=180?"91-180":A<=365?"181-365":"365+";let C=(o==null?void 0:o.map(A=>{const K=b.get(A.visit_id)||"",H=N.get(K)||"Unknown",z=w.get(A.visit_id)||null,V=P(A.expected_payment_date);return{id:A.id,visit_id:A.visit_id||"",claim_id:z,bill_amount:A.bill_amount||0,expected_amount:A.expected_amount,received_amount:A.received_amount,deduction_amount:A.deduction_amount,date_of_submission:A.date_of_submission,expected_payment_date:A.expected_payment_date,received_date:A.received_date,patient_name:H,patient_id:K,payer_type:A.corporate||"private",nmi:A.nmi,nmi_date:A.nmi_date,nmi_answered:A.nmi_answered,status:_(A,V),bill_age:j(A.date_of_submission),overdue_days:V,aging_bucket:T(V)}}))||[];if(r!=null&&r.status&&(C=C.filter(A=>A.status===r.status)),r!=null&&r.search){const A=r.search.toLowerCase();C=C.filter(K=>K.patient_name.toLowerCase().includes(A)||K.visit_id.toLowerCase().includes(A)||K.payer_type.toLowerCase().includes(A))}return{data:C.slice(t,t+e),count:C.length}}function vy(){const[r,e]=S.useState([]),[t,n]=S.useState(null),[o,l]=S.useState(!0),[u,h]=S.useState(null),[f,p]=S.useState(0);S.useEffect(()=>{x()},[]);async function x(){try{l(!0),h(null);const[w,N]=await Promise.all([yy({limit:50}),xy()]);e(w.data),p(w.count),n(N)}catch(w){console.error("Error fetching dashboard data:",w),h(w instanceof Error?w.message:"Failed to fetch dashboard data")}finally{l(!1)}}const y=w=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(w),b=w=>w?new Date(w).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"-";return o?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("span",{className:"material-icon text-primary-600 animate-pulse",style:{fontSize:"48px"},children:"autorenew"}),i.jsx("p",{className:"text-gray-600",children:"Loading Hospital Admin dashboard..."})]})}):u?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"card max-w-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("span",{className:"material-icon text-red-600",children:"error"}),i.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Error Loading Dashboard"})]}),i.jsx("p",{className:"text-gray-700 mb-4",children:u}),i.jsxs("button",{onClick:x,className:"btn-primary w-full",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"refresh"}),"Retry"]})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsx(Xl,{icon:"assessment",iconColor:"blue",value:t.totalBills,label:"Total Bills",subtext:y(t.totalAmount)}),i.jsx(Xl,{icon:"pending",iconColor:"orange",value:t.pendingBills,label:"Pending Bills",subtext:y(t.pendingAmount)}),i.jsx(Xl,{icon:"check_circle",iconColor:"green",value:t.receivedBills,label:"Received Bills",subtext:y(t.receivedAmount)}),i.jsx(Xl,{icon:"warning",iconColor:"red",value:t.nmiCount,label:"NMI Cases",subtext:y(t.deductionAmount)+" deductions"})]}),i.jsxs("div",{className:"card mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"receipt_long"}),"Claims List (",f," total)"]}),i.jsxs("button",{onClick:x,className:"btn-secondary",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"18px"},children:"refresh"}),"Refresh"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200",children:[i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Claim ID"}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Visit ID"}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Patient Name"}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Corporate"}),i.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Amount"}),i.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Bill Age"}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Submission Date"}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Expected Payment"}),i.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Days"}),i.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Aging"}),i.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"})]})}),i.jsx("tbody",{children:r.length===0?i.jsx("tr",{children:i.jsxs("td",{colSpan:11,className:"py-8 text-center text-gray-500",children:[i.jsx("span",{className:"material-icon text-gray-300 mb-2",style:{fontSize:"48px"},children:"inbox"}),i.jsx("p",{children:"No claims found"})]})}):r.map(w=>i.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm font-medium text-primary-600",children:w.claim_id||"-"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm text-gray-600",children:w.visit_id})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm text-gray-900",children:w.patient_name})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm text-gray-700 font-medium",children:w.payer_type})}),i.jsx("td",{className:"py-3 px-4 text-right",children:i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:y(w.bill_amount)})}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("span",{className:`text-sm font-medium ${w.bill_age>90?"text-red-600":w.bill_age>60?"text-orange-600":w.bill_age>30?"text-yellow-600":"text-gray-600"}`,children:[w.bill_age," days"]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm text-gray-600",children:b(w.date_of_submission)})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm text-gray-600",children:b(w.expected_payment_date)})}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx("span",{className:"text-sm font-medium text-gray-900",children:w.overdue_days>0?w.overdue_days:"-"})}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx(YN,{bucket:w.aging_bucket})}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx(ZN,{status:w.status})})]},w.id))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"dashboard"}),"Claims Management"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("a",{href:"/recovery",className:"btn-primary w-full justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"receipt_long"}),"Recovery Dashboard"]}),i.jsx("span",{className:"material-icon",children:"arrow_forward"})]}),i.jsxs("a",{href:"/nmi",className:"btn-secondary w-full justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"business"}),"Collection Tracker"]}),i.jsx("span",{className:"material-icon",children:"arrow_forward"})]})]})]}),i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"group"}),"Team Management"]}),i.jsx("div",{className:"space-y-3",children:i.jsxs("a",{href:"/users",className:"btn-primary w-full justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"people"}),"Manage Staff"]}),i.jsx("span",{className:"material-icon",children:"arrow_forward"})]})})]})]})]}),i.jsx("footer",{className:"mt-16 py-6 border-t border-gray-200 bg-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-xs text-gray-400",children:i.jsx("p",{children:"v1.2 | Last Updated: 2026-01-20 | zeroriskagent.com | Hospital Admin Access"})})})]})}function Xl({icon:r,iconColor:e,value:t,label:n,subtext:o}){const l={blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",orange:"text-orange-600",red:"text-red-600"};return i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`material-icon ${l[e]}`,children:r}),i.jsx("span",{className:"text-2xl font-bold",children:t})]}),i.jsx("p",{className:"text-sm text-gray-600",children:n}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o})]})}function ZN({status:r}){const t={pending:{label:"Pending",color:"bg-yellow-100 text-yellow-800"},received:{label:"Received",color:"bg-green-100 text-green-800"},partial:{label:"Partial",color:"bg-blue-100 text-blue-800"},nmi:{label:"NMI",color:"bg-orange-100 text-orange-800"},overdue:{label:"Overdue",color:"bg-red-100 text-red-800"}}[r]||{label:r,color:"bg-gray-100 text-gray-800"};return i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.color}`,children:t.label})}function YN({bucket:r}){const t={"-":"bg-gray-100 text-gray-600","0-30":"bg-green-100 text-green-800","31-60":"bg-yellow-100 text-yellow-800","61-90":"bg-orange-100 text-orange-800","91-180":"bg-red-100 text-red-800","181-365":"bg-red-200 text-red-900","365+":"bg-red-300 text-red-900"}[r]||"bg-gray-100 text-gray-600";return i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t}`,children:r})}function wy(){const[r,e]=S.useState({claimsProcessed:0,pendingTasks:0,completedTasks:0,hoursWorked:0}),[t,n]=S.useState({totalClaims:0,successfulAppeals:0,avgProcessingTime:0,productivityScore:0});S.useEffect(()=>{o()},[]);async function o(){e({claimsProcessed:12,pendingTasks:8,completedTasks:15,hoursWorked:6.5}),n({totalClaims:67,successfulAppeals:48,avgProcessingTime:2.3,productivityScore:92})}return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Today's Progress"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(ec,{icon:"assignment_turned_in",iconColor:"green",value:r.claimsProcessed,label:"Claims Processed",subtext:"Today"}),i.jsx(ec,{icon:"pending_actions",iconColor:"orange",value:r.pendingTasks,label:"Pending Tasks",subtext:"In queue"}),i.jsx(ec,{icon:"check_circle",iconColor:"blue",value:r.completedTasks,label:"Completed Tasks",subtext:"Today"}),i.jsx(ec,{icon:"schedule",iconColor:"purple",value:`${r.hoursWorked}h`,label:"Hours Worked",subtext:"Today"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"trending_up"}),"Weekly Performance"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Total Claims Processed"}),i.jsx("span",{className:"text-lg font-semibold",children:t.totalClaims})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Successful Appeals"}),i.jsx("span",{className:"text-lg font-semibold text-green-600",children:t.successfulAppeals})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Avg Processing Time"}),i.jsxs("span",{className:"text-lg font-semibold text-blue-600",children:[t.avgProcessingTime,"h"]})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Productivity Score"}),i.jsxs("span",{className:"text-lg font-semibold text-purple-600",children:[t.productivityScore,"%"]})]})]})]}),i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"emoji_events"}),"Achievements"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(tc,{icon:"stars",title:"High Performer",description:"Processed 50+ claims this week",earned:!0}),i.jsx(tc,{icon:"speed",title:"Speed Demon",description:"Average processing under 3 hours",earned:!0}),i.jsx(tc,{icon:"verified",title:"Quality Expert",description:"95% success rate this month",earned:!1}),i.jsx(tc,{icon:"trending_up",title:"Consistency King",description:"Meet targets for 30 days straight",earned:!1})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"assignment"}),"My Tasks"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("a",{href:"/nmi",className:"btn-primary w-full justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"business"}),"Collection Tracker"]}),i.jsx("span",{className:"material-icon",children:"arrow_forward"})]}),i.jsxs("button",{className:"btn-secondary w-full justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"upload"}),"Upload Claims"]}),i.jsx("span",{className:"material-icon",children:"arrow_forward"})]}),i.jsxs("button",{className:"btn-secondary w-full justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"edit"}),"Update Status"]}),i.jsx("span",{className:"material-icon",children:"arrow_forward"})]})]})]}),i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"help"}),"Resources & Help"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{className:"btn-secondary w-full justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"school"}),"Training Materials"]}),i.jsx("span",{className:"material-icon",children:"arrow_forward"})]}),i.jsxs("button",{className:"btn-secondary w-full justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"policy"}),"Policy Guidelines"]}),i.jsx("span",{className:"material-icon",children:"arrow_forward"})]}),i.jsxs("button",{className:"btn-secondary w-full justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"support_agent"}),"Contact Support"]}),i.jsx("span",{className:"material-icon",children:"arrow_forward"})]})]})]})]}),i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"history"}),"Recent Activity"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(ro,{icon:"check_circle",text:"Processed CGHS claim #12345 - Approved",time:"30 mins ago",status:"completed"}),i.jsx(ro,{icon:"edit",text:"Updated ESIC appeal documentation #12346",time:"1 hour ago",status:"completed"}),i.jsx(ro,{icon:"upload",text:"Uploaded 5 new claims to system",time:"2 hours ago",status:"completed"}),i.jsx(ro,{icon:"pending",text:"ECHS claim #12347 - Pending review",time:"3 hours ago",status:"pending"}),i.jsx(ro,{icon:"error",text:"Claim #12348 - Documentation missing",time:"4 hours ago",status:"action_required"})]})]})]}),i.jsx("footer",{className:"mt-16 py-6 border-t border-gray-200 bg-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-xs text-gray-400",children:i.jsx("p",{children:"v1.2 | Last Updated: 2026-01-20 | zeroriskagent.com | Staff Access"})})})]})}function ec({icon:r,iconColor:e,value:t,label:n,subtext:o}){const l={blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",orange:"text-orange-600"};return i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`material-icon ${l[e]}`,children:r}),i.jsx("span",{className:"text-2xl font-bold",children:t})]}),i.jsx("p",{className:"text-sm text-gray-600",children:n}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o})]})}function tc({icon:r,title:e,description:t,earned:n}){return i.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${n?"bg-yellow-50":"bg-gray-50"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-400"}`,children:i.jsx("span",{className:"material-icon",style:{fontSize:"18px"},children:r})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:`text-sm font-medium ${n?"text-gray-900":"text-gray-600"}`,children:e}),i.jsx("p",{className:"text-xs text-gray-500",children:t})]}),n&&i.jsx("span",{className:"material-icon text-yellow-600",style:{fontSize:"20px"},children:"check_circle"})]})}function ro({icon:r,text:e,time:t,status:n}){const o={completed:"text-green-600 bg-green-50",pending:"text-orange-600 bg-orange-50",action_required:"text-red-600 bg-red-50"};return i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${o[n]}`,children:i.jsx("span",{className:"material-icon",style:{fontSize:"18px"},children:r})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm text-gray-900",children:e}),i.jsx("p",{className:"text-xs text-gray-500",children:t})]})]})}function XN(){const{profile:r,loading:e}=Jr();if(e)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("span",{className:"material-icon text-primary-600 animate-pulse",style:{fontSize:"48px"},children:"autorenew"}),i.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})});if(!r)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"card max-w-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("span",{className:"material-icon text-red-600",children:"error"}),i.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Access Error"})]}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Unable to determine user role. Please try logging in again."}),i.jsxs("a",{href:"/login",className:"btn-primary w-full justify-center",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"login"}),"Go to Login"]})]})});switch(r.role){case"super_admin":return i.jsx(gy,{});case"hospital_admin":return i.jsx(vy,{});case"staff":return i.jsx(wy,{});default:return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"card max-w-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("span",{className:"material-icon text-orange-600",children:"warning"}),i.jsx("h2",{className:"text-xl font-semibold text-orange-600",children:"Unknown Role"})]}),i.jsxs("p",{className:"text-gray-700 mb-4",children:['Your role "',r.role,'" is not recognized. Please contact your administrator.']}),i.jsxs("a",{href:"/login",className:"btn-primary w-full justify-center",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"login"}),"Go to Login"]})]})})}}function as(){const{user:r,profile:e,signOut:t,isAdmin:n,canViewFinancials:o}=Jr(),l=Gr(),u=hi(),[h,f]=S.useState(!1),p=async()=>{await t(),u("/login")},x=b=>l.pathname===b,y=[{path:"/dashboard",label:"Dashboard",icon:"dashboard",show:!0},{path:"/recovery",label:"Recovery",icon:"trending_up",show:o},{path:"/nmi",label:"Claims",icon:"assignment",show:!0},{path:"/upload",label:"Upload",icon:"upload_file",show:!0},{path:"/extractions",label:"Extractions",icon:"analytics",show:!0},{path:"/users",label:"Users",icon:"people",show:n},{path:"/followups",label:"Follow-ups",icon:"schedule_send",show:!0}];return!r||!e?null:i.jsxs("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between h-16",children:[i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0 flex items-center",children:i.jsxs(Va,{to:"/dashboard",className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"local_hospital"}),i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Zero Risk Agent"})]})}),i.jsx("div",{className:"hidden md:ml-6 md:flex md:space-x-8",children:y.filter(b=>b.show).map(b=>i.jsxs(Va,{to:b.path,className:`${x(b.path)?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm inline-flex items-center gap-1`,children:[i.jsx("span",{className:"material-icon text-sm",children:b.icon}),b.label]},b.path))})]}),i.jsx("div",{className:"hidden md:ml-4 md:flex-shrink-0 md:flex md:items-center",children:i.jsxs("div",{className:"ml-3 relative",children:[i.jsx("div",{children:i.jsxs("button",{type:"button",className:"bg-white rounded-full flex text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:()=>f(!h),children:[i.jsx("span",{className:"sr-only",children:"Open user menu"}),i.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.full_name}),i.jsx("div",{className:"text-xs text-gray-500",children:e.role.replace("_"," ")})]}),i.jsx("div",{className:"bg-primary-600 rounded-full p-2",children:i.jsx("span",{className:"material-icon text-white text-sm",children:"person"})})]})]})}),h&&i.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("div",{className:"px-4 py-2 text-xs text-gray-500 border-b",children:[e.email,e.hospital_name&&i.jsx("div",{className:"text-xs text-gray-400 mt-1",children:e.hospital_name})]}),i.jsxs("button",{onClick:p,className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-sm",children:"logout"}),"Sign out"]})]})})]})}),i.jsx("div",{className:"md:hidden flex items-center",children:i.jsxs("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",onClick:()=>f(!h),children:[i.jsx("span",{className:"sr-only",children:"Open main menu"}),i.jsx("span",{className:"material-icon",children:"menu"})]})})]})}),h&&i.jsxs("div",{className:"md:hidden",children:[i.jsx("div",{className:"pt-2 pb-3 space-y-1 sm:px-3",children:y.filter(b=>b.show).map(b=>i.jsx(Va,{to:b.path,className:`${x(b.path)?"bg-primary-50 border-primary-500 text-primary-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,onClick:()=>f(!1),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-sm",children:b.icon}),b.label]})},b.path))}),i.jsxs("div",{className:"pt-4 pb-3 border-t border-gray-200",children:[i.jsxs("div",{className:"px-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.full_name}),i.jsx("div",{className:"text-sm text-gray-500",children:e.email})]}),i.jsx("div",{className:"mt-3 space-y-1",children:i.jsx("button",{onClick:p,className:"block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 w-full text-left",children:"Sign out"})})]})]})]})}function eS(){const[r,e]=S.useState("1000000"),n=(()=>{const h=(parseFloat(r)||0)*.6,f=h*.25,p=h-f;return{recovered:h,agentFee:f,hospitalNet:p}})(),o=l=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(l);return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-red-900 to-slate-900 text-white overflow-hidden",children:[i.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-red-500/20 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-orange-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),i.jsx("div",{className:"absolute top-1/2 left-1/2 w-96 h-96 bg-red-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),i.jsx("nav",{className:"fixed top-0 w-full bg-slate-900/50 backdrop-blur-xl border-b border-white/10 z-50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-20",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-red-500 to-orange-600 rounded-lg",children:i.jsx("span",{className:"material-icon text-white",style:{fontSize:"28px"},children:"local_hospital"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Zero Risk Agent"}),i.jsx("p",{className:"text-xs text-gray-400",children:"AI Revenue Recovery"})]})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[i.jsx("a",{href:"#features",className:"text-sm text-gray-300 hover:text-white transition-colors duration-200",children:"Features"}),i.jsx("a",{href:"#how-it-works",className:"text-sm text-gray-300 hover:text-white transition-colors duration-200",children:"How It Works"}),i.jsx("a",{href:"#pricing",className:"text-sm text-gray-300 hover:text-white transition-colors duration-200",children:"Pricing"}),i.jsx("a",{href:"#roi",className:"text-sm text-gray-300 hover:text-white transition-colors duration-200",children:"ROI Calculator"}),i.jsxs("a",{href:"/contact",className:"text-sm text-gray-300 hover:text-white transition-colors duration-200 flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"16px"},children:"contact_mail"}),"Contact"]}),i.jsxs("a",{href:"/recovery",className:"relative group",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-red-600 to-orange-600 rounded-lg blur opacity-75 group-hover:opacity-100 transition duration-200"}),i.jsxs("div",{className:"relative px-6 py-2.5 bg-slate-900 rounded-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"18px"},children:"receipt_long"}),i.jsx("span",{className:"text-sm font-medium",children:"Recovery"})]})]})]})]})})}),i.jsx("section",{className:"relative pt-32 pb-20 px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsxs("div",{className:"text-center max-w-5xl mx-auto relative z-10",children:[i.jsxs("div",{className:"flex flex-col items-center justify-center mb-12",children:[i.jsx(tS,{}),i.jsxs("h1",{className:"text-6xl md:text-7xl lg:text-8xl font-black mt-8 leading-tight pb-4",children:[i.jsx("span",{className:"block bg-gradient-to-r from-white via-gray-100 to-white bg-clip-text text-transparent",children:"Zero Risk"}),i.jsx("span",{className:"block mt-2 pb-2 bg-gradient-to-r from-red-400 via-orange-400 to-red-500 bg-clip-text text-transparent animate-gradient",children:"Agent"})]})]}),i.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm border border-white/20 px-5 py-2.5 rounded-full text-sm font-medium mb-8 hover:bg-white/15 transition-all duration-300 cursor-pointer group",children:[i.jsx("span",{className:"material-icon text-red-400 group-hover:rotate-12 transition-transform duration-300",style:{fontSize:"20px"},children:"auto_awesome"}),i.jsx("span",{className:"bg-gradient-to-r from-red-400 to-orange-400 bg-clip-text text-transparent",children:"Powered by Advanced AI"})]}),i.jsxs("p",{className:"text-xl md:text-2xl text-gray-300 mb-12 leading-relaxed max-w-4xl mx-auto",children:["AI-powered platform recovering ",i.jsx("span",{className:"text-red-400 font-semibold",children:"millions in denied claims"})," from ESIC, CGHS, and ECHS.",i.jsx("span",{className:"block mt-2 text-lg text-gray-400",children:"You only pay when we win."})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-16",children:[i.jsxs("button",{className:"group relative",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-red-600 via-orange-600 to-red-600 rounded-xl blur-lg opacity-75 group-hover:opacity-100 transition duration-300 animate-gradient"}),i.jsxs("div",{className:"relative px-8 py-4 bg-gradient-to-r from-red-600 to-orange-600 rounded-xl flex items-center justify-center gap-3 text-lg font-bold shadow-2xl group-hover:scale-105 transition-transform duration-200",children:[i.jsx("span",{className:"material-icon group-hover:rotate-12 transition-transform duration-300",children:"rocket_launch"}),i.jsx("span",{children:"Start Recovering Now"})]})]}),i.jsxs("button",{className:"relative px-8 py-4 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl flex items-center justify-center gap-3 text-lg font-semibold hover:bg-white/15 transition-all duration-200 group",children:[i.jsx("span",{className:"material-icon group-hover:scale-110 transition-transform duration-300",children:"play_circle"}),i.jsx("span",{children:"Watch Demo"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(Td,{icon:"attach_money",value:"50Cr+",label:"Total Recovered",gradient:"from-green-500 to-emerald-500"}),i.jsx(Td,{icon:"trending_up",value:"65%",label:"Success Rate",gradient:"from-blue-500 to-cyan-500"}),i.jsx(Td,{icon:"schedule",value:"45 Days",label:"Avg Recovery Time",gradient:"from-purple-500 to-pink-500"})]})]})})}),i.jsx("section",{id:"features",className:"relative py-20 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-16 relative z-10",children:[i.jsx("h2",{className:"text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Why Choose Us?"}),i.jsx("p",{className:"text-xl text-gray-400 max-w-3xl mx-auto",children:"Built specifically for Indian healthcare, powered by cutting-edge AI"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 relative z-10",children:[i.jsx(Ia,{icon:"psychology",title:"AI-Powered Appeals",description:"Advanced AI analyzes denials, reviews records, and generates compelling appeals citing specific policy clauses.",gradient:"from-blue-500 to-cyan-500"}),i.jsx(Ia,{icon:"security",title:"Zero Risk Pricing",description:"No upfront costs. No monthly fees. Pay only 25% of what we recover. If we don't win, you don't pay.",gradient:"from-green-500 to-emerald-500"}),i.jsx(Ia,{icon:"account_balance",title:"Multi-Payer Support",description:"Specialized workflows for ESIC, CGHS, ECHS, and private insurers. We know each payer's requirements.",gradient:"from-purple-500 to-pink-500"}),i.jsx(Ia,{icon:"speed",title:"Automated Workflows",description:"From denial detection to appeal submission, everything happens automatically, saving countless hours.",gradient:"from-orange-500 to-red-500"}),i.jsx(Ia,{icon:"analytics",title:"Real-Time Dashboard",description:"Track every claim, denial, and recovery in real-time with comprehensive analytics and insights.",gradient:"from-pink-500 to-rose-500"}),i.jsx(Ia,{icon:"school",title:"Learning System",description:"Our AI learns from every claim, building a knowledge graph that improves success rates over time.",gradient:"from-indigo-500 to-purple-500"})]})]})}),i.jsx("section",{id:"how-it-works",className:"relative py-20 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-16 relative z-10",children:[i.jsx("h2",{className:"text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"How It Works"}),i.jsx("p",{className:"text-xl text-gray-400 max-w-3xl mx-auto",children:"Four simple steps to start recovering your lost revenue"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 relative z-10",children:[i.jsx(rc,{number:"1",icon:"upload",title:"Import Claims",description:"Connect your billing system or upload claims. We handle all Indian payer formats."}),i.jsx(rc,{number:"2",icon:"search",title:"AI Analysis",description:"Our AI detects denials, analyzes reasons, and scores recovery probability instantly."}),i.jsx(rc,{number:"3",icon:"edit_document",title:"Generate Appeals",description:"AI drafts compelling appeals with medical justification and policy references."}),i.jsx(rc,{number:"4",icon:"payments",title:"Get Paid",description:"We handle submission and follow-up. Split: 75% to you, 25% to us."})]})]})}),i.jsx("section",{id:"pricing",className:"relative py-20 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-16 relative z-10",children:[i.jsx("h2",{className:"text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Transparent Pricing"}),i.jsx("p",{className:"text-xl text-gray-400",children:"Only pay when we win. No hidden fees. No surprises."})]}),i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-red-600 via-orange-600 to-red-600 rounded-3xl blur-xl opacity-50 group-hover:opacity-75 transition duration-300"}),i.jsxs("div",{className:"relative bg-slate-800/50 backdrop-blur-xl rounded-3xl p-12 border border-white/10",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Gain-Share Model"}),i.jsx("p",{className:"text-lg text-gray-400",children:"Performance-based pricing aligned with your success"})]}),i.jsx("div",{className:"hidden md:block",children:i.jsx("span",{className:"material-icon text-primary-400",style:{fontSize:"80px"},children:"handshake"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsx(Rd,{icon:"block",title:"0 Upfront",description:"No setup fees or monthly charges"}),i.jsx(Rd,{icon:"percent",title:"25% Fee",description:"Only on recovered amounts"}),i.jsx(Rd,{icon:"currency_rupee",title:"5,000 Min",description:"We pursue viable claims"})]}),i.jsxs("div",{className:"bg-slate-900/50 rounded-2xl p-8 border border-white/10",children:[i.jsx("h4",{className:"font-semibold text-xl mb-6 text-gray-200",children:"Example Calculation:"}),i.jsxs("div",{className:"space-y-4 text-base",children:[i.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-white/10",children:[i.jsx("span",{className:"text-gray-400",children:"Denied claim amount:"}),i.jsx("span",{className:"font-semibold text-white text-lg",children:"1,00,000"})]}),i.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-white/10",children:[i.jsx("span",{className:"text-gray-400",children:"Successfully recovered (60%):"}),i.jsx("span",{className:"font-semibold text-white text-lg",children:"60,000"})]}),i.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-white/10",children:[i.jsx("span",{className:"text-gray-400",children:"Our fee (25%):"}),i.jsx("span",{className:"font-semibold text-red-400 text-lg",children:"15,000"})]}),i.jsxs("div",{className:"flex justify-between items-center pt-3",children:[i.jsx("span",{className:"font-bold text-white text-lg",children:"You receive:"}),i.jsx("span",{className:"font-bold text-green-400 text-2xl",children:"45,000"})]})]})]}),i.jsx("p",{className:"text-center text-sm text-gray-400 mt-8",children:"If we don't recover the claim, you pay nothing. Zero risk to your hospital."})]})]})]})}),i.jsx("section",{id:"roi",className:"relative py-20 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-12 relative z-10",children:[i.jsx("h2",{className:"text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Calculate Your Recovery"}),i.jsx("p",{className:"text-xl text-gray-400",children:"See how much you could recover from denied claims"})]}),i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 rounded-3xl blur-xl opacity-50 group-hover:opacity-75 transition duration-300"}),i.jsxs("div",{className:"relative bg-slate-800/50 backdrop-blur-xl rounded-3xl p-8 border border-white/10",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("label",{className:"label text-lg text-gray-300 mb-3 block",children:"Your Total Denied Claims Amount"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-gray-400 text-2xl font-bold",children:""}),i.jsx("input",{type:"number",value:r,onChange:l=>e(l.target.value),className:"w-full bg-slate-900/50 border border-white/20 text-white text-3xl font-bold pl-12 pr-6 py-5 rounded-2xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200",placeholder:"1000000"})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-emerald-900/30 rounded-2xl p-8 border border-green-500/20",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[i.jsx(Pd,{label:"Estimated Recovery",value:o(n.recovered),sublabel:"at 60% success rate",icon:"trending_up",color:"green"}),i.jsx(Pd,{label:"Our Fee",value:o(n.agentFee),sublabel:"25% of recovery",icon:"receipt",color:"blue"}),i.jsx(Pd,{label:"Your Net Gain",value:o(n.hospitalNet),sublabel:"in your account",icon:"account_balance_wallet",color:"purple"})]}),i.jsxs("div",{className:"pt-6 border-t border-green-500/20 text-center",children:[i.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Based on our average 60% recovery rate across 500+ hospitals"}),i.jsxs("button",{className:"group relative w-full sm:w-auto",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-600 to-emerald-600 rounded-xl blur opacity-75 group-hover:opacity-100 transition duration-200"}),i.jsxs("div",{className:"relative px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 rounded-xl flex items-center justify-center gap-3 font-bold group-hover:scale-105 transition-transform duration-200",children:[i.jsx("span",{className:"material-icon",children:"rocket_launch"}),i.jsx("span",{children:"Start Recovering Today"})]})]})]})]})]})]})]})}),i.jsx("section",{className:"relative py-20 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-16 relative z-10",children:[i.jsx("h2",{className:"text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Trusted by Leading Hospitals"}),i.jsx("p",{className:"text-xl text-gray-400",children:"Join hundreds of hospitals already recovering millions"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10",children:[i.jsx(Ad,{hospital:"Hope Hospital, Mumbai",quote:"Zero Risk Agent recovered 45 lakhs in denied ESIC claims in just 3 months. The AI-generated appeals are incredibly detailed.",name:"Dr. Rajesh Kumar",role:"Medical Director"}),i.jsx(Ad,{hospital:"City Care Hospital, Delhi",quote:"The gain-share model is brilliant. No upfront cost, and we only pay when they succeed. 62% recovery rate on CGHS denials.",name:"Mrs. Priya Sharma",role:"Chief Financial Officer"}),i.jsx(Ad,{hospital:"Metro Clinic, Bangalore",quote:"The dashboard gives complete visibility. The AI is learning our patterns and getting better every month. Highly recommended.",name:"Dr. Amit Patel",role:"Hospital Administrator"})]})]})}),i.jsx("section",{className:"relative py-20 px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-red-600 via-orange-600 to-red-600 rounded-3xl blur-2xl opacity-50 group-hover:opacity-75 transition duration-300"}),i.jsxs("div",{className:"relative bg-slate-800/50 backdrop-blur-xl rounded-3xl p-16 border border-white/10",children:[i.jsx("h2",{className:"text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Ready to Recover?"}),i.jsx("p",{className:"text-2xl mb-10 text-gray-300",children:"Start with zero risk. We only win when you win."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsxs("a",{href:"/contact",className:"group relative",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-600 to-emerald-600 rounded-xl blur opacity-75 group-hover:opacity-100 transition duration-200"}),i.jsxs("div",{className:"relative px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 rounded-xl flex items-center justify-center gap-3 text-lg font-bold group-hover:scale-105 transition-transform duration-200",children:[i.jsx("span",{className:"material-icon",children:"contact_mail"}),i.jsx("span",{children:"Schedule Demo"})]})]}),i.jsxs("button",{className:"relative px-8 py-4 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl flex items-center justify-center gap-3 text-lg font-semibold hover:bg-white/15 transition-all duration-200",children:[i.jsx("span",{className:"material-icon",children:"call"}),i.jsx("span",{children:"Call: +91-22-12345678"})]})]})]})]})})}),i.jsx("footer",{className:"relative bg-slate-900/80 backdrop-blur-xl border-t border-white/10 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-red-500 to-orange-600 rounded-lg",children:i.jsx("span",{className:"material-icon text-white",style:{fontSize:"24px"},children:"local_hospital"})}),i.jsx("span",{className:"font-bold text-white text-lg",children:"Zero Risk Agent"})]}),i.jsx("p",{className:"text-sm text-gray-400",children:"AI-powered healthcare revenue recovery for Indian hospitals."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-white mb-4",children:"Product"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:i.jsx("a",{href:"#features",className:"text-gray-400 hover:text-red-400 transition",children:"Features"})}),i.jsx("li",{children:i.jsx("a",{href:"#pricing",className:"text-gray-400 hover:text-red-400 transition",children:"Pricing"})}),i.jsx("li",{children:i.jsx("a",{href:"#roi",className:"text-gray-400 hover:text-red-400 transition",children:"ROI Calculator"})}),i.jsx("li",{children:i.jsx("a",{href:"/recovery",className:"text-gray-400 hover:text-red-400 transition",children:"Recovery Dashboard"})}),i.jsx("li",{children:i.jsx("a",{href:"/nmi",className:"text-gray-400 hover:text-red-400 transition",children:"NMI Tracker"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-white mb-4",children:"Company"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-gray-400 hover:text-red-400 transition",children:"About Us"})}),i.jsx("li",{children:i.jsx("a",{href:"/contact",className:"text-gray-400 hover:text-red-400 transition",children:"Contact"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-gray-400 hover:text-red-400 transition",children:"Privacy Policy"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-gray-400 hover:text-red-400 transition",children:"Terms of Service"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-white mb-4",children:"Contact"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsxs("li",{className:"flex items-center gap-2 text-gray-400",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"16px"},children:"email"}),"admin@hopehospital.com"]}),i.jsxs("li",{className:"flex items-center gap-2 text-gray-400",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"16px"},children:"call"}),"+91-22-12345678"]}),i.jsxs("li",{className:"flex items-center gap-2 text-gray-400",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"16px"},children:"location_on"}),"Mumbai, Maharashtra"]})]})]})]}),i.jsxs("div",{className:"border-t border-white/10 pt-8 text-center text-sm text-gray-500",children:[i.jsx("p",{children:"Version 1.2 | Last Updated: 2026-01-12 | zeroriskagent.com"}),i.jsx("p",{className:"mt-2",children:"Copyright  2026 Zero Risk Agent. All rights reserved."})]})]})})]})}function Td({icon:r,value:e,label:t,gradient:n}){return i.jsxs("div",{className:"group relative",children:[i.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r ${n} rounded-2xl blur opacity-50 group-hover:opacity-100 transition duration-300`}),i.jsxs("div",{className:"relative bg-slate-800/50 backdrop-blur-xl rounded-2xl p-6 border border-white/10 hover:scale-105 transition-transform duration-300",children:[i.jsx("div",{className:`inline-flex p-3 bg-gradient-to-r ${n} rounded-xl mb-3`,children:i.jsx("span",{className:"material-icon text-white",style:{fontSize:"28px"},children:r})}),i.jsx("div",{className:"text-4xl font-bold text-white mb-1",children:e}),i.jsx("div",{className:"text-sm text-gray-400",children:t})]})]})}function Ia({icon:r,title:e,description:t,gradient:n}){return i.jsxs("div",{className:"group relative",children:[i.jsx("div",{className:`absolute -inset-0.5 bg-gradient-to-r ${n} rounded-2xl blur opacity-30 group-hover:opacity-60 transition duration-300`}),i.jsxs("div",{className:"relative bg-slate-800/40 backdrop-blur-xl rounded-2xl p-8 border border-white/10 hover:scale-105 transition-all duration-300 h-full",children:[i.jsx("div",{className:`inline-flex p-4 bg-gradient-to-r ${n} rounded-xl mb-6 shadow-lg`,children:i.jsx("span",{className:"material-icon text-white",style:{fontSize:"32px"},children:r})}),i.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:e}),i.jsx("p",{className:"text-gray-400 leading-relaxed",children:t})]})]})}function rc({number:r,icon:e,title:t,description:n}){return i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl blur opacity-30 group-hover:opacity-60 transition duration-300"}),i.jsxs("div",{className:"relative bg-slate-800/40 backdrop-blur-xl rounded-2xl p-6 border border-white/10 hover:scale-105 transition-all duration-300",children:[i.jsx("div",{className:"absolute -top-4 -left-4 bg-gradient-to-br from-red-600 to-orange-600 text-white w-14 h-14 rounded-full flex items-center justify-center text-2xl font-bold shadow-xl",children:r}),i.jsx("div",{className:"text-red-400 mb-4 mt-4",children:i.jsx("span",{className:"material-icon",style:{fontSize:"40px"},children:e})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t}),i.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:n})]})]})}function Rd({icon:r,title:e,description:t}){return i.jsxs("div",{className:"flex items-start gap-4 p-4 bg-slate-900/30 rounded-xl border border-white/10",children:[i.jsx("div",{className:"bg-gradient-to-br from-red-600 to-orange-600 text-white p-3 rounded-lg flex-shrink-0",children:i.jsx("span",{className:"material-icon",style:{fontSize:"24px"},children:r})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-white text-lg mb-1",children:e}),i.jsx("div",{className:"text-sm text-gray-400",children:t})]})]})}function Pd({label:r,value:e,sublabel:t,icon:n,color:o}){const l={green:"from-green-500 to-emerald-500",blue:"from-blue-500 to-cyan-500",purple:"from-purple-500 to-pink-500"};return i.jsxs("div",{className:"text-center p-4 bg-slate-900/30 rounded-xl border border-white/10",children:[i.jsx("div",{className:`inline-flex p-3 bg-gradient-to-r ${l[o]} rounded-lg mb-3`,children:i.jsx("span",{className:"material-icon text-white",style:{fontSize:"28px"},children:n})}),i.jsx("div",{className:"text-sm text-gray-400 mb-2",children:r}),i.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:e}),i.jsx("div",{className:"text-xs text-gray-500",children:t})]})}function Ad({hospital:r,quote:e,name:t,role:n}){return i.jsxs("div",{className:"group relative",children:[i.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-yellow-600 to-orange-600 rounded-2xl blur opacity-30 group-hover:opacity-60 transition duration-300"}),i.jsxs("div",{className:"relative bg-slate-800/40 backdrop-blur-xl rounded-2xl p-8 border border-white/10 hover:scale-105 transition-all duration-300 h-full flex flex-col",children:[i.jsx("div",{className:"flex items-center gap-1 mb-6",children:[1,2,3,4,5].map(o=>i.jsx("span",{className:"material-icon text-yellow-400",style:{fontSize:"20px"},children:"star"},o))}),i.jsxs("p",{className:"text-gray-300 mb-6 leading-relaxed flex-grow italic",children:['"',e,'"']}),i.jsxs("div",{className:"border-t border-white/10 pt-6",children:[i.jsx("div",{className:"font-bold text-white text-lg",children:t}),i.jsx("div",{className:"text-sm text-gray-400",children:n}),i.jsx("div",{className:"text-xs text-red-400 mt-2 font-medium",children:r})]})]})]})}function tS(){return i.jsxs("div",{className:"relative w-64 h-64 flex items-center justify-center",children:[i.jsx("div",{className:"absolute w-16 h-16 bg-gradient-to-br from-red-400 via-orange-500 to-red-500 rounded-full shadow-2xl animate-pulse z-10",children:i.jsx("div",{className:"absolute inset-2 bg-gradient-to-br from-white to-red-200 rounded-full"})}),i.jsx("div",{className:"absolute w-48 h-48 border-2 border-red-400/30 rounded-full orbit-1",children:i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 bg-gradient-to-br from-red-400 to-orange-500 rounded-full shadow-lg electron"})}),i.jsx("div",{className:"absolute w-56 h-56 border-2 border-orange-400/30 rounded-full orbit-2",children:i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 bg-gradient-to-br from-orange-400 to-red-500 rounded-full shadow-lg electron"})}),i.jsx("div",{className:"absolute w-64 h-64 border-2 border-red-400/30 rounded-full orbit-3",children:i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 bg-gradient-to-br from-red-400 to-orange-500 rounded-full shadow-lg electron"})})]})}function rS(){const{signIn:r,user:e,loading:t,isMockMode:n}=Jr(),o=hi(),[l]=n_(),[u,h]=S.useState(!1),[f,p]=S.useState(null),[x,y]=S.useState(null),[b,w]=S.useState({email:"",password:""});S.useEffect(()=>{l.get("registered")==="true"&&y("Registration successful! Please check your email for verification (if required) and login.")},[l]),S.useEffect(()=>{e&&!t&&o("/dashboard")},[e,t,o]);const N=async j=>{if(j.preventDefault(),p(null),y(null),!b.email||!b.password){p("Email and password are required");return}try{h(!0);const{error:P}=await r(b.email,b.password);if(P){p(P.message);return}}catch(P){p(P instanceof Error?P.message:"Login failed")}finally{h(!1)}},_=j=>{const{name:P,value:T}=j.target;w(C=>({...C,[P]:T}))};return t?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("span",{className:"material-icon text-primary-600 animate-pulse",style:{fontSize:"48px"},children:"autorenew"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("span",{className:"material-icon text-primary-600",style:{fontSize:"48px"},children:"local_hospital"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Zero Risk Agent"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:N,children:[f&&i.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",children:"error"}),i.jsx("span",{children:f})]}),x&&i.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-md flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",children:"check_circle"}),i.jsx("span",{children:x})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),i.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:b.email,onChange:_,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),i.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:b.password,onChange:_,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Enter your password"})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-icon animate-spin mr-2",children:"autorenew"}),"Signing in..."]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-icon mr-2",children:"login"}),"Sign In"]})})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"text-center",children:i.jsxs("span",{className:"text-sm text-gray-600",children:["Need an admin account?"," ",i.jsx(Va,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Register here"})]})}),i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:`${n?"bg-blue-50 border-blue-200 text-blue-700":"bg-green-50 border-green-200 text-green-700"} px-4 py-3 rounded-md text-sm`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"material-icon",children:"info"}),i.jsx("strong",{children:n?"Mock Authentication Mode":"Database Authentication Mode"})]}),i.jsx("p",{className:"text-xs mb-2",children:n?"No database required - using local authentication":"Using zero_login_user database table"}),i.jsxs("div",{className:"space-y-1 text-xs",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Super Admin:"})," admin@hopehospital.com / admin123"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Hospital Admin:"})," hope@hopehospital.com / hope123"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Staff:"})," staff@hopehospital.com / staff123"]})]})]})})]})]}),i.jsx("footer",{className:"text-center text-xs text-gray-400 mt-8",children:i.jsx("p",{children:"v1.3 - 2026-01-21 - zeroriskagent.com"})})]})})}const sS="modulepreload",nS=function(r){return"/"+r},Rg={},aS=function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(x=>Promise.resolve(x).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=u(t.map(p=>{if(p=nS(p),p in Rg)return;Rg[p]=!0;const x=p.endsWith(".css"),y=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const b=document.createElement("link");if(b.rel=x?"stylesheet":sS,x||(b.as="script"),b.crossOrigin="",b.href=p,f&&b.setAttribute("nonce",f),document.head.appendChild(b),x)return new Promise((w,N)=>{b.addEventListener("load",w),b.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};function iS(){const{signUp:r}=Jr(),e=hi(),[t,n]=S.useState(!1),[o,l]=S.useState(null),[u,h]=S.useState([]),[f,p]=S.useState(!1),[x,y]=S.useState({email:"",password:"",confirmPassword:"",full_name:"",phone:"",role:"hospital_admin",hospital_id:""}),b=async()=>{p(!0);try{const{supabase:_}=await aS(async()=>{const{supabase:T}=await Promise.resolve().then(()=>VN);return{supabase:T}},[]),{data:j,error:P}=await _.from("hospitals").select("id, name, registration_number").eq("status","active").order("name");if(P)throw P;h(j||[])}catch(_){console.error("Error loading hospitals:",_),l("Failed to load hospitals")}finally{p(!1)}};S.useState(()=>{b()});const w=async _=>{if(_.preventDefault(),l(null),x.password!==x.confirmPassword){l("Passwords do not match");return}if(x.password.length<6){l("Password must be at least 6 characters");return}if(!x.email||!x.full_name){l("Email and full name are required");return}try{n(!0);const{error:j}=await r(x.email,x.password,{full_name:x.full_name,role:x.role,hospital_id:x.hospital_id||void 0});if(j){l(j.message);return}e("/login?registered=true")}catch(j){l(j instanceof Error?j.message:"Registration failed")}finally{n(!1)}},N=_=>{const{name:j,value:P}=_.target;y(T=>({...T,[j]:P}))};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("span",{className:"material-icon text-primary-600",style:{fontSize:"48px"},children:"local_hospital"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Register Admin Account"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Create your administrator account for Zero Risk Agent"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[o&&i.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",children:"error"}),i.jsx("span",{children:o})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:"Full Name *"}),i.jsx("input",{id:"full_name",name:"full_name",type:"text",required:!0,value:x.full_name,onChange:N,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Enter your full name"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address *"}),i.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:x.email,onChange:N,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),i.jsx("input",{id:"phone",name:"phone",type:"tel",value:x.phone,onChange:N,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Enter your phone number"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role *"}),i.jsxs("select",{id:"role",name:"role",value:x.role,onChange:N,className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",children:[i.jsx("option",{value:"hospital_admin",children:"Hospital Admin"}),i.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"hospital_id",className:"block text-sm font-medium text-gray-700",children:["Hospital ",x.role==="hospital_admin"?"*":"(Optional)"]}),f?i.jsx("div",{className:"mt-1 px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500",children:"Loading hospitals..."}):i.jsxs("select",{id:"hospital_id",name:"hospital_id",value:x.hospital_id,onChange:N,required:x.role==="hospital_admin",className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",children:[i.jsx("option",{value:"",children:"Select a hospital"}),u.map(_=>i.jsxs("option",{value:_.id,children:[_.name," (",_.registration_number,")"]},_.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password *"}),i.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:x.password,onChange:N,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Enter your password (min 6 characters)"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password *"}),i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:x.confirmPassword,onChange:N,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Confirm your password"})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:t,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-icon animate-spin mr-2",children:"autorenew"}),"Creating Account..."]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-icon mr-2",children:"person_add"}),"Register Admin Account"]})})}),i.jsx("div",{className:"text-center",children:i.jsxs("span",{className:"text-sm text-gray-600",children:["Already have an account?"," ",i.jsx("button",{type:"button",onClick:()=>e("/login"),className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in here"})]})})]}),i.jsx("footer",{className:"text-center text-xs text-gray-400 mt-8",children:i.jsx("p",{children:"v1.3 - 2026-01-21 - zeroriskagent.com"})})]})})}const nn={all:["recovery"],summary:()=>[...nn.all,"summary"],byPayer:()=>[...nn.all,"byPayer"],bills:()=>[...nn.all,"bills"],billsList:r=>[...nn.bills(),r],billDetail:r=>[...nn.bills(),r]};function oS(){return bn({queryKey:nn.summary(),queryFn:xy,staleTime:300*1e3,refetchOnWindowFocus:!1})}function lS(){return bn({queryKey:nn.byPayer(),queryFn:QN,staleTime:300*1e3,refetchOnWindowFocus:!1})}function cS(r){return bn({queryKey:nn.billsList(r),queryFn:()=>yy(r),staleTime:120*1e3,refetchOnWindowFocus:!1})}function by({pageName:r,description:e,children:t}){const{isMockMode:n}=Jr();return n?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"max-w-md text-center p-8",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-2 rounded-md text-sm flex items-center justify-center gap-2 mb-6",children:[i.jsx("span",{className:"material-icon text-sm",children:"info"}),i.jsx("strong",{children:"Mock Data Mode Active"})]}),i.jsx("div",{className:"bg-primary-100 rounded-full p-6 inline-block mb-4",children:i.jsx("span",{className:"material-icon text-primary-600",style:{fontSize:"48px"},children:"construction"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:r}),i.jsx("p",{className:"text-gray-600 mb-6",children:e}),i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded-md text-sm mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"material-icon text-sm",children:"schedule"}),i.jsx("strong",{children:"Coming Soon"})]}),i.jsx("p",{children:"This page will have mock data in the next version. Currently showing the main Dashboard with complete mock data."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>window.location.href="/dashboard",className:"w-full bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 flex items-center justify-center gap-2",children:[i.jsx("span",{className:"material-icon",children:"dashboard"}),"View Dashboard with Mock Data"]}),i.jsx("p",{className:"text-xs text-gray-500",children:"The main Dashboard has complete mock data including claims, recoveries, and analytics."})]}),i.jsxs("div",{className:"mt-8 text-left bg-gray-50 p-4 rounded-md",children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"To enable this page:"}),i.jsxs("ol",{className:"text-xs text-gray-600 space-y-1 list-decimal list-inside",children:[i.jsx("li",{children:"Set up Supabase project"}),i.jsx("li",{children:"Configure environment variables"}),i.jsx("li",{children:"Run database migrations"}),i.jsx("li",{children:"The system will automatically switch to live data"})]})]}),i.jsx("footer",{className:"text-center text-xs text-gray-400 mt-8",children:i.jsx("p",{children:"v1.1 - 2026-01-20 - zeroriskagent.com"})})]})}):i.jsx(i.Fragment,{children:t})}function uS(){const[r,e]=S.useState(0),[t,n]=S.useState(""),[o,l]=S.useState(""),[u,h]=S.useState(""),{data:f,isLoading:p,error:x}=oS(),{data:y,isLoading:b}=lS(),{data:w,isLoading:N}=cS({limit:20,offset:r*20,payerType:t||void 0,status:o||void 0,search:u||void 0}),_=P=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(P),j=p||b||N;return x?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"card max-w-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("span",{className:"material-icon text-red-600",children:"error"}),i.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Error Loading Data"})]}),i.jsx("p",{className:"text-gray-700 mb-4",children:x.message}),i.jsxs("a",{href:"/",className:"btn-primary w-full justify-center",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"home"}),"Back to Home"]})]})}):i.jsx(by,{pageName:"Recovery Dashboard",description:"Track recovered amounts, agent fees, and financial analytics with detailed recovery metrics.",children:i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[i.jsx(so,{icon:"receipt",iconColor:"blue",value:(f==null?void 0:f.totalBills)||0,label:"Total Bills",subtext:_((f==null?void 0:f.totalAmount)||0),loading:j}),i.jsx(so,{icon:"pending_actions",iconColor:"orange",value:(f==null?void 0:f.pendingBills)||0,label:"Pending",subtext:_((f==null?void 0:f.pendingAmount)||0),loading:j}),i.jsx(so,{icon:"check_circle",iconColor:"green",value:(f==null?void 0:f.receivedBills)||0,label:"Received",subtext:_((f==null?void 0:f.receivedAmount)||0),loading:j}),i.jsx(so,{icon:"remove_circle",iconColor:"red",value:_((f==null?void 0:f.deductionAmount)||0),label:"Deductions",subtext:"Total deducted",loading:j}),i.jsx(so,{icon:"help_outline",iconColor:"purple",value:(f==null?void 0:f.nmiCount)||0,label:"NMI Queries",subtext:"Need More Info",loading:j})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"lg:col-span-2 card",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"business"}),"Bills by Payer"]}),t&&i.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Filtered by:"}),i.jsxs("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm font-medium flex items-center gap-1",children:[t,i.jsx("button",{onClick:()=>{n(""),e(0)},className:"hover:bg-primary-200 rounded-full p-0.5",children:i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"close"})})]})]}),b?i.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(P=>i.jsx("div",{className:"h-12 bg-gray-200 rounded"},P))}):y&&y.length>0?i.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:y.map((P,T)=>i.jsx(dS,{payer:P,formatCurrency:_,isSelected:t===P.payer_type,onClick:()=>{n(t===P.payer_type?"":P.payer_type),e(0)}},T))}):i.jsx("p",{className:"text-gray-500 text-sm",children:"No payer data available"})]}),i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"analytics"}),"Quick Stats"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Collection Rate"}),i.jsx("span",{className:"text-lg font-semibold text-green-600",children:f&&f.totalAmount>0?`${(f.receivedAmount/f.totalAmount*100).toFixed(1)}%`:"0%"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Pending Recovery"}),i.jsx("span",{className:"text-lg font-semibold text-orange-600",children:_((f==null?void 0:f.pendingAmount)||0)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Deduction Rate"}),i.jsx("span",{className:"text-lg font-semibold text-red-600",children:f&&f.totalAmount>0?`${(f.deductionAmount/f.totalAmount*100).toFixed(1)}%`:"0%"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Total Payers"}),i.jsx("span",{className:"text-lg font-semibold",children:(y==null?void 0:y.length)||0})]})]})]})]}),i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"list_alt"}),"Bills List"]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Search...",value:u,onChange:P=>{h(P.target.value),e(0)},className:"px-3 py-2 pl-9 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),i.jsx("span",{className:"material-icon absolute left-2 top-1/2 -translate-y-1/2 text-gray-400",style:{fontSize:"18px"},children:"search"})]}),i.jsxs("select",{value:t,onChange:P=>{n(P.target.value),e(0)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[i.jsx("option",{value:"",children:"All Payers"}),y==null?void 0:y.map((P,T)=>i.jsx("option",{value:P.payer_type,children:P.payer_type},T))]}),i.jsxs("select",{value:o,onChange:P=>{l(P.target.value),e(0)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[i.jsx("option",{value:"",children:"All Status"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"received",children:"Received"}),i.jsx("option",{value:"partial",children:"Partial"}),i.jsx("option",{value:"nmi",children:"NMI Query"})]})]})]}),N?i.jsx("div",{className:"animate-pulse space-y-2",children:[1,2,3,4,5].map(P=>i.jsx("div",{className:"h-16 bg-gray-100 rounded"},P))}):w&&w.data.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200",children:[i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Visit ID"}),i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Patient"}),i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Payer"}),i.jsx("th",{className:"text-right py-3 px-2 font-medium text-gray-600",children:"Bill Amt"}),i.jsx("th",{className:"text-right py-3 px-2 font-medium text-gray-600",children:"Received"}),i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Submitted"})]})}),i.jsx("tbody",{children:w.data.map(P=>i.jsx(hS,{bill:P,formatCurrency:_},P.id))})]})}),i.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",r*20+1," to ",Math.min((r+1)*20,w.count)," of ",w.count]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>e(P=>Math.max(0,P-1)),disabled:r===0,className:"btn-secondary text-sm disabled:opacity-50",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"18px"},children:"chevron_left"}),"Prev"]}),i.jsxs("button",{onClick:()=>e(P=>P+1),disabled:(r+1)*20>=(w.count||0),className:"btn-secondary text-sm disabled:opacity-50",children:["Next",i.jsx("span",{className:"material-icon",style:{fontSize:"18px"},children:"chevron_right"})]})]})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("span",{className:"material-icon text-gray-400",style:{fontSize:"48px"},children:"inbox"}),i.jsx("p",{className:"text-gray-500 mt-2",children:"No bills found"})]})]})]}),i.jsx("footer",{className:"mt-16 py-6 border-t border-gray-200 bg-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-xs text-gray-400",children:i.jsx("p",{children:"Version 1.2 | Last Updated: 2026-01-12 | zeroriskagent.com"})})})]})})}function so({icon:r,iconColor:e,value:t,label:n,subtext:o,loading:l}){const u={blue:"text-blue-600",yellow:"text-yellow-600",green:"text-green-600",red:"text-red-600",orange:"text-orange-600",purple:"text-purple-600"};return i.jsx("div",{className:"card",children:l?i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`material-icon ${u[e]}`,children:r}),i.jsx("span",{className:"text-2xl font-bold",children:t})]}),i.jsx("p",{className:"text-sm text-gray-600",children:n}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o})]})})}function dS({payer:r,formatCurrency:e,isSelected:t,onClick:n}){return i.jsxs("div",{onClick:n,className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-all ${t?"bg-primary-100 border-2 border-primary-500":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}`,children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-gray-900",children:r.payer_type}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"12px"},children:"person"}),r.patient_count," patients"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"12px"},children:"receipt"}),r.total_bills," bills"]}),r.nmi_count>0&&i.jsxs("span",{className:"flex items-center gap-1 text-purple-600",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"12px"},children:"help_outline"}),r.nmi_count," NMI"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold text-gray-900",children:e(r.total_amount)}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsxs("span",{className:"text-orange-600",children:[r.pending_count," pending"]}),i.jsxs("span",{className:"text-green-600",children:[r.received_count," received"]})]})]}),i.jsx("span",{className:"material-icon text-gray-400 ml-2",style:{fontSize:"20px"},children:t?"check_circle":"chevron_right"})]})}function hS({bill:r,formatCurrency:e}){const t={pending:"bg-orange-100 text-orange-800",received:"bg-green-100 text-green-800",partial:"bg-blue-100 text-blue-800",nmi:"bg-purple-100 text-purple-800"},n={pending:"Pending",received:"Received",partial:"Partial",nmi:"NMI Query"};return i.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-2",children:i.jsx("span",{className:"font-medium text-xs",children:r.visit_id||"-"})}),i.jsx("td",{className:"py-3 px-2",children:i.jsx("span",{className:"text-gray-900",children:r.patient_name})}),i.jsx("td",{className:"py-3 px-2",children:i.jsx("span",{className:"text-gray-600",children:r.payer_type})}),i.jsx("td",{className:"py-3 px-2 text-right",children:i.jsx("span",{className:"font-medium",children:e(r.bill_amount)})}),i.jsxs("td",{className:"py-3 px-2 text-right",children:[i.jsx("span",{className:`font-medium ${r.received_amount?"text-green-600":"text-gray-400"}`,children:r.received_amount?e(r.received_amount):"-"}),r.deduction_amount&&r.deduction_amount>0&&i.jsxs("span",{className:"block text-xs text-red-500",children:["-",e(r.deduction_amount)]})]}),i.jsxs("td",{className:"py-3 px-2",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t[r.status]||"bg-gray-100 text-gray-800"}`,children:n[r.status]||r.status}),r.nmi&&i.jsx("span",{className:"block text-xs text-purple-600 mt-1 truncate max-w-[120px]",title:r.nmi,children:r.nmi})]}),i.jsx("td",{className:"py-3 px-2 text-gray-600 text-sm",children:r.date_of_submission?new Date(r.date_of_submission).toLocaleDateString("en-IN"):"-"})]})}async function fS(){const{data:r,error:e}=await Re.from("corporate_collection_management").select("id, disposition, sub_disposition, corporate_company");if(e)throw console.error("Error fetching NMI summary:",e),e;const t=new Map;r==null||r.forEach(l=>{var p,x,y;const u=l.corporate_company||"Unknown";t.has(u)||t.set(u,{count:0,pendingCount:0});const h=t.get(u);h.count++,(((p=l.disposition)==null?void 0:p.toLowerCase().includes("pending"))||((x=l.disposition)==null?void 0:x.toLowerCase().includes("process"))||((y=l.disposition)==null?void 0:y.toLowerCase().includes("open")))&&h.pendingCount++});const n=Array.from(t.entries()).map(([l,u])=>({payer:l,count:u.count,pendingCount:u.pendingCount})),o=(r==null?void 0:r.filter(l=>{var u,h;return((u=l.disposition)==null?void 0:u.toLowerCase().includes("pending"))||((h=l.disposition)==null?void 0:h.toLowerCase().includes("process"))}).length)||0;return{totalNMIs:(r==null?void 0:r.length)||0,pendingNMIs:o,resolvedNMIs:((r==null?void 0:r.length)||0)-o,byPayer:n.sort((l,u)=>u.count-l.count)}}async function mS(r){const e=(r==null?void 0:r.limit)||20,t=(r==null?void 0:r.offset)||0;let n=Re.from("corporate_collection_management").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(t,t+e-1);r!=null&&r.payer&&(n=n.eq("corporate_company",r.payer)),r!=null&&r.disposition&&(n=n.eq("disposition",r.disposition));const{data:o,count:l,error:u}=await n;if(u)throw console.error("Error fetching NMI list:",u),u;let h=(o==null?void 0:o.map(f=>({id:f.id,corporate_company:f.corporate_company||"Unknown",contract_type:f.contract_type||"",disposition:f.disposition||"",sub_disposition:f.sub_disposition||"",disposition_date:f.disposition_date||null,disposition_notes:f.disposition_notes||null,corporate_response:f.corporate_response||null,reason_for_delay:f.reason_for_delay||null,promised_clearance_date:f.promised_clearance_date||null,collection_officer:f.collection_officer||null,report_date:f.report_date||null,remarks:f.remarks||null,action_required:f.action_required||null,next_steps:f.next_steps||null,management_escalation:f.management_escalation||null,created_at:f.created_at,updated_at:f.updated_at||f.created_at})))||[];if(r!=null&&r.search){const f=r.search.toLowerCase();h=h.filter(p=>p.corporate_company.toLowerCase().includes(f)||p.disposition.toLowerCase().includes(f)||p.sub_disposition.toLowerCase().includes(f)||p.remarks&&p.remarks.toLowerCase().includes(f))}return{data:h,count:l||0}}async function pS(){const{data:r,error:e}=await Re.from("corporate_collection_management").select("disposition");return e?(console.error("Error fetching dispositions:",e),[]):[...new Set((r==null?void 0:r.map(n=>n.disposition).filter(Boolean))||[])].sort()}async function gS(){const{data:r,error:e}=await Re.from("corporate_collection_management").select("corporate_company");return e?(console.error("Error fetching payers:",e),[]):[...new Set((r==null?void 0:r.map(n=>n.corporate_company).filter(Boolean))||[])].sort()}const us={all:["nmi"],summary:()=>[...us.all,"summary"],list:()=>[...us.all,"list"],listFiltered:r=>[...us.list(),r],detail:r=>[...us.all,"detail",r],dispositions:()=>[...us.all,"dispositions"],payers:()=>[...us.all,"payers"]};function xS(){return bn({queryKey:us.summary(),queryFn:fS,staleTime:300*1e3,refetchOnWindowFocus:!1})}function yS(r){return bn({queryKey:us.listFiltered(r),queryFn:()=>mS(r),staleTime:120*1e3,refetchOnWindowFocus:!1})}function vS(){return bn({queryKey:us.dispositions(),queryFn:pS,staleTime:1800*1e3,refetchOnWindowFocus:!1})}function wS(){return bn({queryKey:us.payers(),queryFn:gS,staleTime:1800*1e3,refetchOnWindowFocus:!1})}function bS(){const[r,e]=S.useState(0),[t,n]=S.useState(""),[o,l]=S.useState(""),[u,h]=S.useState(""),{data:f,isLoading:p,error:x}=xS(),{data:y}=vS(),{data:b}=wS(),{data:w,isLoading:N}=yS({limit:20,offset:r*20,payer:t||void 0,disposition:o||void 0,search:u||void 0});return x?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"card max-w-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("span",{className:"material-icon text-red-600",children:"error"}),i.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Error Loading NMI Data"})]}),i.jsx("p",{className:"text-gray-700 mb-4",children:x.message}),i.jsxs("a",{href:"/",className:"btn-primary w-full justify-center",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"home"}),"Back to Home"]})]})}):i.jsx(by,{pageName:"NMI Claims Tracker",description:"Track and manage Note of Medical Intervention (NMI) claims and responses from insurance providers.",children:i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsx(Od,{icon:"business",iconColor:"blue",value:(f==null?void 0:f.totalNMIs)||0,label:"Total Records",subtext:"Corporate collection tracking",loading:p}),i.jsx(Od,{icon:"pending",iconColor:"orange",value:(f==null?void 0:f.pendingNMIs)||0,label:"Pending",subtext:"Awaiting resolution",loading:p}),i.jsx(Od,{icon:"check_circle",iconColor:"green",value:(f==null?void 0:f.resolvedNMIs)||0,label:"Resolved",subtext:"Completed items",loading:p})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"lg:col-span-2 card",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"business"}),"By Corporate/Payer"]}),p?i.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(_=>i.jsx("div",{className:"h-12 bg-gray-200 rounded"},_))}):f&&f.byPayer.length>0?i.jsx("div",{className:"space-y-3",children:f.byPayer.map((_,j)=>i.jsx(_S,{payer:_},j))}):i.jsx("p",{className:"text-gray-500 text-sm",children:"No data available"})]}),i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"analytics"}),"Resolution Rate"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Resolution Rate"}),i.jsx("span",{className:"text-lg font-semibold text-green-600",children:f&&f.totalNMIs>0?`${(f.resolvedNMIs/f.totalNMIs*100).toFixed(1)}%`:"0%"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Pending Rate"}),i.jsx("span",{className:"text-lg font-semibold text-orange-600",children:f&&f.totalNMIs>0?`${(f.pendingNMIs/f.totalNMIs*100).toFixed(1)}%`:"0%"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Total Corporates"}),i.jsx("span",{className:"text-lg font-semibold",children:(f==null?void 0:f.byPayer.length)||0})]})]})]})]}),i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"list_alt"}),"Collection Records"]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Search...",value:u,onChange:_=>{h(_.target.value),e(0)},className:"px-3 py-2 pl-9 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),i.jsx("span",{className:"material-icon absolute left-2 top-1/2 -translate-y-1/2 text-gray-400",style:{fontSize:"18px"},children:"search"})]}),i.jsxs("select",{value:t,onChange:_=>{n(_.target.value),e(0)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[i.jsx("option",{value:"",children:"All Corporates"}),b==null?void 0:b.map((_,j)=>i.jsx("option",{value:_,children:_},j))]}),i.jsxs("select",{value:o,onChange:_=>{l(_.target.value),e(0)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[i.jsx("option",{value:"",children:"All Dispositions"}),y==null?void 0:y.map((_,j)=>i.jsx("option",{value:_,children:_},j))]})]})]}),N?i.jsx("div",{className:"animate-pulse space-y-2",children:[1,2,3,4,5].map(_=>i.jsx("div",{className:"h-16 bg-gray-100 rounded"},_))}):w&&w.data.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200",children:[i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Corporate"}),i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Contract Type"}),i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Disposition"}),i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Sub-Disposition"}),i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Officer"}),i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Escalation"}),i.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Date"})]})}),i.jsx("tbody",{children:w.data.map(_=>i.jsx(jS,{nmi:_},_.id))})]})}),i.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",r*20+1," to ",Math.min((r+1)*20,w.count)," of ",w.count]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>e(_=>Math.max(0,_-1)),disabled:r===0,className:"btn-secondary text-sm disabled:opacity-50",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"18px"},children:"chevron_left"}),"Prev"]}),i.jsxs("button",{onClick:()=>e(_=>_+1),disabled:(r+1)*20>=(w.count||0),className:"btn-secondary text-sm disabled:opacity-50",children:["Next",i.jsx("span",{className:"material-icon",style:{fontSize:"18px"},children:"chevron_right"})]})]})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("span",{className:"material-icon text-gray-400",style:{fontSize:"48px"},children:"inbox"}),i.jsx("p",{className:"text-gray-500 mt-2",children:"No records found"})]})]})]}),i.jsx("footer",{className:"mt-16 py-6 border-t border-gray-200 bg-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-xs text-gray-400",children:i.jsx("p",{children:"Version 1.2 | Last Updated: 2026-01-12 | zeroriskagent.com"})})})]})})}function Od({icon:r,iconColor:e,value:t,label:n,subtext:o,loading:l}){const u={blue:"text-blue-600",yellow:"text-yellow-600",green:"text-green-600",red:"text-red-600",orange:"text-orange-600",purple:"text-purple-600"};return i.jsx("div",{className:"card",children:l?i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`material-icon ${u[e]}`,children:r}),i.jsx("span",{className:"text-2xl font-bold",children:t})]}),i.jsx("p",{className:"text-sm text-gray-600",children:n}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o})]})})}function _S({payer:r}){const e=r.count>0?r.pendingCount/r.count*100:0;return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:r.payer}),i.jsxs("p",{className:"text-xs text-gray-500",children:[r.count," total records"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-semibold text-orange-600",children:[r.pendingCount," pending"]}),i.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full mt-1",children:i.jsx("div",{className:"h-2 bg-orange-500 rounded-full",style:{width:`${e}%`}})})]})]})}function jS({nmi:r}){const e={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"},t=n=>{const o=n.toLowerCase();return o.includes("pending")||o.includes("process")?e.pending:o.includes("approved")||o.includes("cleared")?e.approved:o.includes("rejected")||o.includes("denied")?e.rejected:"bg-blue-100 text-blue-800"};return i.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-2",children:i.jsx("span",{className:"font-medium text-gray-900",children:r.corporate_company})}),i.jsx("td",{className:"py-3 px-2",children:i.jsx("span",{className:"text-gray-600",children:r.contract_type||"-"})}),i.jsx("td",{className:"py-3 px-2",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t(r.disposition)}`,children:r.disposition||"-"})}),i.jsx("td",{className:"py-3 px-2",children:i.jsx("span",{className:"text-gray-600 text-xs",children:r.sub_disposition||"-"})}),i.jsx("td",{className:"py-3 px-2",children:i.jsx("span",{className:"text-gray-600",children:r.collection_officer||"-"})}),i.jsx("td",{className:"py-3 px-2",children:r.management_escalation==="Yes"?i.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Escalated"}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"py-3 px-2 text-gray-600",children:r.disposition_date?new Date(r.disposition_date).toLocaleDateString("en-IN"):"-"})]})}const fo=my||Re,uh="claim-uploads";async function NS(r,e,t=null){try{const n=Date.now(),o=r.name.replace(/[^a-zA-Z0-9.-]/g,"_"),l=`${e}/${n}_${o}`,{error:u}=await fo.storage.from(uh).upload(l,r,{cacheControl:"3600",upsert:!1});if(u)return console.error("Storage upload error:",u),{success:!1,upload:null,error:u.message||"Failed to upload file to storage"};const{data:h,error:f}=await fo.from("file_uploads").insert({file_name:r.name,file_size:r.size,file_type:r.type||ES(r.name),storage_path:l,status:"pending",uploaded_by:e,hospital_id:t}).select().single();return f?(console.error("Database insert error:",f),await fo.storage.from(uh).remove([l]),{success:!1,upload:null,error:f.message||"Failed to save upload record"}):{success:!0,upload:_y(h),error:null}}catch(n){return console.error("Upload error:",n),{success:!1,upload:null,error:n instanceof Error?n.message:"Unknown upload error"}}}async function SS(r,e=null,t=20){let n=Re.from("file_uploads").select("*",{count:"exact"}).order("created_at",{ascending:!1}).limit(t);e?n=n.eq("hospital_id",e):n=n.eq("uploaded_by",r);const{data:o,count:l,error:u}=await n;if(u)throw console.error("Error fetching uploads:",u),u;return{data:(o||[]).map(_y),count:l||0}}async function kS(r){try{const{data:e,error:t}=await Re.from("file_uploads").select("storage_path").eq("id",r).single();if(t)return{success:!1,error:t.message};if(e!=null&&e.storage_path){const{error:o}=await fo.storage.from(uh).remove([e.storage_path]);o&&console.warn("Storage deletion error:",o)}const{error:n}=await fo.from("file_uploads").delete().eq("id",r);return n?{success:!1,error:n.message}:{success:!0,error:null}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown delete error"}}}function _y(r){return{id:r.id,file_name:r.file_name,file_size:r.file_size,file_type:r.file_type,storage_path:r.storage_path,status:r.status,uploaded_by:r.uploaded_by,hospital_id:r.hospital_id,records_count:r.records_count,error_message:r.error_message,created_at:r.created_at,updated_at:r.updated_at||r.created_at}}function ES(r){var t;switch((t=r.split(".").pop())==null?void 0:t.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"webp":return"image/webp";case"csv":return"text/csv";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xls":return"application/vnd.ms-excel";default:return"application/octet-stream"}}function Pg(r){if(r===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(r)/Math.log(e));return parseFloat((r/Math.pow(e,n)).toFixed(1))+" "+t[n]}const Ha={all:["uploads"],list:()=>[...Ha.all,"list"],listFiltered:(r,e)=>[...Ha.list(),r,e],detail:r=>[...Ha.all,"detail",r]};function CS(r=20){const{user:e,profile:t}=Jr(),n=(e==null?void 0:e.id)||"",o=(t==null?void 0:t.hospital_id)||null;return bn({queryKey:Ha.listFiltered(n,o),queryFn:()=>SS(n,o,r),enabled:!!n,staleTime:60*1e3,refetchOnWindowFocus:!1})}function TS(){const r=wc(),{user:e,profile:t}=Jr();return Rx({mutationFn:async n=>e!=null&&e.id?NS(n,e.id,(t==null?void 0:t.hospital_id)||null):{success:!1,upload:null,error:"User not authenticated"},onSuccess:n=>{n.success&&r.invalidateQueries({queryKey:Ha.list()})}})}function RS(){const r=wc();return Rx({mutationFn:kS,onSuccess:e=>{e.success&&r.invalidateQueries({queryKey:Ha.list()})}})}const Fh="AIzaSyAkKDKgkm4IlzdloJG9Zv7pKGXt4hboGBE";async function Mh(r){return new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>{const o=n.result.split(",")[1];e(o)},n.onerror=t,n.readAsDataURL(r)})}const zh=["gemini-2.5-flash","gemini-2.5-flash-lite"];async function PS(r){var e,t,n,o,l,u;try{const h=await Mh(r),f=r.type||"image/jpeg",p=`This image contains a table or spreadsheet with multiple healthcare claim records. This could be from any healthcare panel system such as ESIC, CGHS, ECHS, Ayushman Bharat, State Government health scheme, private insurance, or TPA portal. Extract ALL rows from the table.

For EACH row in the table, extract these fields (use null if not visible):
- sNo: Serial number or row number
- patientName: Patient's full name
- patientId: Patient ID, UHID, or IP number
- claimNumber: Claim number or Bill number
- claimDate: Date of claim
- admissionDate: Admission date
- dischargeDate: Discharge date
- claimAmount: Claim/Bill amount
- approvedAmount: Approved amount
- pendingAmount: Pending/Outstanding amount
- hospitalName: Hospital name
- diagnosis: Diagnosis or medical condition
- diagnosisCode: ICD code if visible
- payerName: Insurance/Payer (ESIC, CGHS, ECHS, etc.)
- policyNumber: Policy or insurance number
- status: Claim status
- remarks: Any remarks or notes

Also detect which healthcare panel/payer system this image belongs to from visual cues (logos, headers, terminology). Use one of: "esic", "cghs", "echs", "state_govt", "private_insurance", "corporate", "other".

IMPORTANT: Extract EVERY row visible in the table. Do not skip any rows.

Return ONLY valid JSON in this exact format:
{
  "panelType": "esic",
  "records": [
    {
      "sNo": 1,
      "patientName": "...",
      "patientId": "...",
      "claimNumber": "...",
      "claimDate": "...",
      "admissionDate": "...",
      "dischargeDate": "...",
      "claimAmount": "...",
      "approvedAmount": "...",
      "pendingAmount": "...",
      "hospitalName": "...",
      "diagnosis": "...",
      "payerName": "...",
      "status": "...",
      "remarks": "..."
    }
  ],
  "totalCount": 25,
  "confidence": 85
}`;let x=null,y="";for(const j of zh)try{if(x=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${j}:generateContent?key=${Fh}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{inlineData:{mimeType:f,data:h}},{text:p}]}],generationConfig:{temperature:.1,topP:1,maxOutputTokens:8192}})}),x.ok){console.log(`Successfully used model: ${j}`);break}else{const P=await x.text().catch(()=>"Could not read error body");y=`${j}: ${x.status}`,console.warn(`Model ${j} failed with status ${x.status}, trying next...`,P),x=null}}catch(P){y=`${j}: ${P instanceof Error?P.message:"Unknown error"}`,console.warn(`Model ${j} error:`,P)}if(!x||!x.ok)return{success:!1,records:[],totalCount:0,confidence:0,error:`All Gemini models failed. Last error: ${y}`};const w=(l=(o=(n=(t=(e=(await x.json()).candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:n.parts)==null?void 0:o[0])==null?void 0:l.text;if(!w)return{success:!1,records:[],totalCount:0,confidence:0,error:"No response from Gemini API"};let N=w;const _=w.match(/```(?:json)?\s*([\s\S]*?)```/);_&&(N=_[1].trim());try{const j=JSON.parse(N);return{success:!0,records:j.records||[],totalCount:j.totalCount||((u=j.records)==null?void 0:u.length)||0,confidence:j.confidence||80,panelType:j.panelType||"other",error:null}}catch(j){return console.error("JSON parse error:",j,"Raw response:",w),{success:!1,records:[],totalCount:0,confidence:0,error:"Failed to parse extraction result"}}}catch(h){return console.error("Gemini extraction error:",h),{success:!1,records:[],totalCount:0,confidence:0,error:h instanceof Error?h.message:"Unknown error during extraction"}}}async function AS(r){var e,t,n,o,l;try{const u=await Mh(r),h=r.type||"image/jpeg",f=`This image contains a healthcare claims processing dashboard with a table showing different stages/phases and their statuses. This could be from any healthcare panel system such as ESIC, CGHS, ECHS, Ayushman Bharat, State Government health scheme, private insurance, or TPA portal.

Detect which panel/payer system this belongs to from visual cues (logos, headers, terminology, stage names). Use one of: "esic", "cghs", "echs", "state_govt", "private_insurance", "corporate", "other".

The table typically has columns like:
- Stage/Phase (left column - processing stages)
- Status (second column - specific status within each stage)
- In Patient / IP (numbers)
- OPD Patient / OP (numbers)
- Counts / Total (numbers)
- Enhancement / Additional (numbers)

For EACH stage, extract ALL statuses listed under it with their corresponding numbers.
Pay attention to statuses that appear in red color - these should be marked as "isHighlighted: true".

Also extract:
- Hospital name (from the top of the dashboard)
- Total Claims row (usually at the bottom)

Return ONLY valid JSON in this exact format:
{
  "panelType": "esic",
  "hospitalName": "Hospital Name Here",
  "extractedAt": "${new Date().toISOString()}",
  "totalClaims": {
    "inPatient": 159,
    "opd": 66,
    "counts": 225,
    "enhancement": 0
  },
  "stageData": [
    {
      "stage": "Stage Name",
      "statuses": [
        {
          "status": "Status Name",
          "inPatient": 28,
          "opd": 65,
          "counts": 93,
          "enhancement": 0,
          "isHighlighted": false
        }
      ]
    }
  ],
  "confidence": 90
}`;let p=null,x="";for(const _ of zh)try{if(p=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${_}:generateContent?key=${Fh}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{inlineData:{mimeType:h,data:u}},{text:f}]}],generationConfig:{temperature:.1,topP:1,maxOutputTokens:8192}})}),p.ok){console.log(`Successfully used model for dashboard extraction: ${_}`);break}else x=`${_}: ${p.status}`,console.warn(`Model ${_} failed with status ${p.status}, trying next...`),p=null}catch(j){x=`${_}: ${j instanceof Error?j.message:"Unknown error"}`,console.warn(`Model ${_} error:`,j)}if(!p||!p.ok)return{success:!1,data:null,error:`All Gemini models failed. Last error: ${x}`,confidence:0};const b=(l=(o=(n=(t=(e=(await p.json()).candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:n.parts)==null?void 0:o[0])==null?void 0:l.text;if(!b)return{success:!1,data:null,error:"No response from Gemini API",confidence:0};let w=b;const N=b.match(/```(?:json)?\s*([\s\S]*?)```/);N&&(w=N[1].trim());try{const _=JSON.parse(w);return{success:!0,data:{panelType:_.panelType||"other",hospitalName:_.hospitalName||"Unknown Hospital",extractedAt:_.extractedAt||new Date().toISOString(),totalClaims:_.totalClaims||{inPatient:0,opd:0,counts:0,enhancement:0},stageData:_.stageData||[]},error:null,confidence:_.confidence||80}}catch(_){return console.error("Dashboard JSON parse error:",_,"Raw response:",b),{success:!1,data:null,error:"Failed to parse ESIC extraction result",confidence:0}}}catch(u){return console.error("Dashboard Gemini extraction error:",u),{success:!1,data:null,error:u instanceof Error?u.message:"Unknown error during dashboard extraction",confidence:0}}}async function OS(r){var e,t,n,o,l,u;try{const h=await Mh(r),f=r.type||"image/jpeg",p=`This image shows a healthcare claims processing dashboard displaying a "Need More Info", "Reverted Cases", or "Pending Info" table. This could be from any healthcare panel system such as ESIC, CGHS, ECHS, Ayushman Bharat, State Government health scheme, private insurance, or TPA portal.

Detect which panel/payer system this belongs to from visual cues (logos, headers, terminology). Use one of: "esic", "cghs", "echs", "state_govt", "private_insurance", "corporate", "other".

Extract ALL rows from the table with these columns (use null if a column is not present):
- Sr. (Serial number)
- ID (claim ID, may be shown in yellow/link color)
- Admit No. (admission number)
- Card ID (beneficiary card ID)
- Patient Name (full name)
- Claim Amt (claim amount in rupees, numeric)
- Approved Amt (approved amount)
- Reverted Back On (date and time)

Also extract:
- Hospital name from the top of the dashboard
- Page info if visible (e.g., "Page 1 of 2")

IMPORTANT:
- Extract EVERY visible row from the table
- Keep the ID values exactly as shown (they are claim IDs)
- Keep amounts as numbers without currency symbols
- Keep dates in their original format

Return ONLY valid JSON in this exact format:
{
  "panelType": "esic",
  "hospitalName": "HOSPITAL NAME",
  "pageInfo": "Page 1 of 2",
  "records": [
    {
      "sr": 1,
      "id": "6751130",
      "admitNo": "IH25D12009",
      "cardId": "2302791383",
      "patientName": "Mr. Kailash Zha",
      "claimAmt": 230401,
      "approvedAmt": 0,
      "revertedBackOn": "18-Jan-2026 15:58"
    }
  ],
  "totalCount": 25,
  "confidence": 92
}`;let x=null,y="";for(const j of zh)try{if(x=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${j}:generateContent?key=${Fh}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{inlineData:{mimeType:f,data:h}},{text:p}]}],generationConfig:{temperature:.1,topP:1,maxOutputTokens:8192}})}),x.ok){console.log(`Successfully used model for NMI extraction: ${j}`);break}else y=`${j}: ${x.status}`,console.warn(`Model ${j} failed with status ${x.status}, trying next...`),x=null}catch(P){y=`${j}: ${P instanceof Error?P.message:"Unknown error"}`,console.warn(`Model ${j} error:`,P)}if(!x||!x.ok)return{success:!1,records:[],totalCount:0,confidence:0,hospitalName:"",error:`All Gemini models failed. Last error: ${y}`};const w=(l=(o=(n=(t=(e=(await x.json()).candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:n.parts)==null?void 0:o[0])==null?void 0:l.text;if(!w)return{success:!1,records:[],totalCount:0,confidence:0,hospitalName:"",error:"No response from Gemini API"};let N=w;const _=w.match(/```(?:json)?\s*([\s\S]*?)```/);_&&(N=_[1].trim());try{const j=JSON.parse(N);return{success:!0,records:j.records||[],totalCount:j.totalCount||((u=j.records)==null?void 0:u.length)||0,confidence:j.confidence||80,hospitalName:j.hospitalName||"",panelType:j.panelType||"other",pageInfo:j.pageInfo,error:null}}catch(j){return console.error("NMI JSON parse error:",j,"Raw response:",w),{success:!1,records:[],totalCount:0,confidence:0,hospitalName:"",error:"Failed to parse NMI extraction result"}}}catch(h){return console.error("NMI Gemini extraction error:",h),{success:!1,records:[],totalCount:0,confidence:0,hospitalName:"",error:h instanceof Error?h.message:"Unknown error during NMI extraction"}}}function IS(){var _r,Qr;const[r,e]=S.useState(!1),[t,n]=S.useState(null),[o,l]=S.useState(null),[u,h]=S.useState(!1),[f,p]=S.useState([]),[x,y]=S.useState(0),[b,w]=S.useState(null),[N,_]=S.useState(null),[j,P]=S.useState(!1),[T,C]=S.useState([]),[F,A]=S.useState(!1),[K,H]=S.useState(""),[z,V]=S.useState(""),[W,Z]=S.useState(!1),[ae,de]=S.useState(!1),_e=S.useRef(null),{data:$e,isLoading:Qe}=CS(),Ne=TS(),ne=RS(),we=re=>{re.preventDefault(),e(!0)},ie=re=>{re.preventDefault(),e(!1)},D=re=>{re.preventDefault(),e(!1);const Le=re.dataTransfer.files;Le.length>0&&Pe(Le[0])},G=re=>{const Le=re.target.files;Le&&Le.length>0&&Pe(Le[0])},Pe=async re=>{const Le=["image/jpeg","image/png","image/gif","image/webp"],Ee=[".jpg",".jpeg",".png",".gif",".webp"].some(k=>re.name.toLowerCase().endsWith(k));if(!Le.includes(re.type)&&!Ee){alert("Please select a valid image format (JPG, PNG, GIF, or WebP)");return}if(re.size>10485760){alert("File size must be less than 10MB");return}n(re),p([]),y(0),w(null),_(null),P(!1),C([]),A(!1),H(""),V(""),Z(!1);const qe=new FileReader;qe.onloadend=()=>{l(qe.result)},qe.readAsDataURL(re),h(!0);try{const k=await OS(re);if(k.success&&k.records.length>0)A(!0),C(k.records),H(k.hospitalName),y(k.confidence),V(k.panelType||"other");else{const $=await AS(re);if($.success&&$.data&&$.data.stageData.length>0)P(!0),_($.data),y($.confidence),V($.data.panelType||"other");else{P(!1);const q=await PS(re);q.success&&q.records.length>0?(p(q.records),y(q.confidence),V(q.panelType||"other")):w(q.error||"No records found in image")}}}catch(k){w(k instanceof Error?k.message:"Extraction failed")}finally{h(!1)}},Oe=()=>{var re;(re=_e.current)==null||re.click()},Me=()=>{n(null),l(null),p([]),y(0),w(null),_(null),P(!1),C([]),A(!1),H(""),V(""),Z(!1),_e.current&&(_e.current.value="")},Fe=async()=>{if(!t)return;const re=await Ne.mutateAsync(t);re.success?(n(null),l(null),_e.current&&(_e.current.value="")):alert(re.error||"Upload failed. Please try again.")},Ke=async()=>{var re;de(!0);try{if(N&&j){const{error:Le}=await Re.from("esic_claims_extractions").insert({hospital_name:N.hospitalName,extracted_at:N.extractedAt,total_claims:N.totalClaims,stage_data:N.stageData,payer_type:z||"other"});if(Le)throw Le}if(T.length>0&&F){const{error:Le}=await Re.from("esic_claims_extractions").insert({hospital_name:K||"Unknown Hospital",extracted_at:new Date().toISOString(),total_claims:{totalRecords:T.length},stage_data:T,payer_type:z||"other"});if(Le)throw Le}if(f.length>0&&!j&&!F){const{error:Le}=await Re.from("esic_claims_extractions").insert({hospital_name:((re=f[0])==null?void 0:re.hospitalName)||"Unknown Hospital",extracted_at:new Date().toISOString(),total_claims:{totalRecords:f.length},stage_data:f,payer_type:z||"other"});if(Le)throw Le}Z(!0),alert("Data saved to database successfully!")}catch(Le){console.error("Error saving to database:",Le),alert(`Failed to save data: ${Le instanceof Error?Le.message:"Unknown error"}`)}finally{de(!1)}},Ve=async re=>{if(!confirm("Are you sure you want to delete this upload?"))return;const Le=await ne.mutateAsync(re);Le.success||alert(Le.error||"Delete failed. Please try again.")},et=re=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"})[re]||"bg-gray-100 text-gray-800",pt=re=>re.startsWith("image/")?"image":re.includes("csv")?"description":re.includes("spreadsheet")||re.includes("excel")?"table_chart":"insert_drive_file",fs=f.length===0?[]:[{key:"sNo",label:"S.No"},{key:"patientName",label:"Patient Name"},{key:"patientId",label:"Patient ID"},{key:"claimNumber",label:"Claim No"},{key:"claimDate",label:"Claim Date"},{key:"admissionDate",label:"Admission"},{key:"dischargeDate",label:"Discharge"},{key:"claimAmount",label:"Claim Amount"},{key:"approvedAmount",label:"Approved"},{key:"pendingAmount",label:"Pending"},{key:"diagnosis",label:"Diagnosis"},{key:"payerName",label:"Payer"},{key:"status",label:"Status"},{key:"remarks",label:"Remarks"}].filter(Le=>f.some(nt=>{const U=nt[Le.key];return U!=null&&U!==""}));return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("main",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"upload_file"}),"Upload Images"]}),i.jsx("p",{className:"mt-2 text-gray-600",children:"Upload images for claim documentation, denial letters, or supporting documents. Supported formats include JPG, PNG, GIF, and WebP."})]}),i.jsxs("div",{className:`grid gap-6 ${f.length>0||N||T.length>0?"grid-cols-1 lg:grid-cols-3":"grid-cols-1 max-w-4xl"}`,children:[i.jsx("div",{className:f.length>0||N||T.length>0?"lg:col-span-1":"",children:i.jsxs("div",{className:"card",children:[i.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"cloud_upload"}),"File Upload"]}),i.jsxs("div",{onDragOver:we,onDragLeave:ie,onDrop:D,className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${r?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-gray-400"}`,children:[i.jsx("input",{ref:_e,type:"file",accept:"image/*",onChange:G,className:"hidden"}),t?i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex items-center justify-center",children:o?i.jsx("img",{src:o,alt:"Preview",className:"max-h-40 max-w-full rounded-lg shadow-md object-contain"}):i.jsx("span",{className:"material-icon text-green-600",style:{fontSize:"48px"},children:"image"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:t.name}),i.jsx("p",{className:"text-xs text-gray-500",children:Pg(t.size)})]}),i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsxs("button",{onClick:Me,className:"btn-secondary text-xs px-3 py-1.5",disabled:Ne.isPending||u,children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"close"}),"Remove"]}),i.jsx("button",{onClick:Fe,className:"btn-primary text-xs px-3 py-1.5",disabled:Ne.isPending||u,children:Ne.isPending?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-icon animate-spin",style:{fontSize:"14px"},children:"refresh"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"upload"}),"Upload"]})})]})]}):i.jsxs("div",{className:"space-y-3 cursor-pointer",onClick:Oe,children:[i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("span",{className:`material-icon ${r?"text-primary-500":"text-gray-400"}`,style:{fontSize:"40px"},children:"cloud_upload"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-700 font-medium text-sm",children:"Drag and drop your file here"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"or click to browse"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG, GIF, WebP (Max 10MB)"})]})]}),u&&i.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg flex items-center gap-3",children:[i.jsx("span",{className:"material-icon animate-spin text-blue-600",style:{fontSize:"20px"},children:"refresh"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Extracting all records..."}),i.jsx("p",{className:"text-xs text-blue-700",children:"AI is analyzing the table"})]})]}),b&&!u&&i.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg flex items-start gap-2",children:[i.jsx("span",{className:"material-icon text-yellow-600",style:{fontSize:"18px"},children:"warning"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Extraction issue"}),i.jsx("p",{className:"text-xs text-yellow-700",children:b})]})]}),T.length>0&&F&&!u&&i.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-green-600",style:{fontSize:"20px"},children:"info"}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-medium text-green-800",children:[z?z.toUpperCase():""," NMI Cases extracted"]}),i.jsxs("p",{className:"text-xs text-green-700",children:[K," - ",T.length," records"]})]})]}),i.jsxs("span",{className:"text-xs bg-green-200 text-green-800 px-2 py-1 rounded-full",children:[x,"% confidence"]})]})}),N&&j&&!u&&i.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-green-600",style:{fontSize:"20px"},children:"account_balance"}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-medium text-green-800",children:[z?z.toUpperCase():"Claims"," Dashboard extracted"]}),i.jsxs("p",{className:"text-xs text-green-700",children:[N.hospitalName," - ",N.totalClaims.counts," total claims"]})]})]}),i.jsxs("span",{className:"text-xs bg-green-200 text-green-800 px-2 py-1 rounded-full",children:[x,"% confidence"]})]})}),f.length>0&&!j&&!u&&i.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-green-600",style:{fontSize:"20px"},children:"check_circle"}),i.jsx("div",{children:i.jsxs("p",{className:"text-sm font-medium text-green-800",children:[f.length," records extracted"]})})]}),i.jsxs("span",{className:"text-xs bg-green-200 text-green-800 px-2 py-1 rounded-full",children:[x,"% confidence"]})]})}),Ne.isError&&i.jsxs("div",{className:"mt-4 p-3 bg-red-50 rounded-lg flex items-start gap-2",children:[i.jsx("span",{className:"material-icon text-red-600",style:{fontSize:"18px"},children:"error"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-red-800",children:"Upload failed"}),i.jsx("p",{className:"text-xs text-red-700",children:(_r=Ne.error)==null?void 0:_r.message})]})]}),Ne.isSuccess&&((Qr=Ne.data)==null?void 0:Qr.success)&&i.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-lg flex items-start gap-2",children:[i.jsx("span",{className:"material-icon text-green-600",style:{fontSize:"18px"},children:"check_circle"}),i.jsx("div",{children:i.jsx("p",{className:"text-sm font-medium text-green-800",children:"File uploaded successfully"})})]})]})}),T.length>0&&F&&i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-orange-600",children:"info"}),"Need More Info Cases"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm text-gray-500",children:K}),i.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:[T.length," records"]})]})]}),i.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:i.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-teal-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Sr."}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"ID"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Admit No."}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Card ID"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Patient Name"}),i.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-white uppercase tracking-wider",children:"Claim Amt"}),i.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-white uppercase tracking-wider",children:"Approved Amt"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Reverted Back On"})]})}),i.jsx("tbody",{className:"bg-teal-800 divide-y divide-teal-700",children:T.map((re,Le)=>i.jsxs("tr",{className:"hover:bg-teal-700 transition-colors",children:[i.jsx("td",{className:"px-3 py-2 text-sm text-teal-100 whitespace-nowrap",children:re.sr}),i.jsx("td",{className:"px-3 py-2 text-sm text-yellow-400 font-medium whitespace-nowrap",children:i.jsx("a",{href:"#",className:"hover:underline",children:re.id})}),i.jsx("td",{className:"px-3 py-2 text-sm text-teal-100 whitespace-nowrap",children:re.admitNo}),i.jsx("td",{className:"px-3 py-2 text-sm text-teal-100 whitespace-nowrap",children:re.cardId}),i.jsx("td",{className:"px-3 py-2 text-sm text-teal-100 whitespace-nowrap",children:re.patientName}),i.jsx("td",{className:"px-3 py-2 text-sm text-teal-100 whitespace-nowrap text-right font-medium",children:typeof re.claimAmt=="number"?re.claimAmt.toLocaleString("en-IN"):re.claimAmt}),i.jsx("td",{className:"px-3 py-2 text-sm text-teal-100 whitespace-nowrap text-right",children:typeof re.approvedAmt=="number"?re.approvedAmt.toLocaleString("en-IN"):re.approvedAmt}),i.jsx("td",{className:"px-3 py-2 text-sm text-teal-100 whitespace-nowrap",children:re.revertedBackOn})]},Le))})]})})}),i.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"info"}),T.length," NMI records extracted"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[W?i.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"check_circle"}),"Saved to database"]}):i.jsxs("button",{onClick:Ke,disabled:ae,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1 transition-colors",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:ae?"refresh":"save"}),ae?"Saving...":"Save Data"]}),i.jsxs("button",{className:"flex items-center gap-1 text-primary-600 hover:text-primary-700",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"download"}),"Export CSV"]})]})]})]})}),N&&j&&i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"account_balance"}),z?z.toUpperCase():"Claims"," Dashboard Data"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm text-gray-500",children:N.hospitalName}),i.jsxs("button",{onClick:()=>{localStorage.setItem("tempESICData",JSON.stringify({...N,panelType:z})),window.location.href="/dashboard/super-admin"},className:"text-xs bg-primary-600 text-white px-3 py-1.5 rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"dashboard"}),"View in Dashboard"]})]})]}),i.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:i.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{className:"bg-teal-700 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-white uppercase tracking-wider border-r border-teal-600 min-w-[180px]",children:"Stage"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-white uppercase tracking-wider border-r border-teal-600 min-w-[280px]",children:"Status"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-white uppercase tracking-wider border-r border-teal-600 min-w-[100px]",children:"In Patient"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-white uppercase tracking-wider border-r border-teal-600 min-w-[100px]",children:"OPD Patient"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-white uppercase tracking-wider border-r border-teal-600 min-w-[80px]",children:"Counts"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-white uppercase tracking-wider min-w-[100px]",children:"Enhancement"})]})}),i.jsxs("tbody",{children:[N.stageData.map((re,Le)=>re.statuses.map((nt,U)=>i.jsxs("tr",{className:`${U%2===0?"bg-teal-50":"bg-teal-100"} hover:bg-teal-200 transition-colors border-b border-teal-200`,children:[i.jsx("td",{className:`px-4 py-2 text-sm font-semibold text-teal-900 border-r border-teal-200 ${U===0?"bg-teal-200":"bg-transparent"}`,children:U===0?re.stage:""}),i.jsx("td",{className:`px-4 py-2 text-sm border-r border-teal-200 ${nt.isHighlighted?"text-red-700 font-medium":"text-teal-800"}`,children:nt.status}),i.jsx("td",{className:"px-4 py-2 text-sm text-teal-800 text-right border-r border-teal-200 font-medium",children:nt.inPatient}),i.jsx("td",{className:"px-4 py-2 text-sm text-teal-800 text-right border-r border-teal-200 font-medium",children:nt.opd}),i.jsx("td",{className:"px-4 py-2 text-sm text-teal-800 text-right border-r border-teal-200 font-medium",children:nt.counts}),i.jsx("td",{className:"px-4 py-2 text-sm text-teal-800 text-right font-medium",children:nt.enhancement})]},`${Le}-${U}`))),i.jsxs("tr",{className:"bg-teal-700 font-bold",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-white border-r border-teal-600",colSpan:2,children:"Total Claims"}),i.jsx("td",{className:"px-4 py-3 text-sm text-white text-right border-r border-teal-600",children:N.totalClaims.inPatient}),i.jsx("td",{className:"px-4 py-3 text-sm text-white text-right border-r border-teal-600",children:N.totalClaims.opd}),i.jsx("td",{className:"px-4 py-3 text-sm text-white text-right border-r border-teal-600",children:N.totalClaims.counts}),i.jsx("td",{className:"px-4 py-3 text-sm text-white text-right",children:N.totalClaims.enhancement})]})]})]})})}),i.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"info"}),"Data extracted from ",z?z.toUpperCase():"claims"," dashboard"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[W?i.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"check_circle"}),"Saved to database"]}):i.jsxs("button",{onClick:Ke,disabled:ae,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1 transition-colors",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:ae?"refresh":"save"}),ae?"Saving...":"Save Data"]}),i.jsxs("button",{className:"flex items-center gap-1 text-primary-600 hover:text-primary-700",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"download"}),"Export CSV"]})]})]})]})}),f.length>0&&!j&&i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"table_chart"}),"Extracted Records"]}),i.jsxs("span",{className:"text-sm text-gray-500",children:[f.length," rows"]})]}),i.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:i.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50 sticky top-0",children:i.jsx("tr",{children:fs.map(re=>i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:re.label},re.key))})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((re,Le)=>i.jsx("tr",{className:"hover:bg-gray-50",children:fs.map(nt=>i.jsx("td",{className:"px-3 py-2 text-sm text-gray-900 whitespace-nowrap",children:nt.key==="claimAmount"||nt.key==="approvedAmount"||nt.key==="pendingAmount"?i.jsx("span",{className:"font-medium",children:re[nt.key]||"-"}):nt.key==="status"?i.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${String(re.status||"").toLowerCase().includes("approved")?"bg-green-100 text-green-800":String(re.status||"").toLowerCase().includes("pending")?"bg-yellow-100 text-yellow-800":String(re.status||"").toLowerCase().includes("denied")||String(re.status||"").toLowerCase().includes("rejected")?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:re.status||"-"}):i.jsx("span",{className:"max-w-[150px] truncate block",title:String(re[nt.key]||""),children:re[nt.key]||"-"})},nt.key))},Le))})]})})}),i.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Scroll horizontally to see all columns"}),i.jsxs("div",{className:"flex items-center gap-3",children:[W?i.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"check_circle"}),"Saved to database"]}):i.jsxs("button",{onClick:Ke,disabled:ae,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1 transition-colors",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:ae?"refresh":"save"}),ae?"Saving...":"Save Data"]}),i.jsxs("button",{className:"flex items-center gap-1 text-primary-600 hover:text-primary-700",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"download"}),"Export CSV"]})]})]})]})})]}),i.jsxs("div",{className:"card mt-6 max-w-4xl",children:[i.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"history"}),"Recent Uploads"]}),Qe?i.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(re=>i.jsx("div",{className:"h-16 bg-gray-100 rounded"},re))}):$e&&$e.data.length>0?i.jsx("div",{className:"space-y-3",children:$e.data.map(re=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"material-icon text-primary-600",style:{fontSize:"32px"},children:pt(re.file_type)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:re.file_name}),i.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[i.jsx("span",{children:Pg(re.file_size)}),i.jsx("span",{children:"|"}),i.jsx("span",{children:new Date(re.created_at).toLocaleDateString("en-IN")}),re.records_count!==null&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:"|"}),i.jsxs("span",{children:[re.records_count," records"]})]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${et(re.status)}`,children:re.status.charAt(0).toUpperCase()+re.status.slice(1)}),i.jsx("button",{onClick:()=>Ve(re.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",disabled:ne.isPending,title:"Delete upload",children:i.jsx("span",{className:"material-icon",style:{fontSize:"20px"},children:"delete"})})]})]},re.id))}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("span",{className:"material-icon text-gray-400",style:{fontSize:"48px"},children:"inbox"}),i.jsx("p",{className:"text-gray-500 mt-2",children:"No recent uploads"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Your uploaded files will appear here"})]})]})]}),i.jsx("footer",{className:"mt-16 py-6 border-t border-gray-200 bg-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-xs text-gray-400",children:i.jsx("p",{children:"Version 2.2 | Last Updated: 2026-01-21 | zeroriskagent.com"})})})]})}const DS=["all","esic","cghs","echs","other"];function dh(r){switch(r==null?void 0:r.toLowerCase()){case"esic":return"bg-blue-100 text-blue-800";case"cghs":return"bg-purple-100 text-purple-800";case"echs":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function jy(r){return r?typeof r=="number"?r:r.counts!==void 0?r.counts:r.totalRecords!==void 0?r.totalRecords:"-":0}function $S(){const[r,e]=S.useState([]),[t,n]=S.useState(!0),[o,l]=S.useState("all"),[u,h]=S.useState(""),[f,p]=S.useState(""),[x,y]=S.useState(""),[b,w]=S.useState(null),[N,_]=S.useState(null);S.useEffect(()=>{j()},[]);const j=async()=>{try{n(!0);const{data:A,error:K}=await Re.from("esic_claims_extractions").select("*").order("created_at",{ascending:!1});if(K){console.error("Error fetching extractions:",K);return}e(A||[])}catch(A){console.error("Error fetching extractions:",A)}finally{n(!1)}},P=async A=>{if(confirm("Are you sure you want to delete this extraction?")){_(A);try{const{error:K}=await Re.from("esic_claims_extractions").delete().eq("id",A);K?alert(`Failed to delete: ${K.message}`):(e(H=>H.filter(z=>z.id!==A)),(b==null?void 0:b.id)===A&&w(null))}catch{alert("Failed to delete extraction")}finally{_(null)}}},T=r.filter(A=>{var K;return!(o!=="all"&&(((K=A.payer_type)==null?void 0:K.toLowerCase())||"other")!==o||u&&!A.hospital_name.toLowerCase().includes(u.toLowerCase())||f&&new Date(A.created_at).toISOString().split("T")[0]<f||x&&new Date(A.created_at).toISOString().split("T")[0]>x)}),C=r.length,F=r.reduce((A,K)=>{const H=(K.payer_type||"other").toLowerCase();return A[H]=(A[H]||0)+1,A},{});return t?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("span",{className:"material-icon text-primary-600 animate-pulse",style:{fontSize:"48px"},children:"autorenew"}),i.jsx("p",{className:"text-gray-600",children:"Loading extractions..."})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("main",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-primary-600",children:"analytics"}),"Extractions Dashboard"]}),i.jsx("p",{className:"mt-2 text-gray-600",children:"View and manage all extracted panel data from uploaded images."})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"material-icon text-gray-500",style:{fontSize:"20px"},children:"folder"}),i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Total"})]}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C})]}),["esic","cghs","echs","other"].map(A=>i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[i.jsx("div",{className:"flex items-center gap-2 mb-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${dh(A)}`,children:A.toUpperCase()})}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F[A]||0})]},A))]}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:i.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Panel Type:"}),i.jsx("select",{value:o,onChange:A=>l(A.target.value),className:"border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-primary-500 focus:border-primary-500",children:DS.map(A=>i.jsx("option",{value:A,children:A==="all"?"All Panels":A.toUpperCase()},A))})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"From:"}),i.jsx("input",{type:"date",value:f,onChange:A=>p(A.target.value),className:"border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-primary-500 focus:border-primary-500"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"To:"}),i.jsx("input",{type:"date",value:x,onChange:A=>y(A.target.value),className:"border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-primary-500 focus:border-primary-500"})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[200px]",children:[i.jsx("span",{className:"material-icon text-gray-400",style:{fontSize:"20px"},children:"search"}),i.jsx("input",{type:"text",placeholder:"Search hospital name...",value:u,onChange:A=>h(A.target.value),className:"border border-gray-300 rounded-lg px-3 py-1.5 text-sm w-full focus:ring-primary-500 focus:border-primary-500"})]}),i.jsxs("button",{onClick:j,className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-1.5 rounded-lg text-sm font-medium flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"16px"},children:"refresh"}),"Refresh"]})]})}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[T.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("span",{className:"material-icon text-gray-400",style:{fontSize:"48px"},children:"inbox"}),i.jsx("p",{className:"text-gray-500 mt-2",children:"No extractions found"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:r.length>0?"Try adjusting your filters":"Upload images to extract panel data"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:"#"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hospital Name"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Panel Type"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Extracted At"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Claims"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map((A,K)=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:K+1}),i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:A.hospital_name}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${dh(A.payer_type)}`,children:(A.payer_type||"other").toUpperCase()})}),i.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[new Date(A.created_at).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),i.jsx("span",{className:"text-gray-400 ml-1",children:new Date(A.created_at).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]}),i.jsx("td",{className:"px-4 py-3 text-sm text-center font-medium text-gray-900",children:jy(A.total_claims)}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsxs("button",{onClick:()=>w(A),className:"px-3 py-1 rounded text-xs font-medium flex items-center gap-1 transition-colors bg-gray-100 text-gray-700 hover:bg-gray-200",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"visibility"}),"View"]}),i.jsxs("button",{onClick:()=>P(A.id),disabled:N===A.id,className:"px-3 py-1 rounded text-xs font-medium bg-red-50 text-red-700 hover:bg-red-100 flex items-center gap-1 transition-colors disabled:opacity-50",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:N===A.id?"refresh":"delete"}),"Delete"]})]})})]},A.id))})]})}),T.length>0&&i.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 text-sm text-gray-500",children:["Showing ",T.length," of ",C," extractions"]})]})]}),i.jsx("footer",{className:"mt-16 py-6 border-t border-gray-200 bg-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-xs text-gray-400",children:i.jsx("p",{children:"Extractions Dashboard | zeroriskagent.com"})})}),b&&i.jsx(LS,{extraction:b,onClose:()=>w(null)})]})}function LS({extraction:r,onClose:e}){var x,y;const t=S.useRef(null),n=Array.isArray(r.stage_data)?r.stage_data:[],o=n.length>0&&((x=n[0])==null?void 0:x.stage)!==void 0&&((y=n[0])==null?void 0:y.statuses)!==void 0,l=(r.payer_type||"other").toUpperCase(),u=new Date(r.created_at).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}),h=new Date(r.created_at).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),f=jy(r.total_claims),p=()=>{const b=t.current;if(!b)return;const w=window.open("","_blank");w&&(w.document.write(`
      <html>
        <head>
          <title>${r.hospital_name} - ${l} Report</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { font-family: 'Segoe UI', Arial, sans-serif; padding: 30px; color: #1a1a1a; }
            .header { text-align: center; margin-bottom: 24px; border-bottom: 2px solid #0d9488; padding-bottom: 16px; }
            .header h1 { font-size: 20px; color: #0d9488; margin-bottom: 4px; }
            .header h2 { font-size: 16px; font-weight: 600; margin-bottom: 8px; }
            .meta { display: flex; justify-content: center; gap: 24px; font-size: 12px; color: #555; }
            .meta span { display: inline-flex; align-items: center; gap: 4px; }
            .badge { background: #e0f2fe; color: #0369a1; padding: 2px 10px; border-radius: 10px; font-weight: 600; font-size: 11px; }
            table { width: 100%; border-collapse: collapse; margin-top: 16px; font-size: 12px; }
            th { background: #0d9488; color: white; padding: 8px 10px; text-align: left; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; }
            td { padding: 6px 10px; border-bottom: 1px solid #d1d5db; }
            tr:nth-child(even) td { background: #f0fdfa; }
            .stage-cell { background: #ccfbf1 !important; font-weight: 600; color: #134e4a; }
            .highlighted { color: #b91c1c; font-weight: 500; }
            .text-right { text-align: right; }
            .total-row td { background: #0d9488 !important; color: white; font-weight: 700; }
            .footer { margin-top: 24px; text-align: center; font-size: 10px; color: #999; border-top: 1px solid #e5e7eb; padding-top: 12px; }
            @media print { body { padding: 15px; } }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>Zero Risk Agent</h1>
            <h2>${r.hospital_name}</h2>
            <div class="meta">
              <span>Panel: <span class="badge">${l}</span></span>
              <span>Date: ${u} ${h}</span>
              <span>Total Claims: <strong>${f}</strong></span>
            </div>
          </div>
          ${b.innerHTML}
          <div class="footer">
            <p>Generated from Extractions Dashboard | zeroriskagent.com | Printed on ${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</p>
          </div>
        </body>
      </html>
    `),w.document.close(),w.focus(),w.print(),w.close())};return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),i.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-[95%] max-w-6xl z-10 flex flex-col",style:{maxHeight:"calc(100vh - 40px)"},children:[i.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 rounded-t-xl px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-teal-100 rounded-lg p-2",children:i.jsx("span",{className:"material-icon text-teal-700",style:{fontSize:"24px"},children:"description"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:r.hospital_name}),i.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-semibold ${dh(r.payer_type)}`,children:l}),i.jsxs("span",{className:"text-sm text-gray-500",children:[u,", ",h]}),i.jsx("span",{className:"text-sm text-gray-500",children:"|"}),i.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Total Claims: ",f]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:p,className:"px-4 py-2 rounded-lg text-sm font-medium bg-teal-600 text-white hover:bg-teal-700 flex items-center gap-1.5 transition-colors",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"16px"},children:"print"}),"Print Report"]}),i.jsx("button",{onClick:e,className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors",children:i.jsx("span",{className:"material-icon",style:{fontSize:"24px"},children:"close"})})]})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.jsx("div",{ref:t,children:o?i.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{className:"bg-teal-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-white uppercase border-r border-teal-600 min-w-[180px]",children:"Stage"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-white uppercase border-r border-teal-600 min-w-[280px]",children:"Status"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-white uppercase border-r border-teal-600 min-w-[100px]",children:"In Patient"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-white uppercase border-r border-teal-600 min-w-[100px]",children:"OPD Patient"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-white uppercase border-r border-teal-600 min-w-[80px]",children:"Counts"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-white uppercase min-w-[100px]",children:"Enhancement"})]})}),i.jsxs("tbody",{children:[n.map((b,w)=>(b.statuses||[]).map((N,_)=>i.jsxs("tr",{className:`${_%2===0?"bg-teal-50":"bg-teal-100"} hover:bg-teal-200 border-b border-teal-200`,children:[i.jsx("td",{className:`px-4 py-2 text-sm font-semibold text-teal-900 border-r border-teal-200 ${_===0?"bg-teal-200":"bg-transparent"}`,children:_===0?b.stage:""}),i.jsx("td",{className:`px-4 py-2 text-sm border-r border-teal-200 ${N.isHighlighted?"text-red-700 font-medium":"text-teal-800"}`,children:N.status}),i.jsx("td",{className:"px-4 py-2 text-sm text-teal-800 text-right border-r border-teal-200 font-medium",children:N.inPatient}),i.jsx("td",{className:"px-4 py-2 text-sm text-teal-800 text-right border-r border-teal-200 font-medium",children:N.opd}),i.jsx("td",{className:"px-4 py-2 text-sm text-teal-800 text-right border-r border-teal-200 font-medium",children:N.counts}),i.jsx("td",{className:"px-4 py-2 text-sm text-teal-800 text-right font-medium",children:N.enhancement})]},`${w}-${_}`))),r.total_claims&&typeof r.total_claims=="object"&&r.total_claims.counts!==void 0&&i.jsxs("tr",{className:"bg-teal-700 font-bold",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-white border-r border-teal-600",colSpan:2,children:"Total Claims"}),i.jsx("td",{className:"px-4 py-3 text-sm text-white text-right border-r border-teal-600",children:r.total_claims.inPatient}),i.jsx("td",{className:"px-4 py-3 text-sm text-white text-right border-r border-teal-600",children:r.total_claims.opd}),i.jsx("td",{className:"px-4 py-3 text-sm text-white text-right border-r border-teal-600",children:r.total_claims.counts}),i.jsx("td",{className:"px-4 py-3 text-sm text-white text-right",children:r.total_claims.enhancement})]})]})]})}):n.length>0?i.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsx("tr",{children:Object.keys(n[0]).map(b=>i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:b},b))})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((b,w)=>i.jsx("tr",{className:"hover:bg-gray-50",children:Object.values(b).map((N,_)=>i.jsx("td",{className:"px-3 py-2 text-sm text-gray-700 whitespace-nowrap",children:N!=null?String(N):"-"},_))},w))})]})}):i.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No stage data available"})})}),i.jsxs("div",{className:"flex-shrink-0 bg-gray-50 border-t border-gray-200 rounded-b-xl px-6 py-3 flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-gray-400",children:["Extraction ID: ",r.id.slice(0,8),"..."]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:p,className:"px-4 py-2 rounded-lg text-sm font-medium bg-teal-50 text-teal-700 hover:bg-teal-100 flex items-center gap-1.5 transition-colors",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"16px"},children:"print"}),"Print"]}),i.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors",children:"Close"})]})]})]})]})}function US(){const{profile:r,isAdmin:e,isSuperAdmin:t}=Jr(),[n,o]=S.useState([]),[l,u]=S.useState(!0),[h,f]=S.useState(null),[p,x]=S.useState(!1),[y,b]=S.useState(null),[w,N]=S.useState({email:"",full_name:"",role:"staff",password:""});S.useEffect(()=>{e&&_()},[e]);const _=async()=>{try{u(!0);const{data:T,error:C}=await Re.from("zero_login_user").select("*").order("created_at",{ascending:!1});if(C)throw C;o(T||[])}catch(T){console.error("Error loading users:",T),f("Failed to load users")}finally{u(!1)}},j=async T=>{if(T.preventDefault(),f(null),!w.email||!w.full_name||!w.password){f("Email, full name, and password are required");return}if(w.password.length<6){f("Password must be at least 6 characters");return}try{const{error:C}=await Re.from("zero_login_user").insert({email:w.email,full_name:w.full_name,password:w.password,role:w.role,status:"active"});if(C)throw C;N({email:"",full_name:"",role:"staff",password:""}),x(!1),_()}catch(C){console.error("Error adding user:",C),f(C instanceof Error?C.message:"Failed to add user")}},P=async T=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:C}=await Re.from("zero_login_user").delete().eq("id",T);if(C)throw C;_()}catch(C){console.error("Error deleting user:",C),f("Failed to delete user")}};return e?l?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("span",{className:"material-icon text-primary-600 animate-pulse",style:{fontSize:"48px"},children:"autorenew"}),i.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50",children:i.jsxs("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"md:flex md:items-center md:justify-between mb-8",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"User Management"}),i.jsx("p",{className:"text-gray-500",children:"Manage system users and their permissions"})]}),i.jsx("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:i.jsxs("button",{type:"button",onClick:()=>x(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[i.jsx("span",{className:"material-icon mr-2",children:"person_add"}),"Add User"]})})]}),h&&i.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md flex items-center gap-2",children:[i.jsx("span",{className:"material-icon",children:"error"}),i.jsx("span",{children:h})]}),p&&i.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New User"}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email *"}),i.jsx("input",{type:"email",required:!0,value:w.email,onChange:T=>N({...w,email:T.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name *"}),i.jsx("input",{type:"text",required:!0,value:w.full_name,onChange:T=>N({...w,full_name:T.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role *"}),i.jsxs("select",{required:!0,value:w.role,onChange:T=>N({...w,role:T.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[i.jsx("option",{value:"staff",children:"Staff"}),e&&i.jsx("option",{value:"hospital_admin",children:"Hospital Admin"}),t&&i.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password *"}),i.jsx("input",{type:"password",required:!0,value:w.password,onChange:T=>N({...w,password:T.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Minimum 6 characters"})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx("button",{type:"submit",className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",children:"Add User"}),i.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})]})}),i.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[i.jsx("ul",{className:"divide-y divide-gray-200",children:n.map(T=>i.jsx("li",{children:i.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:i.jsx("div",{className:"bg-primary-600 rounded-full h-10 w-10 flex items-center justify-center",children:i.jsx("span",{className:"material-icon text-white text-sm",children:"person"})})}),i.jsxs("div",{className:"ml-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.full_name}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${T.status==="active"?"bg-green-100 text-green-800":T.status==="suspended"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:T.status})]}),i.jsx("div",{className:"text-sm text-gray-500",children:T.email}),i.jsx("div",{className:"text-xs text-gray-400",children:T.role.replace(/_/g," ")})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>b(T),className:"text-primary-600 hover:text-primary-900 text-sm font-medium",children:i.jsx("span",{className:"material-icon",children:"edit"})}),T.id!==(r==null?void 0:r.id)&&i.jsx("button",{onClick:()=>P(T.id),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:i.jsx("span",{className:"material-icon",children:"delete"})})]})]}),i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx("span",{className:"material-icon mr-1 text-xs",children:"access_time"}),"Created ",new Date(T.created_at).toLocaleDateString()]})})]})},T.id))}),n.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("span",{className:"material-icon text-gray-400 mb-4",style:{fontSize:"48px"},children:"people_outline"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),i.jsx("p",{className:"text-gray-500",children:"Start by adding your first user."})]})]}),i.jsx("footer",{className:"text-center text-xs text-gray-400 mt-8",children:i.jsx("p",{children:"v1.3 - 2026-01-21 - zeroriskagent.com"})})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"material-icon text-orange-600 mb-4",style:{fontSize:"64px"},children:"security"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),i.jsx("p",{className:"text-gray-600",children:"You need admin privileges to manage users."})]})})}class FS{constructor(){mr(this,"STORAGE_KEY","zerorisk_followups")}async getFollowUpMetrics(e){try{const t=this.getStoredFollowUps(),n=new Date,o=e?t.filter(u=>u.hospital_id===e):t,l={total:o.length,pending:0,in_progress:0,completed:0,overdue:0,high_priority:0};return o.forEach(u=>{u.status==="pending"?l.pending++:u.status==="in_progress"?l.in_progress++:u.status==="completed"&&l.completed++,u.priority_score>=8&&l.high_priority++,new Date(u.due_date)<n&&u.status!=="completed"&&l.overdue++}),l}catch(t){return console.error("Error fetching follow-up metrics:",t),{total:0,pending:0,in_progress:0,completed:0,overdue:0,high_priority:0}}}async getFollowUps(e={},t=1,n=20){try{let o=this.getStoredFollowUps();if(e.hospital_id&&(o=o.filter(p=>p.hospital_id===e.hospital_id)),e.status&&(o=o.filter(p=>p.status===e.status)),e.follow_up_type&&(o=o.filter(p=>p.follow_up_type===e.follow_up_type)),e.priority_min&&(o=o.filter(p=>p.priority_score>=e.priority_min)),e.overdue){const p=new Date;o=o.filter(x=>new Date(x.due_date)<p&&x.status!=="completed")}if(e.search){const p=e.search.toLowerCase();o=o.filter(x=>x.description.toLowerCase().includes(p)||x.action_required.toLowerCase().includes(p))}o.sort((p,x)=>p.priority_score!==x.priority_score?x.priority_score-p.priority_score:new Date(p.due_date).getTime()-new Date(x.due_date).getTime());const l=o.map(p=>({...p,claims:{claim_number:`CLM-${p.claim_id.slice(-6)}`,hospital_claim_id:`HCL-${Math.random().toString(36).substr(2,8).toUpperCase()}`,claimed_amount:Math.floor(Math.random()*1e5)+1e4,claim_status:"pending"}})),u=(t-1)*n,h=u+n;return{data:l.slice(u,h),total:o.length,hasMore:o.length>t*n}}catch(o){return console.error("Error fetching follow-ups:",o),{data:[],total:0,hasMore:!1}}}async createFollowUp(e){try{const t=this.getStoredFollowUps(),n={id:this.generateId(),claim_id:e.claim_id,hospital_id:e.hospital_id,follow_up_type:e.follow_up_type,priority_score:e.priority_score,due_date:e.due_date,description:e.description,action_required:e.action_required,contact_person:e.contact_person||null,contact_phone:e.contact_phone||null,contact_email:e.contact_email||null,auto_generated:e.auto_generated||!1,status:"pending",escalation_level:1,whatsapp_sent:!1,email_sent:!1,phone_attempted:!1,last_contact_date:null,assigned_to:null,next_follow_up_date:null,resolution_notes:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return t.push(n),this.saveFollowUps(t),n}catch(t){return console.error("Error creating follow-up:",t),null}}async updateFollowUp(e,t){try{const n=this.getStoredFollowUps(),o=n.findIndex(l=>l.id===e);return o===-1?null:(n[o]={...n[o],...t,updated_at:new Date().toISOString()},this.saveFollowUps(n),n[o])}catch(n){return console.error("Error updating follow-up:",n),null}}async processAutomaticFollowUps(){try{const e=this.generateSampleFollowUps();let t=0;for(const n of e)await this.createFollowUp(n)&&t++;return{processed:e.length,created:t,errors:[]}}catch(e){return{processed:0,created:0,errors:[`Error processing automatic follow-ups: ${e}`]}}}async sendBulkCommunications(e,t,n,o={}){const l=[];let u=0,h=0;for(const f of e){try{if(Math.random()>.1){const x=t==="whatsapp"?{whatsapp_sent:!0,last_contact_date:new Date().toISOString()}:{email_sent:!0,last_contact_date:new Date().toISOString()};await this.updateFollowUp(f,x),u++,l.push({followUpId:f,success:!0})}else h++,l.push({followUpId:f,success:!1,error:"Mock failure for testing"})}catch(p){h++,l.push({followUpId:f,success:!1,error:p instanceof Error?p.message:"Unknown error"})}await new Promise(p=>setTimeout(p,100))}return{sent:u,failed:h,results:l}}getStoredFollowUps(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):this.initializeSampleData()}catch(e){return console.error("Error loading follow-ups:",e),this.initializeSampleData()}}saveFollowUps(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving follow-ups:",t)}}generateId(){return Date.now().toString()+Math.random().toString(36).substr(2,9)}initializeSampleData(){const e=new Date,t=[{id:"sample-1",claim_id:"claim-1",hospital_id:"hospital-1",follow_up_type:"payment_overdue",priority_score:8,due_date:new Date(e.getTime()+1440*60*1e3).toISOString(),description:"Payment overdue for ESIC claim - Patient discharge 2 weeks ago",action_required:"Contact ESIC Mumbai office for payment status and expected timeline",contact_person:"ESIC Regional Office Mumbai",contact_phone:"9876543210",contact_email:"esic.mumbai@gov.in",status:"pending",escalation_level:1,whatsapp_sent:!1,email_sent:!1,phone_attempted:!1,last_contact_date:null,assigned_to:null,next_follow_up_date:null,resolution_notes:null,auto_generated:!0,created_at:new Date(e.getTime()-2880*60*1e3).toISOString(),updated_at:new Date(e.getTime()-2880*60*1e3).toISOString()},{id:"sample-2",claim_id:"claim-2",hospital_id:"hospital-1",follow_up_type:"missing_documents",priority_score:6,due_date:new Date(e.getTime()+4320*60*1e3).toISOString(),description:"Missing discharge summary for CGHS claim verification",action_required:"Submit completed discharge summary and final bill to CGHS office",contact_person:"CGHS Delhi Office",contact_phone:"9876543211",contact_email:"cghs.delhi@nic.in",status:"in_progress",escalation_level:1,whatsapp_sent:!0,email_sent:!1,phone_attempted:!1,last_contact_date:new Date(e.getTime()-1440*60*1e3).toISOString(),assigned_to:null,next_follow_up_date:null,resolution_notes:null,auto_generated:!1,created_at:new Date(e.getTime()-7200*60*1e3).toISOString(),updated_at:new Date(e.getTime()-1440*60*1e3).toISOString()},{id:"sample-3",claim_id:"claim-3",hospital_id:"hospital-1",follow_up_type:"verification_pending",priority_score:9,due_date:new Date(e.getTime()-1440*60*1e3).toISOString(),description:"High-value insurance claim pending verification for 3 weeks",action_required:"Escalate to senior claims officer - provide treatment justification",contact_person:"Insurance Claims Officer",contact_phone:"9876543214",contact_email:"claims@insurance.com",status:"pending",escalation_level:2,whatsapp_sent:!1,email_sent:!0,phone_attempted:!0,last_contact_date:new Date(e.getTime()-4320*60*1e3).toISOString(),assigned_to:null,next_follow_up_date:null,resolution_notes:null,auto_generated:!0,created_at:new Date(e.getTime()-504*60*60*1e3).toISOString(),updated_at:new Date(e.getTime()-4320*60*1e3).toISOString()}];return this.saveFollowUps(t),t}generateSampleFollowUps(){const e=new Date;return[{claim_id:`claim-auto-${Date.now()}`,hospital_id:"hospital-1",follow_up_type:"payment_overdue",priority_score:7,due_date:new Date(e.getTime()+2880*60*1e3).toISOString(),description:"Auto-generated follow-up for payment delay",action_required:"Contact payer for payment status update",contact_person:"TPA Healthcare Services",contact_phone:"9876543213",contact_email:"support@tpahealthcare.com",auto_generated:!0}]}exportFollowUps(){return JSON.stringify(this.getStoredFollowUps(),null,2)}importFollowUps(e){try{const t=JSON.parse(e);return Array.isArray(t)?(this.saveFollowUps(t),!0):!1}catch(t){return console.error("Error importing follow-ups:",t),!1}}clearAllFollowUps(){localStorage.removeItem(this.STORAGE_KEY)}}const no=new FS;class MS{constructor(){mr(this,"baseUrl","https://graph.facebook.com/v18.0");mr(this,"phoneNumberId");mr(this,"accessToken");this.phoneNumberId="",this.accessToken="",(!this.phoneNumberId||!this.accessToken)&&console.warn("WhatsApp credentials not configured. Service will run in mock mode.")}async sendTemplateMessage(e,t,n,o,l=[]){var u,h;try{if(!this.accessToken||!this.phoneNumberId)return this.mockWhatsAppSend(e,t,n,`Template: ${o}`);const f={to:this.formatPhoneNumber(n),template:{name:o,language:{code:"en"},components:[{type:"body",parameters:l.map(b=>({type:"text",text:b}))}]}},p=await fetch(`${this.baseUrl}/${this.phoneNumberId}/messages`,{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),x=await p.json();if(!p.ok)throw new Error(`WhatsApp API error: ${JSON.stringify(x)}`);const y=(h=(u=x.messages)==null?void 0:u[0])==null?void 0:h.id;return await this.logCommunication({follow_up_id:e,claim_id:t,communication_type:"whatsapp",direction:"outbound",recipient:n,subject:`Template: ${o}`,message_content:`Template message sent with parameters: ${l.join(", ")}`,template_used:o,delivery_status:"sent",delivery_timestamp:new Date().toISOString(),read_timestamp:null,reply_timestamp:null,reply_content:null,external_message_id:y,cost_inr:.5,attachment_urls:null,metadata:{template_name:o,parameters:l}}),{success:!0,messageId:y}}catch(f){return console.error("Error sending WhatsApp template message:",f),{success:!1,error:f instanceof Error?f.message:"Unknown error"}}}async sendTextMessage(e,t,n,o,l){var u,h;try{if(!this.accessToken||!this.phoneNumberId)return this.mockWhatsAppSend(e,t,n,o);const f={to:this.formatPhoneNumber(n),text:{body:o}},p=await fetch(`${this.baseUrl}/${this.phoneNumberId}/messages`,{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),x=await p.json();if(!p.ok)throw new Error(`WhatsApp API error: ${JSON.stringify(x)}`);const y=(h=(u=x.messages)==null?void 0:u[0])==null?void 0:h.id;return await this.logCommunication({follow_up_id:e,claim_id:t,communication_type:"whatsapp",direction:"outbound",recipient:n,subject:null,message_content:o,template_used:l||null,delivery_status:"sent",delivery_timestamp:new Date().toISOString(),read_timestamp:null,reply_timestamp:null,reply_content:null,external_message_id:y,cost_inr:.5,attachment_urls:null,metadata:{text_message:!0}}),{success:!0,messageId:y}}catch(f){return console.error("Error sending WhatsApp text message:",f),{success:!1,error:f instanceof Error?f.message:"Unknown error"}}}async processWebhook(e){try{for(const t of e.entry)for(const n of t.changes){const{value:o}=n;if(o.statuses)for(const l of o.statuses)await this.updateMessageStatus(l.id,l.status,l.timestamp);if(o.messages)for(const l of o.messages)await this.handleIncomingMessage(l,o.metadata.phone_number_id)}}catch(t){throw console.error("Error processing WhatsApp webhook:",t),t}}async getTemplates(e,t){try{let n=Re.from("message_templates").select("*").or(`hospital_id.is.null,hospital_id.eq.${e}`).eq("channel","whatsapp").eq("is_active",!0);t&&(n=n.eq("category",t));const{data:o,error:l}=await n.order("name");if(l)throw l;return o||[]}catch(n){return console.error("Error fetching WhatsApp templates:",n),[]}}async createTemplate(e){try{const{data:t,error:n}=await Re.from("message_templates").insert(e).select().single();if(n)throw n;return t}catch(t){return console.error("Error creating WhatsApp template:",t),null}}replaceTemplateVariables(e,t){let n=e;return Object.entries(t).forEach(([o,l])=>{const u=new RegExp(`{{${o}}}`,"g");n=n.replace(u,l)}),n}async getCommunicationLogs(e){try{const{data:t,error:n}=await Re.from("communication_logs").select("*").eq("follow_up_id",e).eq("communication_type","whatsapp").order("created_at",{ascending:!1});if(n)throw n;return t||[]}catch(t){return console.error("Error fetching communication logs:",t),[]}}formatPhoneNumber(e){const t=e.replace(/\D/g,"");return t.length===10&&t.startsWith("9")?`91${t}`:t.length===12&&t.startsWith("91")||t.startsWith("91")?t:`91${t}`}async logCommunication(e){try{const{error:t}=await Re.from("communication_logs").insert(e);t&&console.error("Error logging communication:",t)}catch(t){console.error("Error logging communication:",t)}}async updateMessageStatus(e,t,n){try{const o={delivery_status:t,updated_at:new Date().toISOString()};t==="delivered"?o.delivery_timestamp=n:t==="read"&&(o.read_timestamp=n);const{error:l}=await Re.from("communication_logs").update(o).eq("external_message_id",e);l&&console.error("Error updating message status:",l)}catch(o){console.error("Error updating message status:",o)}}async handleIncomingMessage(e,t){var n,o;try{const{data:l,error:u}=await Re.from("follow_ups").select("*").eq("contact_phone",e.from).eq("status","in_progress").order("created_at",{ascending:!1}).limit(1).single();if(u||!l){console.log("No active follow-up found for incoming message from:",e.from);return}await this.logCommunication({follow_up_id:l.id,claim_id:l.claim_id,communication_type:"whatsapp",direction:"inbound",recipient:e.from,subject:null,message_content:((n=e.text)==null?void 0:n.body)||"Non-text message received",template_used:null,delivery_status:"delivered",delivery_timestamp:new Date().toISOString(),read_timestamp:null,reply_timestamp:new Date().toISOString(),reply_content:((o=e.text)==null?void 0:o.body)||"Non-text message",external_message_id:e.id,cost_inr:null,attachment_urls:null,metadata:{incoming_message:!0,message_type:e.type}}),await Re.from("follow_ups").update({last_contact_date:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",l.id)}catch(l){console.error("Error handling incoming WhatsApp message:",l)}}async mockWhatsAppSend(e,t,n,o){const l=`mock_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return await this.logCommunication({follow_up_id:e,claim_id:t,communication_type:"whatsapp",direction:"outbound",recipient:n,subject:"Mock WhatsApp Message",message_content:o,template_used:null,delivery_status:"sent",delivery_timestamp:new Date().toISOString(),read_timestamp:null,reply_timestamp:null,reply_content:null,external_message_id:l,cost_inr:.5,attachment_urls:null,metadata:{mock_mode:!0,reason:"WhatsApp credentials not configured"}}),console.log(`[MOCK] WhatsApp message sent to ${n}: ${o}`),{success:!0,messageId:l}}}const zS=new MS;class Do{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const BS=()=>{if(!(typeof localStorage>"u"))return{get:r=>Promise.resolve(localStorage.getItem(r)),set:(r,e)=>Promise.resolve(localStorage.setItem(r,e)),remove:r=>Promise.resolve(localStorage.removeItem(r))}},Mt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:BS()},Bh=r=>r?typeof r=="string"?{publicKey:r}:r.toString()==="[object Object]"?r:{}:{},VS=(r,e="https://api.emailjs.com")=>{if(!r)return;const t=Bh(r);Mt.publicKey=t.publicKey,Mt.blockHeadless=t.blockHeadless,Mt.storageProvider=t.storageProvider,Mt.blockList=t.blockList,Mt.limitRate=t.limitRate,Mt.origin=t.origin||e},Ny=async(r,e,t={})=>{const n=await fetch(Mt.origin+r,{method:"POST",headers:t,body:e}),o=await n.text(),l=new Do(n.status,o);if(n.ok)return l;throw l},Sy=(r,e,t)=>{if(!r||typeof r!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},qS=r=>{if(r&&r.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},ky=r=>r.webdriver||!r.languages||r.languages.length===0,Ey=()=>new Do(451,"Unavailable For Headless Browser"),HS=(r,e)=>{if(!Array.isArray(r))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},WS=r=>{var e;return!((e=r.list)!=null&&e.length)||!r.watchVariable},KS=(r,e)=>r instanceof FormData?r.get(e):r[e],Cy=(r,e)=>{if(WS(r))return!1;HS(r.list,r.watchVariable);const t=KS(e,r.watchVariable);return typeof t!="string"?!1:r.list.includes(t)},Ty=()=>new Do(403,"Forbidden"),GS=(r,e)=>{if(typeof r!="number"||r<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},JS=async(r,e,t)=>{const n=Number(await t.get(r)||0);return e-Date.now()+n},Ry=async(r,e,t)=>{if(!e.throttle||!t)return!1;GS(e.throttle,e.id);const n=e.id||r;return await JS(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},Py=()=>new Do(429,"Too Many Requests"),QS=async(r,e,t,n)=>{const o=Bh(n),l=o.publicKey||Mt.publicKey,u=o.blockHeadless||Mt.blockHeadless,h=o.storageProvider||Mt.storageProvider,f={...Mt.blockList,...o.blockList},p={...Mt.limitRate,...o.limitRate};return u&&ky(navigator)?Promise.reject(Ey()):(Sy(l,r,e),qS(t),t&&Cy(f,t)?Promise.reject(Ty()):await Ry(location.pathname,p,h)?Promise.reject(Py()):Ny("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:r,template_id:e,template_params:t}),{"Content-type":"application/json"}))},ZS=r=>{if(!r||r.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},YS=r=>typeof r=="string"?document.querySelector(r):r,XS=async(r,e,t,n)=>{const o=Bh(n),l=o.publicKey||Mt.publicKey,u=o.blockHeadless||Mt.blockHeadless,h=Mt.storageProvider||o.storageProvider,f={...Mt.blockList,...o.blockList},p={...Mt.limitRate,...o.limitRate};if(u&&ky(navigator))return Promise.reject(Ey());const x=YS(t);Sy(l,r,e),ZS(x);const y=new FormData(x);return Cy(f,y)?Promise.reject(Ty()):await Ry(location.pathname,p,h)?Promise.reject(Py()):(y.append("lib_version","4.4.1"),y.append("service_id",r),y.append("template_id",e),y.append("user_id",l),Ny("/api/v1.0/email/send-form",y))},Da={init:VS,send:QS,sendForm:XS,EmailJSResponseStatus:Do};class ek{constructor(){mr(this,"emailConfig",null);this.initializeConfig()}async initializeConfig(){var t;const e=this.getEnvConfig();if(e){this.emailConfig=e;return}try{const{data:n}=await Re.from("hospitals").select("contact_details").limit(1).single();(t=n==null?void 0:n.contact_details)!=null&&t.email_config&&(this.emailConfig=n.contact_details.email_config)}catch{console.warn("No email configuration found, running in mock mode")}}getEnvConfig(){return{smtp_host:"smtp.gmail.com",smtp_port:parseInt("587"),smtp_secure:!1,smtp_user:"aimsaiproject@gmail.com",smtp_password:"your-16-char-app-password",from_email:"aimsaiproject@gmail.com",from_name:"Zero Risk Agent - Hope Hospital"||"Zero Risk Agent"}}async sendEmailViaSendGrid(e,t,n){var o,l,u;try{return this.mockEmailSend(e,t,n)}catch(h){return console.error("Error sending email via SendGrid:",h),{success:!1,error:h instanceof Error?h.message:"Unknown error"}}}async sendEmailViaEmailJS(e,t,n){try{const o="service_orw589l",l="template_ibyvrj1",u="pR4Q3cMkWIXRg1hA0";Da.init(u);const h={to_email:n.to,to_name:n.to.split("@")[0],from_name:"Zero Risk Agent - Hope Hospital",reply_to:"aimsaiproject@gmail.com",subject:n.subject,message:n.text||this.htmlToText(n.html),html_content:n.html},f=await Da.send(o,l,h),p=`emailjs_${f.status}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return await this.logCommunication({follow_up_id:e,claim_id:t,communication_type:"email",direction:"outbound",recipient:n.to,subject:n.subject,message_content:n.html,template_used:null,delivery_status:"sent",delivery_timestamp:new Date().toISOString(),read_timestamp:null,reply_timestamp:null,reply_content:null,external_message_id:p,cost_inr:0,attachment_urls:null,metadata:{provider:"emailjs",status:f.status,text:f.text,cc:n.cc,bcc:n.bcc}}),console.log(`[EmailJS]  Real Email SENT to ${n.to}`),console.log(`Subject: ${n.subject}`),console.log(`Status: ${f.status} - ${f.text}`),console.log(`Message ID: ${p}`),{success:!0,messageId:p}}catch(o){return console.error(" Error sending email via EmailJS:",o),{success:!1,error:o instanceof Error?o.message:"EmailJS send failed"}}}async sendEmailViaSMTP(e,t,n){var o;try{if(!this.emailConfig)return this.mockEmailSend(e,t,n);const l=`smtp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return await this.logCommunication({follow_up_id:e,claim_id:t,communication_type:"email",direction:"outbound",recipient:n.to,subject:n.subject,message_content:n.html,template_used:null,delivery_status:"sent",delivery_timestamp:new Date().toISOString(),read_timestamp:null,reply_timestamp:null,reply_content:null,external_message_id:l,cost_inr:.05,attachment_urls:null,metadata:{provider:"smtp",smtp_host:this.emailConfig.smtp_host,cc:n.cc,bcc:n.bcc,has_attachments:!!((o=n.attachments)!=null&&o.length)}}),console.log(`[SMTP] Email sent to ${n.to}: ${n.subject}`),{success:!0,messageId:l}}catch(l){return console.error("Error sending email via SMTP:",l),{success:!1,error:l instanceof Error?l.message:"Unknown error"}}}async sendEmailJSTemplate(e){try{const t="service_orw589l",n="pR4Q3cMkWIXRg1hA0",o={follow_up:"template_ibyvrj1",document_request:"template_ibyvrj1",payment_inquiry:"template_ibyvrj1",meeting_request:"template_ibyvrj1",general:"template_ibyvrj1",default:"template_ibyvrj1"},l=o[e.templateType]||o.default;Da.init(n);const u={to_email:e.to,to_name:e.contactName||e.to.split("@")[0],from_name:"Zero Risk Agent - Hope Hospital",reply_to:"aimsaiproject@gmail.com",subject:e.subject,message:e.body,html_content:e.body,name:e.contactName||"Valued Contact",email:e.contactEmail||e.to,phone:e.contactPhone||"Not provided",organization:e.organization||"Organization",...e.variables},h=await Da.send(t,l,u),f=`template_${h.status}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return console.log("[EmailJS]  Template Email SENT"),console.log(`Template Type: ${e.templateType}`),console.log(`To: ${e.to}`),console.log(`Subject: ${e.subject}`),console.log(`Status: ${h.status} - ${h.text}`),console.log(`Message ID: ${f}`),{success:!0,messageId:f}}catch(t){return console.error(" Error sending template email via EmailJS:",t),this.sendTemplateEmailFallback(e)}}async sendTemplateEmailFallback(e){return console.log(`[EmailJS] Using fallback for template: ${e.templateType}`),this.sendEmail({to:e.to,subject:e.subject,html:e.body.replace(/\n/g,"<br>")})}async sendContactForm(e){try{const t="service_orw589l",n="template_ibyvrj1",o="pR4Q3cMkWIXRg1hA0";Da.init(o);const l=await Da.send(t,n,{name:e.name,email:e.email,phone:e.phone,subject:e.subject,message:e.message,to_email:"aimsaiproject@gmail.com",from_name:"Zero Risk Agent Contact Form"}),u=`contact_${l.status}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return console.log("[EmailJS]  Contact Form Email SENT"),console.log(`From: ${e.name} <${e.email}>`),console.log(`Subject: Contact Form: ${e.subject}`),console.log(`Phone: ${e.phone}`),console.log(`Status: ${l.status} - ${l.text}`),console.log(`Message ID: ${u}`),{success:!0,messageId:u}}catch(t){return console.error(" Error sending contact form via EmailJS:",t),this.sendContactFormFallback(e)}}async sendContactFormFallback(e){const t=`
      <h2>New Contact Form Submission</h2>
      <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
        <p><strong>Name:</strong> ${e.name}</p>
        <p><strong>Email:</strong> <a href="mailto:${e.email}">${e.email}</a></p>
        <p><strong>Phone:</strong> <a href="tel:${e.phone}">${e.phone}</a></p>
        <p><strong>Subject:</strong> ${e.subject}</p>
      </div>
      <div style="background: #fff; padding: 20px; border-left: 4px solid #0891b2; margin: 20px 0;">
        <h3>Message:</h3>
        <p>${e.message.replace(/\n/g,"<br>")}</p>
      </div>
    `;return this.sendEmail({to:"aimsaiproject@gmail.com",subject:`Contact Form: ${e.subject}`,html:t})}async sendEmail(e){try{const t=e.attachments?await Promise.all(e.attachments.map(async l=>({filename:l.filename,content:await this.fileToBase64(l.content),contentType:l.content.type}))):void 0,n={to:e.to,subject:e.subject,html:this.wrapInEmailTemplate(e.html,e.subject),text:this.htmlToText(e.html),attachments:t};let o=await this.sendEmailViaEmailJS("manual","compose",n);return o.success||(o=await this.sendEmailViaSendGrid("manual","compose",n)),o.success||(o=await this.sendEmailViaSMTP("manual","compose",n)),o.success||(o=await this.mockEmailSend("manual","compose",n)),o}catch(t){return console.error("Error sending email:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async sendTemplateEmail(e,t,n,o,l,u){try{const{data:h,error:f}=await Re.from("message_templates").select("*").eq("id",o).single();if(f||!h)return{success:!1,error:"Template not found"};const p=this.replaceTemplateVariables(h.subject||"Follow-up",l),x=this.replaceTemplateVariables(h.message_content,l),y=this.htmlToText(x),b={to:n,subject:p,html:this.wrapInEmailTemplate(x,p),text:y,attachments:u};let w=await this.sendEmailViaSendGrid(e,t,b);return w.success||(w=await this.sendEmailViaSMTP(e,t,b)),w.success&&await Re.from("message_templates").update({usage_count:(h.usage_count||0)+1,last_used_at:new Date().toISOString()}).eq("id",o),w}catch(h){return console.error("Error sending template email:",h),{success:!1,error:h instanceof Error?h.message:"Unknown error"}}}async sendBulkEmails(e){const t=[];let n=0,o=0;const l=10;for(let u=0;u<e.length;u+=l){const f=e.slice(u,u+l).map(async p=>{try{const x=await this.sendEmailViaSendGrid(p.followUpId,p.claimId,{to:p.recipient,subject:p.subject,html:this.wrapInEmailTemplate(p.html,p.subject)});x.success?(n++,t.push({recipient:p.recipient,success:!0})):(o++,t.push({recipient:p.recipient,success:!1,error:x.error}))}catch(x){o++,t.push({recipient:p.recipient,success:!1,error:x instanceof Error?x.message:"Unknown error"})}});await Promise.all(f),u+l<e.length&&await new Promise(p=>setTimeout(p,1e3))}return{sent:n,failed:o,results:t}}async getTemplates(e,t){try{let n=Re.from("message_templates").select("*").or(`hospital_id.is.null,hospital_id.eq.${e}`).in("channel",["email","multi_channel"]).eq("is_active",!0);t&&(n=n.eq("category",t));const{data:o,error:l}=await n.order("name");if(l)throw l;return o||[]}catch(n){return console.error("Error fetching email templates:",n),[]}}async createTemplate(e){try{const{data:t,error:n}=await Re.from("message_templates").insert(e).select().single();if(n)throw n;return t}catch(t){return console.error("Error creating email template:",t),null}}replaceTemplateVariables(e,t){let n=e;return Object.entries(t).forEach(([o,l])=>{const u=new RegExp(`{{${o}}}`,"g");n=n.replace(u,l)}),n}async getCommunicationLogs(e){try{const{data:t,error:n}=await Re.from("communication_logs").select("*").eq("follow_up_id",e).eq("communication_type","email").order("created_at",{ascending:!1});if(n)throw n;return t||[]}catch(t){return console.error("Error fetching communication logs:",t),[]}}async logCommunication(e){try{const{error:t}=await Re.from("communication_logs").insert(e);t&&console.error("Error logging communication:",t)}catch(t){console.error("Error logging communication:",t)}}wrapInEmailTemplate(e,t){return`
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${t}</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; background: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header { background: #0891b2; color: white; padding: 20px; border-radius: 8px 8px 0 0; text-align: center; }
        .content { padding: 30px; }
        .footer { background: #f8fafc; padding: 20px; border-radius: 0 0 8px 8px; text-align: center; font-size: 12px; color: #64748b; }
        .button { display: inline-block; background: #0891b2; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; margin: 10px 0; }
        .alert { background: #fef3c7; border: 1px solid #f59e0b; padding: 15px; border-radius: 6px; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Zero Risk Agent</h1>
            <p>Healthcare Claims Recovery System</p>
        </div>
        <div class="content">
            ${e}
        </div>
        <div class="footer">
            <p>This email was sent by Zero Risk Agent Claims Recovery System</p>
            <p> ${new Date().getFullYear()} Zero Risk Agent. All rights reserved.</p>
            <p>v1.8 | ${new Date().toLocaleDateString("en-IN")}</p>
        </div>
    </div>
</body>
</html>`}htmlToText(e){return e.replace(/<br\s*\/?>/gi,`
`).replace(/<\/p>/gi,`

`).replace(/<\/div>/gi,`
`).replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").trim()}async mockEmailSend(e,t,n){var l;const o=`mock_email_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return await this.logCommunication({follow_up_id:e,claim_id:t,communication_type:"email",direction:"outbound",recipient:n.to,subject:n.subject,message_content:n.html,template_used:null,delivery_status:"sent",delivery_timestamp:new Date().toISOString(),read_timestamp:null,reply_timestamp:null,reply_content:null,external_message_id:o,cost_inr:.1,attachment_urls:null,metadata:{mock_mode:!0,reason:"Email service not configured"}}),console.log("[MOCK EMAIL SENT]"),console.log(`To: ${n.to}`),console.log(`Subject: ${n.subject}`),console.log(`Content Preview: ${(l=n.text)==null?void 0:l.substring(0,150)}...`),console.log(`Message ID: ${o}`),console.log("Full HTML Content:",n.html),{success:!0,messageId:o}}async fileToBase64(e){return new Promise((t,n)=>{const o=new FileReader;o.onload=()=>{if(o.result){const l=o.result.split(",")[1];t(l)}else n(new Error("Failed to read file"))},o.onerror=()=>n(o.error),o.readAsDataURL(e)})}}const ic=new ek;class tk{constructor(){mr(this,"TABLE_NAME","zero_contacts");mr(this,"getPayerContacts",()=>this.getContactsByRole("payer_contact"));mr(this,"getHospitalContacts",()=>this.getContactsByRole("hospital_contact"))}async getContacts(){try{const{data:e,error:t}=await Re.from(this.TABLE_NAME).select("*").order("created_at",{ascending:!1});return t?(console.error("Error fetching contacts:",t),[]):(e==null?void 0:e.map(n=>({...n,createdAt:n.created_at})))||[]}catch(e){return console.error("Error loading contacts:",e),[]}}async addContact(e){try{const{data:t,error:n}=await Re.from(this.TABLE_NAME).insert({name:e.name,phone:e.phone,email:e.email,role:e.role,organization:e.organization||null,notes:e.notes||null}).select().single();return n?(console.error("Error adding contact:",n),null):{...t,createdAt:t.created_at}}catch(t){return console.error("Error adding contact:",t),null}}async updateContact(e,t){try{const{data:n,error:o}=await Re.from(this.TABLE_NAME).update({name:t.name,phone:t.phone,email:t.email,role:t.role,organization:t.organization,notes:t.notes}).eq("id",e).select().single();return o?(console.error("Error updating contact:",o),null):{...n,createdAt:n.created_at}}catch(n){return console.error("Error updating contact:",n),null}}async deleteContact(e){try{const{error:t}=await Re.from(this.TABLE_NAME).delete().eq("id",e);return t?(console.error("Error deleting contact:",t),!1):!0}catch(t){return console.error("Error deleting contact:",t),!1}}async searchContacts(e){try{let t=Re.from(this.TABLE_NAME).select("*").or(`name.ilike.%${e}%,phone.ilike.%${e}%,email.ilike.%${e}%,organization.ilike.%${e}%`);const{data:n,error:o}=await t;return o?(console.error("Error searching contacts:",o),[]):(n==null?void 0:n.map(l=>({...l,createdAt:l.created_at})))||[]}catch(t){return console.error("Error searching contacts:",t),[]}}async getContactsByRole(e){try{let t=Re.from(this.TABLE_NAME).select("*").eq("role",e);const{data:n,error:o}=await t;return o?(console.error("Error fetching contacts by role:",o),[]):(n==null?void 0:n.map(l=>({...l,createdAt:l.created_at})))||[]}catch(t){return console.error("Error fetching contacts by role:",t),[]}}async exportContacts(){const e=await this.getContacts();return JSON.stringify(e,null,2)}async importContacts(e){const t={imported:0,skipped:0,errors:[]};try{const n=JSON.parse(e);if(!Array.isArray(n))return t.errors.push("Invalid JSON format - expected array of contacts"),t;for(const o of n)try{if(!o.name||!o.phone&&!o.email){t.skipped++,t.errors.push("Skipped contact: Missing required fields");continue}await this.addContact({name:o.name,phone:o.phone||"",email:o.email||"",role:o.role||"other",organization:o.organization||"",notes:o.notes||""})?t.imported++:(t.skipped++,t.errors.push(`Failed to import contact: ${o.name}`))}catch(l){t.skipped++,t.errors.push(`Error importing ${o.name}: ${l instanceof Error?l.message:"Unknown error"}`)}return t}catch(n){return t.errors.push(`JSON parsing error: ${n instanceof Error?n.message:"Unknown error"}`),t}}async migrateFromLocalStorage(){const e={imported:0,errors:[]};try{const t=localStorage.getItem("zerorisk_contacts");if(!t)return e.errors.push("No contacts found in localStorage"),e;const n=JSON.parse(t);if(!Array.isArray(n)||n.length===0)return e.errors.push("No valid contacts found in localStorage"),e;for(const o of n)try{await this.addContact({name:o.name,phone:o.phone||"",email:o.email||"",role:o.role||"other",organization:o.organization||"",notes:o.notes||""})&&e.imported++}catch(l){e.errors.push(`Failed to migrate ${o.name}: ${l instanceof Error?l.message:"Unknown error"}`)}return e}catch(t){return e.errors.push(`Migration error: ${t instanceof Error?t.message:"Unknown error"}`),e}}formatPhoneNumber(e){const t=e.replace(/\D/g,"");return this.isValidPhone(e)?`+91 ${t.slice(0,5)} ${t.slice(5)}`:e}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())}isValidPhone(e){const t=e.replace(/\D/g,"");if(t.length===10)return/^[6-9]\d{9}$/.test(t);if(t.length===12&&t.startsWith("91")){const n=t.slice(2);return/^[6-9]\d{9}$/.test(n)}else if(e.startsWith("+91")&&t.length===12){const n=t.slice(2);return/^[6-9]\d{9}$/.test(n)}return!1}normalizePhone(e){const t=e.replace(/\D/g,"");if(t.length===10&&/^[6-9]\d{9}$/.test(t))return t;if(t.length===12&&t.startsWith("91")){const n=t.slice(2);if(/^[6-9]\d{9}$/.test(n))return n}return e}async getContactStats(){try{const e=await this.getContacts();return{total:e.length,payers:e.filter(t=>t.role==="payer_contact").length,hospitals:e.filter(t=>t.role==="hospital_contact").length}}catch(e){return console.error("Error getting contact stats:",e),{total:0,payers:0,hospitals:0}}}}const Xt=new tk;function rk({onAddContact:r,onClose:e}){const[t,n]=S.useState({name:"",phone:"",email:"",role:"payer_contact",organization:""}),[o,l]=S.useState({}),u=()=>{const x={};return t.name.trim()?t.name.trim().length<2&&(x.name="Name must be at least 2 characters"):x.name="Contact name is required",t.phone&&!Xt.isValidPhone(t.phone)&&(x.phone="Enter a valid Indian mobile number (10 digits starting with 6, 7, 8, or 9)"),t.email&&!Xt.isValidEmail(t.email)&&(x.email="Enter a valid email address"),!t.phone&&!t.email&&(x.contact="Either phone number or email address is required"),l(x),Object.keys(x).length===0},h=x=>{if(x.preventDefault(),u()){const y={...t,name:t.name.trim(),phone:t.phone?Xt.normalizePhone(t.phone):"",email:t.email.trim().toLowerCase(),organization:t.organization.trim()};r(y),n({name:"",phone:"",email:"",role:"payer_contact",organization:""}),l({}),e()}},f=x=>{const y=x.target.value.replace(/\D/g,"").slice(0,10);n({...t,phone:y}),o.phone&&l({...o,phone:""})},p=x=>{n({...t,email:x.target.value}),o.email&&l({...o,email:""})};return i.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add Contact"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:i.jsx("span",{className:"material-icon",children:"close"})})]})}),i.jsxs("form",{onSubmit:h,className:"px-6 py-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name *"}),i.jsx("input",{type:"text",value:t.name,onChange:x=>{n({...t,name:x.target.value}),o.name&&l({...o,name:""})},className:`w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 ${o.name?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-teal-500"}`,placeholder:"Enter contact person name"}),o.name&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),i.jsx("input",{type:"tel",value:t.phone,onChange:f,className:`w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 ${o.phone?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-teal-500"}`,placeholder:"9876543210",maxLength:10}),o.phone&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.phone}),t.phone&&!o.phone&&Xt.isValidPhone(t.phone)&&i.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" Will be saved as: ",Xt.formatPhoneNumber(t.phone)]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),i.jsx("input",{type:"email",value:t.email,onChange:p,className:`w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 ${o.email?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-teal-500"}`,placeholder:"contact@example.com"}),o.email&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.email}),t.email&&!o.email&&Xt.isValidEmail(t.email)&&i.jsx("p",{className:"text-xs text-green-600 mt-1",children:" Valid email address"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization"}),i.jsx("input",{type:"text",value:t.organization,onChange:x=>n({...t,organization:x.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"ESIC, CGHS, Hospital name, etc."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Role"}),i.jsxs("select",{value:t.role,onChange:x=>n({...t,role:x.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500",children:[i.jsx("option",{value:"payer_contact",children:"Payer Contact (ESIC, CGHS, etc.)"}),i.jsx("option",{value:"hospital_contact",children:"Hospital Contact"}),i.jsx("option",{value:"patient_contact",children:"Patient Contact"}),i.jsx("option",{value:"insurance_agent",children:"Insurance Agent"}),i.jsx("option",{value:"tpa_contact",children:"TPA Contact"}),i.jsx("option",{value:"government_official",children:"Government Official"}),i.jsx("option",{value:"other",children:"Other"})]})]}),o.contact&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:i.jsx("p",{className:"text-xs text-red-600",children:o.contact})}),i.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"material-icon text-blue-500 text-sm mt-0.5 mr-2",children:"info"}),i.jsxs("div",{className:"text-sm text-blue-700",children:[i.jsx("p",{className:"font-medium mb-1",children:"Quick Add Tips:"}),i.jsxs("ul",{className:"text-xs space-y-1",children:[i.jsx("li",{children:" Phone numbers will be formatted automatically (+91 prefix)"}),i.jsx("li",{children:" Either phone or email is required (both is better)"}),i.jsx("li",{children:" This contact will be available for WhatsApp & Email follow-ups"})]})]})]})}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),i.jsxs("button",{type:"submit",disabled:!t.name||!t.phone&&!t.email,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 border border-transparent rounded hover:bg-teal-700 disabled:bg-gray-400 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-sm",children:"add"}),"Add Contact"]})]})]})]})})}const Ag={follow_up:{subject:"Follow-up: Claim Processing Status",body:`Dear {{name}},

I hope this email finds you well. I am writing to follow up on the status of our recent claim submission.

**Details:**
- Organization: {{organization}}
- Contact: {{phone}}
- Reference: [Claim Number]

Could you please provide an update on the current status and expected timeline for resolution?

Thank you for your time and assistance.

Best regards,
Zero Risk Agent Team`},document_request:{subject:"Document Request - Additional Information Required",body:`Dear {{name}},

We are writing to request additional documentation for claim processing.

**Required Documents:**
- [List required documents here]
- [Additional requirements]

**Contact Information:**
Organization: {{organization}}
Phone: {{phone}}
Email: {{email}}

Please submit the requested documents within 7 business days to avoid any delays in processing.

Thank you for your cooperation.

Best regards,
Claims Processing Team`},payment_inquiry:{subject:"Payment Status Inquiry",body:`Dear {{name}},

I hope you are doing well. I am reaching out regarding the payment status for our recent claim submission.

**Claim Details:**
- Submission Date: [Date]
- Amount: [Amount]
- Reference: [Reference Number]

**Contact Details:**
Organization: {{organization}}
Phone: {{phone}}

Could you please provide an update on the payment timeline?

Thank you for your prompt attention to this matter.

Best regards,
Finance Team`},meeting_request:{subject:"Meeting Request - Discussion Required",body:`Dear {{name}},

I hope this message finds you well. I would like to schedule a meeting to discuss important matters regarding our ongoing collaboration.

**Proposed Topics:**
- [Topic 1]
- [Topic 2]
- [Any additional items]

**Your Details:**
Organization: {{organization}}
Phone: {{phone}}
Email: {{email}}

Please let me know your availability for the coming week.

Looking forward to our discussion.

Best regards,
Zero Risk Agent Team`},general:{subject:"General Inquiry",body:`Dear {{name}},

I hope you are having a great day. I am writing to discuss [topic/matter].

**Contact Information:**
Organization: {{organization}}
Phone: {{phone}}
Email: {{email}}

Please feel free to reach out if you need any additional information.

Thank you for your time.

Best regards,
Zero Risk Agent Team`}};function sk({contact:r,onSend:e,onClose:t}){const[n,o]=S.useState({to:r.email,subject:"",body:""}),[l,u]=S.useState(""),[h,f]=S.useState(!1),[p,x]=S.useState([]),[y,b]=S.useState(!0),w=C=>C.replace(/{{name}}/g,r.name).replace(/{{email}}/g,r.email).replace(/{{phone}}/g,r.phone).replace(/{{organization}}/g,r.organization||"Organization").replace(/{{role}}/g,r.role.replace("_"," ")),N=C=>{const F=Ag[C];F&&(o({...n,subject:w(F.subject),body:w(F.body),template:C}),u(C))},_=C=>{if(C.target.files){const F=Array.from(C.target.files);x([...p,...F])}},j=C=>{x(p.filter((F,A)=>A!==C))},P=()=>{if(!n.to||!n.subject||!n.body){alert("Please fill in all required fields (To, Subject, and Body)");return}const C={...n,attachments:p.length>0?p:void 0,template:l,useEmailJS:y};e(C)},T=C=>{if(C===0)return"0 Bytes";const F=1024,A=["Bytes","KB","MB","GB"],K=Math.floor(Math.log(C)/Math.log(F));return parseFloat((C/Math.pow(F,K)).toFixed(2))+" "+A[K]};return i.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-blue-50",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-blue-600",children:"email"}),"Compose Email"]}),i.jsxs("p",{className:"text-sm text-gray-600",children:["to ",r.name," (",r.organization,")"]})]}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-white",children:i.jsx("span",{className:"material-icon",children:"close"})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quick Templates"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:Object.entries(Ag).map(([C,F])=>i.jsx("button",{onClick:()=>N(C),className:`p-2 text-xs border rounded-lg hover:bg-blue-50 transition-colors ${l===C?"bg-blue-100 border-blue-300":"bg-gray-50 border-gray-300"}`,children:C.replace("_"," ").replace(/\b\w/g,A=>A.toUpperCase())},C))}),i.jsxs("div",{className:"flex items-center justify-between mt-3 p-3 bg-blue-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-blue-600 text-sm",children:"email"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:y?"Using EmailJS Templates":"Standard Email Mode"}),l&&i.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:l.replace("_"," ")}),y&&i.jsx("span",{className:"material-icon text-green-600 text-sm",title:"Real emails via EmailJS",children:"verified"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Standard"}),i.jsx("button",{onClick:()=>b(!y),title:y?"Switch to standard email method":"Switch to EmailJS templates (recommended)",className:`relative w-10 h-5 rounded-full transition-colors ${y?"bg-blue-600":"bg-gray-300"}`,children:i.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform ${y?"translate-x-5":"translate-x-0"}`})}),i.jsx("span",{className:"text-xs text-gray-500",children:"EmailJS"})]})]}),i.jsx("div",{className:"text-xs text-gray-600 mt-2 px-1",children:y?i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"material-icon text-xs text-green-600",children:"info"}),"EmailJS mode sends real emails using your configured templates with variable substitution"]}):i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"material-icon text-xs text-gray-500",children:"info"}),"Standard mode uses fallback email service (may be mocked in development)"]})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To *"}),i.jsx("input",{type:"email",value:n.to,onChange:C=>o({...n,to:C.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"recipient@example.com",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),i.jsx("input",{type:"text",value:n.subject,onChange:C=>o({...n,subject:C.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email subject",required:!0})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Message Body *"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Text"}),i.jsx("button",{onClick:()=>f(!h),className:`relative w-10 h-5 rounded-full transition-colors ${h?"bg-blue-600":"bg-gray-300"}`,children:i.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform ${h?"translate-x-5":"translate-x-0"}`})}),i.jsx("span",{className:"text-xs text-gray-500",children:"HTML"})]})]}),i.jsx("textarea",{value:n.body,onChange:C=>o({...n,body:C.target.value}),rows:12,className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",placeholder:h?"Enter HTML email content...":"Enter your email message here...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attachments"}),i.jsxs("div",{className:"border border-dashed border-gray-300 rounded-lg p-4",children:[i.jsx("input",{type:"file",multiple:!0,onChange:_,className:"hidden",id:"file-upload"}),i.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center gap-2 text-gray-600 hover:text-gray-800",children:[i.jsx("span",{className:"material-icon text-2xl",children:"attach_file"}),i.jsx("span",{className:"text-sm",children:"Click to attach files or drag and drop"})]})]}),p.length>0&&i.jsx("div",{className:"mt-2 space-y-2",children:p.map((C,F)=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-gray-500 text-sm",children:"description"}),i.jsx("span",{className:"text-sm text-gray-700",children:C.name}),i.jsxs("span",{className:"text-xs text-gray-500",children:["(",T(C.size),")"]})]}),i.jsx("button",{onClick:()=>j(F),className:"text-red-500 hover:text-red-700",children:i.jsx("span",{className:"material-icon text-sm",children:"close"})})]},F))})]})]}),n.subject&&n.body&&i.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview"}),i.jsxs("div",{className:"bg-white border rounded p-3 text-sm",children:[i.jsxs("div",{className:"border-b pb-2 mb-3",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"To:"})," ",n.to]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Subject:"})," ",n.subject]})]}),i.jsx("div",{className:"whitespace-pre-wrap",children:h?i.jsx("div",{dangerouslySetInnerHTML:{__html:n.body}}):n.body})]})]})]}),i.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-between items-center",children:[i.jsx("div",{className:"text-sm text-gray-600",children:p.length>0&&i.jsxs("span",{children:[p.length," attachment(s) selected"]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),i.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-gray-600 border border-transparent rounded hover:bg-gray-700",children:"Save Draft"}),i.jsxs("button",{onClick:P,disabled:!n.to||!n.subject||!n.body,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-sm",children:"send"}),"Send Email"]})]})]})]})})}function nk({onAddContact:r,onCreateFollowUp:e,onImportContacts:t}){const[n,o]=S.useState(0),l=[{title:"Welcome to Zero Risk Agent!",description:"Let's get you started with managing your healthcare claims follow-ups.",icon:"waves",action:null},{title:"Add Your First Contact",description:"Start by adding contacts from ESIC, CGHS, hospitals, or insurance companies.",icon:"person_add",action:r,actionText:"Add Contact"},{title:"Create Follow-ups",description:"Once you have contacts, you can create follow-ups for your claims and automate communication.",icon:"auto_fix_high",action:e,actionText:"Create Follow-up"},{title:"Import Existing Data",description:"Have existing contact data? Import it to quickly populate your system.",icon:"upload",action:t,actionText:"Import Contacts"}],u=()=>{n<l.length-1&&o(n+1)},h=()=>{n>0&&o(n-1)},f=l[n];return i.jsx("div",{className:"bg-gradient-to-br from-teal-50 to-blue-50 rounded-lg border border-teal-200 p-6 mb-6",children:i.jsxs("div",{className:"text-center max-w-md mx-auto",children:[i.jsx("div",{className:"mb-4",children:i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-teal-100 rounded-full",children:i.jsx("span",{className:"material-icon text-teal-600 text-2xl",children:f.icon})})}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:f.title}),i.jsx("p",{className:"text-gray-600 mb-6",children:f.description}),f.action&&i.jsxs("button",{onClick:f.action,className:"bg-teal-600 hover:bg-teal-700 text-white px-6 py-3 rounded-lg font-medium flex items-center gap-2 mx-auto mb-6",children:[i.jsx("span",{className:"material-icon text-sm",children:f.icon}),f.actionText]}),i.jsxs("div",{className:"flex justify-center items-center gap-4 mb-4",children:[i.jsx("button",{onClick:h,disabled:n===0,className:"p-2 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:hover:bg-transparent",children:i.jsx("span",{className:"material-icon text-gray-500",children:"arrow_back"})}),i.jsx("div",{className:"flex gap-2",children:l.map((p,x)=>i.jsx("button",{onClick:()=>o(x),className:`w-2 h-2 rounded-full transition-colors ${x===n?"bg-teal-600":"bg-gray-300"}`},x))}),i.jsx("button",{onClick:u,disabled:n===l.length-1,className:"p-2 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:hover:bg-transparent",children:i.jsx("span",{className:"material-icon text-gray-500",children:"arrow_forward"})})]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Step ",n+1," of ",l.length]}),i.jsxs("div",{className:"mt-6 bg-white rounded-lg border border-gray-200 p-4 text-left",children:[i.jsxs("h3",{className:"font-medium text-gray-900 mb-2 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-blue-500 text-sm",children:"lightbulb"}),"Quick Tips"]}),i.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[i.jsx("li",{children:" All data is stored locally in your browser - no external servers"}),i.jsx("li",{children:" You can export/backup your contacts at any time"}),i.jsx("li",{children:" Phone numbers will be validated for Indian format"}),i.jsx("li",{children:" Sample follow-ups are included to show how the system works"})]})]})]})})}function ak({onImportComplete:r,onClose:e}){const[t,n]=S.useState("csv"),[o,l]=S.useState(""),[u,h]=S.useState(""),[f,p]=S.useState([{name:"",phone:"",email:"",role:"payer_contact",organization:""}]),[x,y]=S.useState(!1),[b,w]=S.useState([]),[N,_]=S.useState(!1),j=()=>{p([...f,{name:"",phone:"",email:"",role:"payer_contact",organization:""}])},P=z=>{p(f.filter((V,W)=>W!==z))},T=(z,V,W)=>{const Z=[...f];Z[z]={...Z[z],[V]:W},p(Z)},C=z=>{const V=z.trim().split(`
`);if(V.length===0)return[];const W=V[0].toLowerCase().includes("name")?1:0,Z=[];for(let ae=W;ae<V.length;ae++){const de=V[ae].trim();if(!de)continue;const _e=de.split(",").map($e=>$e.trim().replace(/"/g,""));_e.length>=3&&Z.push({id:"",name:_e[0]||"",phone:_e[1]||"",email:_e[2]||"",role:_e[3]||"other",organization:_e[4]||"",createdAt:new Date().toISOString()})}return Z},F=z=>{try{const V=JSON.parse(z);if(Array.isArray(V))return V.map(W=>({id:W.id||Date.now().toString()+Math.random().toString(36).substr(2,9),name:W.name||"",phone:W.phone||"",email:W.email||"",role:W.role||"other",organization:W.organization||"",notes:W.notes||"",createdAt:W.createdAt||new Date().toISOString()}))}catch{throw new Error("Invalid JSON format")}return[]},A=()=>{try{let z=[];switch(t){case"csv":z=C(o);break;case"json":z=F(u);break;case"manual":z=f.filter(V=>V.name.trim()).map(V=>({id:"",name:V.name.trim(),phone:V.phone.trim(),email:V.email.trim(),role:V.role,organization:V.organization.trim(),createdAt:new Date().toISOString()}));break}w(z),_(!0)}catch(z){alert(`Error parsing data: ${z instanceof Error?z.message:"Unknown error"}`)}},K=async()=>{y(!0);try{const z=JSON.stringify(b),V=await Xt.importContacts(z);r(V.imported,V.skipped,V.errors),e()}catch(z){alert(`Import failed: ${z instanceof Error?z.message:"Unknown error"}`)}finally{y(!1)}},H=()=>{const z=`name,phone,email,role,organization
ESIC Regional Office Mumbai,9876543210,esic.mumbai@gov.in,payer_contact,ESIC
CGHS Delhi Office,9876543211,cghs.delhi@nic.in,payer_contact,CGHS
Hospital Claims Department,9876543212,claims@hospital.com,hospital_contact,Main Hospital`,V=new Blob([z],{type:"text/csv"}),W=URL.createObjectURL(V),Z=document.createElement("a");Z.href=W,Z.download="contacts-template.csv",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(W)};return i.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Bulk Import Contacts"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:i.jsx("span",{className:"material-icon",children:"close"})})]})}),i.jsx("div",{className:"px-6 py-4",children:N?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Import Preview (",b.length," contacts)"]}),i.jsxs("button",{onClick:()=>_(!1),className:"text-sm text-gray-600 hover:text-gray-800 flex items-center gap-1",children:[i.jsx("span",{className:"material-icon text-sm",children:"edit"}),"Edit Data"]})]}),i.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),i.jsx("th",{className:"px-3 py-2 text-left",children:"Phone"}),i.jsx("th",{className:"px-3 py-2 text-left",children:"Email"}),i.jsx("th",{className:"px-3 py-2 text-left",children:"Role"}),i.jsx("th",{className:"px-3 py-2 text-left",children:"Organization"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:b.map((z,V)=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-3 py-2",children:z.name}),i.jsx("td",{className:"px-3 py-2",children:z.phone}),i.jsx("td",{className:"px-3 py-2",children:z.email}),i.jsx("td",{className:"px-3 py-2 capitalize",children:z.role.replace("_"," ")}),i.jsx("td",{className:"px-3 py-2",children:z.organization})]},V))})]})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Back to Edit"}),i.jsx("button",{onClick:K,disabled:x||b.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-2",children:x?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-icon text-sm animate-spin",children:"refresh"}),"Importing..."]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-icon text-sm",children:"upload"}),"Import ",b.length," Contacts"]})})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Import Method"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{key:"csv",title:"CSV Text",icon:"description",desc:"Paste CSV data directly"},{key:"json",title:"JSON Data",icon:"code",desc:"Import from JSON export"},{key:"manual",title:"Manual Entry",icon:"edit",desc:"Add multiple contacts manually"}].map(z=>i.jsx("button",{onClick:()=>n(z.key),className:`p-4 border rounded-lg text-left hover:bg-gray-50 ${t===z.key?"border-teal-500 bg-teal-50":"border-gray-200"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`material-icon text-lg ${t===z.key?"text-teal-600":"text-gray-500"}`,children:z.icon}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:z.title}),i.jsx("div",{className:"text-xs text-gray-500",children:z.desc})]})]})},z.key))})]}),t==="csv"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CSV Data"}),i.jsxs("button",{onClick:H,className:"text-sm text-teal-600 hover:text-teal-700 flex items-center gap-1",children:[i.jsx("span",{className:"material-icon text-sm",children:"download"}),"Download Template"]})]}),i.jsx("textarea",{value:o,onChange:z=>l(z.target.value),className:"w-full h-48 border border-gray-300 rounded px-3 py-2 text-sm font-mono",placeholder:`name,phone,email,role,organization
ESIC Regional Office Mumbai,9876543210,esic.mumbai@gov.in,payer_contact,ESIC
CGHS Delhi Office,9876543211,cghs.delhi@nic.in,payer_contact,CGHS`}),i.jsx("div",{className:"text-sm text-gray-600",children:"Format: name,phone,email,role,organization (one contact per line)"})]}),t==="json"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"JSON Data"}),i.jsx("textarea",{value:u,onChange:z=>h(z.target.value),className:"w-full h-48 border border-gray-300 rounded px-3 py-2 text-sm font-mono",placeholder:'[{"name": "Contact Name", "phone": "9876543210", "email": "contact@example.com", "role": "payer_contact", "organization": "ESIC"}]'}),i.jsx("div",{className:"text-sm text-gray-600",children:"Paste JSON array of contact objects or exported contact data"})]}),t==="manual"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Manual Contacts"}),i.jsxs("button",{onClick:j,className:"text-sm bg-teal-600 hover:bg-teal-700 text-white px-3 py-1 rounded flex items-center gap-1",children:[i.jsx("span",{className:"material-icon text-sm",children:"add"}),"Add Contact"]})]}),i.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:f.map((z,V)=>i.jsxs("div",{className:"grid grid-cols-6 gap-2 items-end",children:[i.jsx("input",{type:"text",placeholder:"Name",value:z.name,onChange:W=>T(V,"name",W.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"}),i.jsx("input",{type:"text",placeholder:"Phone",value:z.phone,onChange:W=>T(V,"phone",W.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"}),i.jsx("input",{type:"email",placeholder:"Email",value:z.email,onChange:W=>T(V,"email",W.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"}),i.jsxs("select",{value:z.role,onChange:W=>T(V,"role",W.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[i.jsx("option",{value:"payer_contact",children:"Payer"}),i.jsx("option",{value:"hospital_contact",children:"Hospital"}),i.jsx("option",{value:"insurance_agent",children:"Insurance"}),i.jsx("option",{value:"tpa_contact",children:"TPA"}),i.jsx("option",{value:"other",children:"Other"})]}),i.jsx("input",{type:"text",placeholder:"Organization",value:z.organization,onChange:W=>T(V,"organization",W.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"}),i.jsx("button",{onClick:()=>P(V),className:"text-red-600 hover:text-red-700 p-1",disabled:f.length===1,children:i.jsx("span",{className:"material-icon text-sm",children:"delete"})})]},V))})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t",children:[i.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),i.jsxs("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 border border-transparent rounded hover:bg-teal-700 flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-sm",children:"preview"}),"Preview Import"]})]})]})})]})})}function ik(){const{user:r}=Jr(),[e,t]=S.useState({total:0,pending:0,in_progress:0,completed:0,overdue:0,high_priority:0}),[n,o]=S.useState([]),[l,u]=S.useState(!0),[h,f]=S.useState(new Set),[p,x]=S.useState({status:"all",type:"all",priority:"all",overdue:!1,search:""}),[y,b]=S.useState([]),[w,N]=S.useState([]),[_,j]=S.useState(!1),[P,T]=S.useState(null),[C,F]=S.useState(""),[A,K]=S.useState(null),[H,z]=S.useState(!1),[V,W]=S.useState(!1),[Z,ae]=S.useState([]),[de,_e]=S.useState({total:0,payers:0,hospitals:0}),[$e,Qe]=S.useState(!1),[Ne,ne]=S.useState(null),[we,ie]=S.useState(!1);S.useEffect(()=>{G(),Oe(),D()},[]);const D=async()=>{try{const U=await Xt.getContacts();ae(U);const Ee=await Xt.getContactStats();_e(Ee)}catch(U){console.error("Error loading contacts:",U)}};S.useEffect(()=>{Pe()},[p]);const G=async()=>{try{const U=await no.getFollowUpMetrics();t(U)}catch(U){console.error("Error loading dashboard data:",U)}},Pe=async()=>{try{u(!0);const U={...p.status!=="all"&&{status:p.status},...p.type!=="all"&&{follow_up_type:p.type},...p.priority!=="all"&&{priority_min:parseInt(p.priority)},...p.overdue&&{overdue:!0},...p.search&&{search:p.search}},{data:Ee}=await no.getFollowUps(U);o(Ee)}catch(U){console.error("Error loading follow-ups:",U)}finally{u(!1)}},Oe=async()=>{var U;try{const Ee=((U=r==null?void 0:r.user_metadata)==null?void 0:U.hospital_id)||"default",[qe,k]=await Promise.all([zS.getTemplates(Ee),ic.getTemplates(Ee)]);b(qe),N(k)}catch(Ee){console.error("Error loading templates:",Ee)}},Me=U=>{const Ee=new Set(h);Ee.has(U)?Ee.delete(U):Ee.add(U),f(Ee),j(Ee.size>0)},Fe=()=>{h.size===n.length?(f(new Set),j(!1)):(f(new Set(n.map(U=>U.id))),j(!0))},Ke=async()=>{if(!P||!C||h.size===0){alert("Please select action, template, and follow-ups");return}z(!0),K(null);try{const U=Array.from(h),Ee=await no.sendBulkCommunications(U,P,C);K(Ee),await Pe(),f(new Set),j(!1)}catch(U){console.error("Error performing bulk action:",U),alert("Error performing bulk action")}finally{z(!1)}},Ve=U=>U>=8?"text-red-600 bg-red-50":U>=6?"text-orange-600 bg-orange-50":U>=4?"text-yellow-600 bg-yellow-50":"text-green-600 bg-green-50",et=U=>{switch(U){case"pending":return"text-yellow-600 bg-yellow-50";case"in_progress":return"text-blue-600 bg-blue-50";case"completed":return"text-green-600 bg-green-50";case"failed":return"text-red-600 bg-red-50";case"cancelled":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},pt=(U,Ee)=>new Date(U)<new Date&&Ee!=="completed",Or=async U=>{try{const Ee=await Xt.addContact(U);Ee?(await D(),alert(`Contact "${Ee.name}" added successfully to Supabase!`)):alert("Failed to add contact. Please try again.")}catch(Ee){console.error("Error adding contact:",Ee),alert("Error adding contact. Please check your connection.")}},fs=async U=>{if(window.confirm("Are you sure you want to delete this contact?"))try{await Xt.deleteContact(U)?(await D(),alert("Contact deleted successfully from Supabase!")):alert("Failed to delete contact. Please try again.")}catch(Ee){console.error("Error deleting contact:",Ee),alert("Error deleting contact. Please check your connection.")}},_r=async()=>{try{const U=await Xt.exportContacts(),Ee=new Blob([U],{type:"application/json"}),qe=URL.createObjectURL(Ee),k=document.createElement("a");k.href=qe,k.download=`zerorisk-contacts-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(qe),alert("Contacts exported successfully!")}catch(U){console.error("Error exporting contacts:",U),alert("Error exporting contacts. Please try again.")}},Qr=U=>{ne(U),Qe(!0)},re=async(U,Ee,qe)=>{let k=`Supabase Import completed!

 Imported: ${U} contacts to cloud database`;Ee>0&&(k+=`
 Skipped: ${Ee} contacts`),qe.length>0&&(k+=`

 Issues encountered:`,qe.slice(0,5).forEach($=>{k+=`
 ${$}`}),qe.length>5&&(k+=`
 ... and ${qe.length-5} more issues`)),alert(k),await D()},Le=async()=>{if(window.confirm(`Migrate existing localStorage contacts to Supabase?

This will copy your local contacts to the cloud database.`))try{const U=await Xt.migrateFromLocalStorage();let Ee=`Migration completed!

 Migrated: ${U.imported} contacts to Supabase`;U.errors.length>0&&(Ee+=`

 Issues encountered:`,U.errors.slice(0,3).forEach(qe=>{Ee+=`
 ${qe}`})),alert(Ee),await D()}catch(U){console.error("Error migrating contacts:",U),alert("Error migrating contacts. Please try again.")}},nt=async U=>{var Ee;try{if(!Ne)return;console.log(` Attempting to send email to: ${U.to}`),console.log(` Subject: ${U.subject}`),console.log(` Template: ${U.template||"None"}`),console.log(` EmailJS Mode: ${U.useEmailJS?"YES":"NO"}`);let qe;if(U.useEmailJS?qe=await ic.sendEmailJSTemplate({to:U.to,templateType:U.template||"general",subject:U.subject,body:U.body,contactName:Ne.name,contactPhone:Ne.phone,contactEmail:Ne.email,organization:Ne.organization}):qe=await ic.sendEmail({to:U.to,subject:U.subject,html:U.body,attachments:(Ee=U.attachments)==null?void 0:Ee.map(k=>({filename:k.name,content:k}))}),qe.success){const k=U.useEmailJS?"EmailJS Template":"Standard Email",$=U.template?` (${U.template.replace("_"," ").toUpperCase()})`:" (GENERAL)";alert(` Email sent successfully to ${U.to}!

Method: ${k}${$}
Message ID: ${qe.messageId}`),console.log(` Email delivered successfully via ${k}!`),Qe(!1),ne(null)}else throw new Error(qe.error||"Email sending failed")}catch(qe){console.error(" Error sending email:",qe),alert(` Failed to send email to ${U.to}

Error: ${qe instanceof Error?qe.message:"Unknown error"}

Please check your email configuration in .env file.`)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Follow-up Master"}),i.jsx("p",{className:"text-gray-600",children:"Manage and automate claim follow-ups"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{onClick:()=>W(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-sm",children:"person_add"}),"Add Contact"]}),i.jsxs("button",{onClick:_r,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-sm",children:"download"}),"Export Contacts"]}),i.jsxs("button",{onClick:()=>ie(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-sm",children:"upload"}),"Bulk Import"]}),i.jsxs("button",{onClick:Le,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-sm",children:"cloud_upload"}),"Migrate to Cloud"]}),i.jsxs("button",{onClick:()=>no.processAutomaticFollowUps(),className:"bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-sm",children:"auto_fix_high"}),"Run Auto Follow-ups"]}),i.jsxs("button",{onClick:G,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-icon text-sm",children:"refresh"}),"Refresh"]})]})]})}),i.jsxs("div",{className:"px-6 py-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.total}),i.jsx("div",{className:"text-sm text-gray-600",children:"Total Follow-ups"})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:e.pending}),i.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.in_progress}),i.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.completed}),i.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.overdue}),i.jsx("div",{className:"text-sm text-gray-600",children:"Overdue"})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:e.high_priority}),i.jsx("div",{className:"text-sm text-gray-600",children:"High Priority"})]})]}),Z.length===0?i.jsx(nk,{onAddContact:()=>W(!0),onCreateFollowUp:()=>no.processAutomaticFollowUps(),onImportContacts:()=>{const U=document.createElement("input");U.type="file",U.accept=".json",U.onchange=Ee=>{var k;const qe=(k=Ee.target.files)==null?void 0:k[0];if(qe){const $=new FileReader;$.onload=async q=>{var oe;try{const se=(oe=q.target)==null?void 0:oe.result,X=await Xt.importContacts(se);let pe=`Import completed!

 Imported: ${X.imported} contacts`;X.skipped>0&&(pe+=`
 Skipped: ${X.skipped} contacts`),X.errors.length>0&&(pe+=`

 Issues encountered:`,X.errors.slice(0,3).forEach(He=>{pe+=`
 ${He}`})),alert(pe),await D()}catch{alert("Error reading file. Please try again.")}},$.readAsText(qe)}},U.click()}}):i.jsxs("div",{className:"bg-white p-4 rounded-lg border mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Quick Contacts"}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[i.jsxs("span",{children:[de.total," total"]}),i.jsx("span",{children:""}),i.jsxs("span",{children:[de.payers," payers"]}),i.jsx("span",{children:""}),i.jsxs("span",{children:[de.hospitals," hospitals"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Z.map(U=>i.jsx("div",{className:"border rounded-lg p-3 hover:bg-gray-50 relative group",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900 text-sm",children:U.name}),i.jsx("div",{className:"text-xs text-gray-500 capitalize mb-2",children:U.role.replace("_"," ")}),U.organization&&i.jsx("div",{className:"text-xs text-blue-600 mb-2",children:U.organization}),i.jsxs("div",{className:"space-y-1",children:[U.phone&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[i.jsx("span",{className:"material-icon text-xs text-green-600",children:"phone"}),i.jsx("span",{children:Xt.formatPhoneNumber(U.phone)}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(U.phone),className:"text-gray-400 hover:text-gray-600",children:i.jsx("span",{className:"material-icon text-xs",children:"content_copy"})})]}),U.email&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[i.jsx("span",{className:"material-icon text-xs text-blue-600",children:"email"}),i.jsx("span",{className:"truncate",children:U.email}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(U.email),className:"text-gray-400 hover:text-gray-600",children:i.jsx("span",{className:"material-icon text-xs",children:"content_copy"})})]})]})]}),i.jsxs("div",{className:"flex flex-col items-center gap-1 ml-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[U.phone&&i.jsx("button",{title:"Send WhatsApp",className:"p-1 hover:bg-green-50 rounded text-green-600",onClick:()=>window.open(`https://wa.me/91${U.phone.replace(/\D/g,"")}`),children:i.jsx("span",{className:"material-icon text-xs",children:"chat"})}),U.email&&i.jsx("button",{title:"Send Email",className:"p-1 hover:bg-blue-50 rounded text-blue-600",onClick:()=>Qr(U),children:i.jsx("span",{className:"material-icon text-xs",children:"email"})})]}),!U.id.startsWith("default-")&&i.jsx("button",{title:"Delete Contact",className:"p-1 hover:bg-red-50 rounded text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>fs(U.id),children:i.jsx("span",{className:"material-icon text-xs",children:"delete"})})]})]})},U.id)),Z.length<6&&i.jsxs("button",{onClick:()=>W(!0),className:"border-2 border-dashed border-gray-300 rounded-lg p-3 hover:border-gray-400 hover:bg-gray-50 flex flex-col items-center justify-center text-gray-500 hover:text-gray-700",children:[i.jsx("span",{className:"material-icon text-2xl mb-1",children:"add"}),i.jsx("span",{className:"text-sm",children:"Add Contact"})]})]})]}),i.jsx("div",{className:"bg-white p-4 rounded-lg border mb-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),i.jsxs("select",{value:p.status,onChange:U=>x({...p,status:U.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"in_progress",children:"In Progress"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"failed",children:"Failed"}),i.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),i.jsxs("select",{value:p.type,onChange:U=>x({...p,type:U.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[i.jsx("option",{value:"all",children:"All Types"}),i.jsx("option",{value:"missing_documents",children:"Missing Documents"}),i.jsx("option",{value:"appeal_deadline",children:"Appeal Deadline"}),i.jsx("option",{value:"payment_overdue",children:"Payment Overdue"}),i.jsx("option",{value:"verification_pending",children:"Verification Pending"}),i.jsx("option",{value:"escalation",children:"Escalation"}),i.jsx("option",{value:"custom",children:"Custom"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),i.jsxs("select",{value:p.priority,onChange:U=>x({...p,priority:U.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[i.jsx("option",{value:"all",children:"All Priority"}),i.jsx("option",{value:"8",children:"High (8+)"}),i.jsx("option",{value:"6",children:"Medium (6+)"}),i.jsx("option",{value:"4",children:"Low (4+)"})]})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center mt-6",children:[i.jsx("input",{type:"checkbox",checked:p.overdue,onChange:U=>x({...p,overdue:U.target.checked}),className:"mr-2"}),i.jsx("span",{className:"text-sm text-gray-700",children:"Show Overdue Only"})]})}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),i.jsx("input",{type:"text",value:p.search,onChange:U=>x({...p,search:U.target.value}),placeholder:"Search descriptions, actions...",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]})]})}),_&&i.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[h.size," follow-ups selected"]}),i.jsxs("select",{value:P||"",onChange:U=>T(U.target.value),className:"border border-blue-300 rounded px-3 py-1 text-sm bg-white",children:[i.jsx("option",{value:"",children:"Select Action"}),i.jsx("option",{value:"whatsapp",children:"Send WhatsApp"}),i.jsx("option",{value:"email",children:"Send Email"})]}),P&&i.jsxs("select",{value:C,onChange:U=>F(U.target.value),className:"border border-blue-300 rounded px-3 py-1 text-sm bg-white min-w-48",children:[i.jsx("option",{value:"",children:"Select Template"}),(P==="whatsapp"?y:w).map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:Ke,disabled:!P||!C||H,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded text-sm flex items-center gap-2",children:[H&&i.jsx("span",{className:"material-icon text-sm animate-spin",children:"refresh"}),H?"Sending...":"Send Messages"]}),i.jsx("button",{onClick:()=>{f(new Set),j(!1)},className:"text-blue-600 hover:text-blue-800 px-3 py-2 text-sm",children:"Cancel"})]})]}),A&&i.jsx("div",{className:"mt-3 p-3 bg-white rounded border",children:i.jsxs("div",{className:"text-sm",children:[i.jsxs("span",{className:"text-green-600",children:[" Sent: ",A.sent]}),i.jsxs("span",{className:"ml-4 text-red-600",children:[" Failed: ",A.failed]})]})})]}),i.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:i.jsx("input",{type:"checkbox",checked:h.size===n.length&&n.length>0,onChange:Fe,className:"rounded"})}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Claim & Priority"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type & Status"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description & Action"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact Info"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Communication"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:l?i.jsx("tr",{children:i.jsxs("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:[i.jsx("span",{className:"material-icon animate-spin text-2xl",children:"refresh"}),i.jsx("div",{className:"mt-2",children:"Loading follow-ups..."})]})}):n.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No follow-ups found"})}):n.map(U=>{var Ee;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3",children:i.jsx("input",{type:"checkbox",checked:h.has(U.id),onChange:()=>Me(U.id),className:"rounded"})}),i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:((Ee=U.claims)==null?void 0:Ee.claim_number)||"N/A"}),i.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Ve(U.priority_score)}`,children:["Priority: ",U.priority_score]})]}),i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"text-sm text-gray-900 capitalize mb-1",children:U.follow_up_type.replace("_"," ")}),i.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${et(U.status)}`,children:U.status})]}),i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"text-sm text-gray-900 mb-1 max-w-xs truncate",title:U.description,children:U.description}),i.jsx("div",{className:"text-xs text-gray-500 max-w-xs truncate",title:U.action_required,children:U.action_required})]}),i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"text-sm text-gray-900",children:U.contact_person||"N/A"}),U.contact_phone&&i.jsx("div",{className:"text-xs text-gray-500",children:U.contact_phone}),U.contact_email&&i.jsx("div",{className:"text-xs text-gray-500",children:U.contact_email})]}),i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:`text-sm ${pt(U.due_date,U.status)?"text-red-600 font-medium":"text-gray-900"}`,children:new Date(U.due_date).toLocaleDateString("en-IN")}),pt(U.due_date,U.status)&&i.jsx("div",{className:"text-xs text-red-500",children:"Overdue"})]}),i.jsxs("td",{className:"px-4 py-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[U.whatsapp_sent&&i.jsx("span",{className:"material-icon text-green-500",title:"WhatsApp sent",children:"chat"}),U.email_sent&&i.jsx("span",{className:"material-icon text-blue-500",title:"Email sent",children:"email"}),U.phone_attempted&&i.jsx("span",{className:"material-icon text-orange-500",title:"Phone attempted",children:"phone"}),!U.whatsapp_sent&&!U.email_sent&&!U.phone_attempted&&i.jsx("span",{className:"text-gray-400",children:"No contact"})]}),U.last_contact_date&&i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last: ",new Date(U.last_contact_date).toLocaleDateString("en-IN")]})]}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-1",children:[U.contact_phone&&i.jsx("button",{title:"Send WhatsApp",className:"p-1 hover:bg-green-50 rounded text-green-600",children:i.jsx("span",{className:"material-icon text-sm",children:"chat"})}),U.contact_email&&i.jsx("button",{title:"Send Email",className:"p-1 hover:bg-blue-50 rounded text-blue-600",children:i.jsx("span",{className:"material-icon text-sm",children:"email"})}),i.jsx("button",{title:"Edit Follow-up",className:"p-1 hover:bg-gray-50 rounded text-gray-600",children:i.jsx("span",{className:"material-icon text-sm",children:"edit"})})]})})]},U.id)})})]})})})]}),i.jsx("footer",{className:"py-6 border-t border-gray-200 bg-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-xs text-gray-400",children:i.jsx("p",{children:"v2.5 | Follow-up Master with Supabase Cloud Database | zeroriskagent.com"})})}),V&&i.jsx(rk,{onAddContact:Or,onClose:()=>W(!1)}),$e&&Ne&&i.jsx(sk,{contact:Ne,onSend:nt,onClose:()=>{Qe(!1),ne(null)}}),we&&i.jsx(ak,{onImportComplete:re,onClose:()=>ie(!1)})]})}var $o=r=>r.type==="checkbox",Bn=r=>r instanceof Date,lr=r=>r==null;const Ay=r=>typeof r=="object";var kt=r=>!lr(r)&&!Array.isArray(r)&&Ay(r)&&!Bn(r),ok=r=>kt(r)&&r.target?$o(r.target)?r.target.checked:r.target.value:r,lk=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,ck=(r,e)=>r.has(lk(e)),uk=r=>{const e=r.constructor&&r.constructor.prototype;return kt(e)&&e.hasOwnProperty("isPrototypeOf")},Vh=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Tt(r){if(r instanceof Date)return new Date(r);const e=typeof FileList<"u"&&r instanceof FileList;if(Vh&&(r instanceof Blob||e))return r;const t=Array.isArray(r);if(!t&&!(kt(r)&&uk(r)))return r;const n=t?[]:Object.create(Object.getPrototypeOf(r));for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=Tt(r[o]));return n}var kc=r=>/^\w*$/.test(r),mt=r=>r===void 0,qh=r=>Array.isArray(r)?r.filter(Boolean):[],Hh=r=>qh(r.replace(/["|']|\]/g,"").split(/\.|\[/)),me=(r,e,t)=>{if(!e||!kt(r))return t;const n=(kc(e)?[e]:Hh(e)).reduce((o,l)=>lr(o)?o:o[l],r);return mt(n)||n===r?mt(r[e])?t:r[e]:n},is=r=>typeof r=="boolean",Wr=r=>typeof r=="function",st=(r,e,t)=>{let n=-1;const o=kc(e)?[e]:Hh(e),l=o.length,u=l-1;for(;++n<l;){const h=o[n];let f=t;if(n!==u){const p=r[h];f=kt(p)||Array.isArray(p)?p:isNaN(+o[n+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;r[h]=f,r=r[h]}};const Og={BLUR:"blur",FOCUS_OUT:"focusout"},Kr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},js={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},dk=Qt.createContext(null);dk.displayName="HookFormControlContext";var hk=(r,e,t,n=!0)=>{const o={defaultValues:e._defaultValues};for(const l in r)Object.defineProperty(o,l,{get:()=>{const u=l;return e._proxyFormState[u]!==Kr.all&&(e._proxyFormState[u]=!n||Kr.all),r[u]}});return o};const fk=typeof window<"u"?Qt.useLayoutEffect:Qt.useEffect;var yr=r=>typeof r=="string",mk=(r,e,t,n,o)=>yr(r)?(n&&e.watch.add(r),me(t,r,o)):Array.isArray(r)?r.map(l=>(n&&e.watch.add(l),me(t,l))):(n&&(e.watchAll=!0),t),hh=r=>lr(r)||!Ay(r);function an(r,e,t=new WeakSet){if(hh(r)||hh(e))return Object.is(r,e);if(Bn(r)&&Bn(e))return Object.is(r.getTime(),e.getTime());const n=Object.keys(r),o=Object.keys(e);if(n.length!==o.length)return!1;if(t.has(r)||t.has(e))return!0;t.add(r),t.add(e);for(const l of n){const u=r[l];if(!o.includes(l))return!1;if(l!=="ref"){const h=e[l];if(Bn(u)&&Bn(h)||kt(u)&&kt(h)||Array.isArray(u)&&Array.isArray(h)?!an(u,h,t):!Object.is(u,h))return!1}}return!0}const pk=Qt.createContext(null);pk.displayName="HookFormContext";var Oy=(r,e,t,n,o)=>e?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[n]:o||!0}}:{},mo=r=>Array.isArray(r)?r:[r],Ig=()=>{let r=[];return{get observers(){return r},next:o=>{for(const l of r)l.next&&l.next(o)},subscribe:o=>(r.push(o),{unsubscribe:()=>{r=r.filter(l=>l!==o)}}),unsubscribe:()=>{r=[]}}};function Iy(r,e){const t={};for(const n in r)if(r.hasOwnProperty(n)){const o=r[n],l=e[n];if(o&&kt(o)&&l){const u=Iy(o,l);kt(u)&&(t[n]=u)}else r[n]&&(t[n]=l)}return t}var Zt=r=>kt(r)&&!Object.keys(r).length,Wh=r=>r.type==="file",fc=r=>{if(!Vh)return!1;const e=r?r.ownerDocument:0;return r instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Dy=r=>r.type==="select-multiple",Kh=r=>r.type==="radio",gk=r=>Kh(r)||$o(r),Id=r=>fc(r)&&r.isConnected;function xk(r,e){const t=e.slice(0,-1).length;let n=0;for(;n<t;)r=mt(r)?n++:r[e[n++]];return r}function yk(r){for(const e in r)if(r.hasOwnProperty(e)&&!mt(r[e]))return!1;return!0}function jt(r,e){const t=Array.isArray(e)?e:kc(e)?[e]:Hh(e),n=t.length===1?r:xk(r,t),o=t.length-1,l=t[o];return n&&delete n[l],o!==0&&(kt(n)&&Zt(n)||Array.isArray(n)&&yk(n))&&jt(r,t.slice(0,-1)),r}var vk=r=>{for(const e in r)if(Wr(r[e]))return!0;return!1};function $y(r){return Array.isArray(r)||kt(r)&&!vk(r)}function fh(r,e={}){for(const t in r){const n=r[t];$y(n)?(e[t]=Array.isArray(n)?[]:{},fh(n,e[t])):mt(n)||(e[t]=!0)}return e}function Ma(r,e,t){t||(t=fh(e));for(const n in r){const o=r[n];if($y(o))mt(e)||hh(t[n])?t[n]=fh(o,Array.isArray(o)?[]:{}):Ma(o,lr(e)?{}:e[n],t[n]);else{const l=e[n];t[n]=!an(o,l)}}return t}const Dg={value:!1,isValid:!1},$g={value:!0,isValid:!0};var Ly=r=>{if(Array.isArray(r)){if(r.length>1){const e=r.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return r[0].checked&&!r[0].disabled?r[0].attributes&&!mt(r[0].attributes.value)?mt(r[0].value)||r[0].value===""?$g:{value:r[0].value,isValid:!0}:$g:Dg}return Dg},Uy=(r,{valueAsNumber:e,valueAsDate:t,setValueAs:n})=>mt(r)?r:e?r===""?NaN:r&&+r:t&&yr(r)?new Date(r):n?n(r):r;const Lg={isValid:!1,value:null};var Fy=r=>Array.isArray(r)?r.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Lg):Lg;function Ug(r){const e=r.ref;return Wh(e)?e.files:Kh(e)?Fy(r.refs).value:Dy(e)?[...e.selectedOptions].map(({value:t})=>t):$o(e)?Ly(r.refs).value:Uy(mt(e.value)?r.ref.value:e.value,r)}var wk=(r,e,t,n)=>{const o={};for(const l of r){const u=me(e,l);u&&st(o,l,u._f)}return{criteriaMode:t,names:[...r],fields:o,shouldUseNativeValidation:n}},mc=r=>r instanceof RegExp,ao=r=>mt(r)?r:mc(r)?r.source:kt(r)?mc(r.value)?r.value.source:r.value:r,Fg=r=>({isOnSubmit:!r||r===Kr.onSubmit,isOnBlur:r===Kr.onBlur,isOnChange:r===Kr.onChange,isOnAll:r===Kr.all,isOnTouch:r===Kr.onTouched});const Mg="AsyncFunction";var bk=r=>!!r&&!!r.validate&&!!(Wr(r.validate)&&r.validate.constructor.name===Mg||kt(r.validate)&&Object.values(r.validate).find(e=>e.constructor.name===Mg)),_k=r=>r.mount&&(r.required||r.min||r.max||r.maxLength||r.minLength||r.pattern||r.validate),zg=(r,e,t)=>!t&&(e.watchAll||e.watch.has(r)||[...e.watch].some(n=>r.startsWith(n)&&/^\.\w+/.test(r.slice(n.length))));const po=(r,e,t,n)=>{for(const o of t||Object.keys(r)){const l=me(r,o);if(l){const{_f:u,...h}=l;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],o)&&!n)return!0;if(u.ref&&e(u.ref,u.name)&&!n)return!0;if(po(h,e))break}else if(kt(h)&&po(h,e))break}}};function Bg(r,e,t){const n=me(r,t);if(n||kc(t))return{error:n,name:t};const o=t.split(".");for(;o.length;){const l=o.join("."),u=me(e,l),h=me(r,l);if(u&&!Array.isArray(u)&&t!==l)return{name:t};if(h&&h.type)return{name:l,error:h};if(h&&h.root&&h.root.type)return{name:`${l}.root`,error:h.root};o.pop()}return{name:t}}var jk=(r,e,t,n)=>{t(r);const{name:o,...l}=r;return Zt(l)||Object.keys(l).length>=Object.keys(e).length||Object.keys(l).find(u=>e[u]===(!n||Kr.all))},Nk=(r,e,t)=>!r||!e||r===e||mo(r).some(n=>n&&(t?n===e:n.startsWith(e)||e.startsWith(n))),Sk=(r,e,t,n,o)=>o.isOnAll?!1:!t&&o.isOnTouch?!(e||r):(t?n.isOnBlur:o.isOnBlur)?!r:(t?n.isOnChange:o.isOnChange)?r:!0,kk=(r,e)=>!qh(me(r,e)).length&&jt(r,e),Ek=(r,e,t)=>{const n=mo(me(r,t));return st(n,"root",e[t]),st(r,t,n),r};function Vg(r,e,t="validate"){if(yr(r)||Array.isArray(r)&&r.every(yr)||is(r)&&!r)return{type:t,message:yr(r)?r:"",ref:e}}var $a=r=>kt(r)&&!mc(r)?r:{value:r,message:""},qg=async(r,e,t,n,o,l)=>{const{ref:u,refs:h,required:f,maxLength:p,minLength:x,min:y,max:b,pattern:w,validate:N,name:_,valueAsNumber:j,mount:P}=r._f,T=me(t,_);if(!P||e.has(_))return{};const C=h?h[0]:u,F=ae=>{o&&C.reportValidity&&(C.setCustomValidity(is(ae)?"":ae||""),C.reportValidity())},A={},K=Kh(u),H=$o(u),z=K||H,V=(j||Wh(u))&&mt(u.value)&&mt(T)||fc(u)&&u.value===""||T===""||Array.isArray(T)&&!T.length,W=Oy.bind(null,_,n,A),Z=(ae,de,_e,$e=js.maxLength,Qe=js.minLength)=>{const Ne=ae?de:_e;A[_]={type:ae?$e:Qe,message:Ne,ref:u,...W(ae?$e:Qe,Ne)}};if(l?!Array.isArray(T)||!T.length:f&&(!z&&(V||lr(T))||is(T)&&!T||H&&!Ly(h).isValid||K&&!Fy(h).isValid)){const{value:ae,message:de}=yr(f)?{value:!!f,message:f}:$a(f);if(ae&&(A[_]={type:js.required,message:de,ref:C,...W(js.required,de)},!n))return F(de),A}if(!V&&(!lr(y)||!lr(b))){let ae,de;const _e=$a(b),$e=$a(y);if(!lr(T)&&!isNaN(T)){const Qe=u.valueAsNumber||T&&+T;lr(_e.value)||(ae=Qe>_e.value),lr($e.value)||(de=Qe<$e.value)}else{const Qe=u.valueAsDate||new Date(T),Ne=ie=>new Date(new Date().toDateString()+" "+ie),ne=u.type=="time",we=u.type=="week";yr(_e.value)&&T&&(ae=ne?Ne(T)>Ne(_e.value):we?T>_e.value:Qe>new Date(_e.value)),yr($e.value)&&T&&(de=ne?Ne(T)<Ne($e.value):we?T<$e.value:Qe<new Date($e.value))}if((ae||de)&&(Z(!!ae,_e.message,$e.message,js.max,js.min),!n))return F(A[_].message),A}if((p||x)&&!V&&(yr(T)||l&&Array.isArray(T))){const ae=$a(p),de=$a(x),_e=!lr(ae.value)&&T.length>+ae.value,$e=!lr(de.value)&&T.length<+de.value;if((_e||$e)&&(Z(_e,ae.message,de.message),!n))return F(A[_].message),A}if(w&&!V&&yr(T)){const{value:ae,message:de}=$a(w);if(mc(ae)&&!T.match(ae)&&(A[_]={type:js.pattern,message:de,ref:u,...W(js.pattern,de)},!n))return F(de),A}if(N){if(Wr(N)){const ae=await N(T,t),de=Vg(ae,C);if(de&&(A[_]={...de,...W(js.validate,de.message)},!n))return F(de.message),A}else if(kt(N)){let ae={};for(const de in N){if(!Zt(ae)&&!n)break;const _e=Vg(await N[de](T,t),C,de);_e&&(ae={..._e,...W(de,_e.message)},F(_e.message),n&&(A[_]=ae))}if(!Zt(ae)&&(A[_]={ref:C,...ae},!n))return A}}return F(!0),A};const Ck={mode:Kr.onSubmit,reValidateMode:Kr.onChange,shouldFocusError:!0};function Tk(r={}){let e={...Ck,...r},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Wr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},o=kt(e.defaultValues)||kt(e.values)?Tt(e.defaultValues||e.values)||{}:{},l=e.shouldUnregister?{}:Tt(o),u={action:!1,mount:!1,watch:!1,keepIsValid:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,p=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},y={...x};let b={...y};const w={array:Ig(),state:Ig()},N=e.criteriaMode===Kr.all,_=k=>$=>{clearTimeout(p),p=setTimeout(k,$)},j=async k=>{if(!u.keepIsValid&&!e.disabled&&(y.isValid||b.isValid||k)){let $;e.resolver?($=Zt((await z()).errors),P()):$=await W(n,!0),$!==t.isValid&&w.state.next({isValid:$})}},P=(k,$)=>{!e.disabled&&(y.isValidating||y.validatingFields||b.isValidating||b.validatingFields)&&((k||Array.from(h.mount)).forEach(q=>{q&&($?st(t.validatingFields,q,$):jt(t.validatingFields,q))}),w.state.next({validatingFields:t.validatingFields,isValidating:!Zt(t.validatingFields)}))},T=(k,$=[],q,oe,se=!0,X=!0)=>{if(oe&&q&&!e.disabled){if(u.action=!0,X&&Array.isArray(me(n,k))){const pe=q(me(n,k),oe.argA,oe.argB);se&&st(n,k,pe)}if(X&&Array.isArray(me(t.errors,k))){const pe=q(me(t.errors,k),oe.argA,oe.argB);se&&st(t.errors,k,pe),kk(t.errors,k)}if((y.touchedFields||b.touchedFields)&&X&&Array.isArray(me(t.touchedFields,k))){const pe=q(me(t.touchedFields,k),oe.argA,oe.argB);se&&st(t.touchedFields,k,pe)}(y.dirtyFields||b.dirtyFields)&&(t.dirtyFields=Ma(o,l)),w.state.next({name:k,isDirty:ae(k,$),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else st(l,k,$)},C=(k,$)=>{st(t.errors,k,$),w.state.next({errors:t.errors})},F=k=>{t.errors=k,w.state.next({errors:t.errors,isValid:!1})},A=(k,$,q,oe)=>{const se=me(n,k);if(se){const X=me(l,k,mt(q)?me(o,k):q);mt(X)||oe&&oe.defaultChecked||$?st(l,k,$?X:Ug(se._f)):$e(k,X),u.mount&&!u.action&&j()}},K=(k,$,q,oe,se)=>{let X=!1,pe=!1;const He={name:k};if(!e.disabled){if(!q||oe){(y.isDirty||b.isDirty)&&(pe=t.isDirty,t.isDirty=He.isDirty=ae(),X=pe!==He.isDirty);const Ze=an(me(o,k),$);pe=!!me(t.dirtyFields,k),Ze?jt(t.dirtyFields,k):st(t.dirtyFields,k,!0),He.dirtyFields=t.dirtyFields,X=X||(y.dirtyFields||b.dirtyFields)&&pe!==!Ze}if(q){const Ze=me(t.touchedFields,k);Ze||(st(t.touchedFields,k,q),He.touchedFields=t.touchedFields,X=X||(y.touchedFields||b.touchedFields)&&Ze!==q)}X&&se&&w.state.next(He)}return X?He:{}},H=(k,$,q,oe)=>{const se=me(t.errors,k),X=(y.isValid||b.isValid)&&is($)&&t.isValid!==$;if(e.delayError&&q?(f=_(()=>C(k,q)),f(e.delayError)):(clearTimeout(p),f=null,q?st(t.errors,k,q):jt(t.errors,k)),(q?!an(se,q):se)||!Zt(oe)||X){const pe={...oe,...X&&is($)?{isValid:$}:{},errors:t.errors,name:k};t={...t,...pe},w.state.next(pe)}},z=async k=>(P(k,!0),await e.resolver(l,e.context,wk(k||h.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),V=async k=>{const{errors:$}=await z(k);if(P(k),k)for(const q of k){const oe=me($,q);oe?st(t.errors,q,oe):jt(t.errors,q)}else t.errors=$;return $},W=async(k,$,q={valid:!0})=>{for(const oe in k){const se=k[oe];if(se){const{_f:X,...pe}=se;if(X){const He=h.array.has(X.name),Ze=se._f&&bk(se._f);Ze&&y.validatingFields&&P([X.name],!0);const vt=await qg(se,h.disabled,l,N,e.shouldUseNativeValidation&&!$,He);if(Ze&&y.validatingFields&&P([X.name]),vt[X.name]&&(q.valid=!1,$||r.shouldUseNativeValidation))break;!$&&(me(vt,X.name)?He?Ek(t.errors,vt,X.name):st(t.errors,X.name,vt[X.name]):jt(t.errors,X.name))}!Zt(pe)&&await W(pe,$,q)}}return q.valid},Z=()=>{for(const k of h.unMount){const $=me(n,k);$&&($._f.refs?$._f.refs.every(q=>!Id(q)):!Id($._f.ref))&&Ve(k)}h.unMount=new Set},ae=(k,$)=>!e.disabled&&(k&&$&&st(l,k,$),!an(D(),o)),de=(k,$,q)=>mk(k,h,{...u.mount?l:mt($)?o:yr(k)?{[k]:$}:$},q,$),_e=k=>qh(me(u.mount?l:o,k,e.shouldUnregister?me(o,k,[]):[])),$e=(k,$,q={})=>{const oe=me(n,k);let se=$;if(oe){const X=oe._f;X&&(!X.disabled&&st(l,k,Uy($,X)),se=fc(X.ref)&&lr($)?"":$,Dy(X.ref)?[...X.ref.options].forEach(pe=>pe.selected=se.includes(pe.value)):X.refs?$o(X.ref)?X.refs.forEach(pe=>{(!pe.defaultChecked||!pe.disabled)&&(Array.isArray(se)?pe.checked=!!se.find(He=>He===pe.value):pe.checked=se===pe.value||!!se)}):X.refs.forEach(pe=>pe.checked=pe.value===se):Wh(X.ref)?X.ref.value="":(X.ref.value=se,X.ref.type||w.state.next({name:k,values:Tt(l)})))}(q.shouldDirty||q.shouldTouch)&&K(k,se,q.shouldTouch,q.shouldDirty,!0),q.shouldValidate&&ie(k)},Qe=(k,$,q)=>{for(const oe in $){if(!$.hasOwnProperty(oe))return;const se=$[oe],X=k+"."+oe,pe=me(n,X);(h.array.has(k)||kt(se)||pe&&!pe._f)&&!Bn(se)?Qe(X,se,q):$e(X,se,q)}},Ne=(k,$,q={})=>{const oe=me(n,k),se=h.array.has(k),X=Tt($);st(l,k,X),se?(w.array.next({name:k,values:Tt(l)}),(y.isDirty||y.dirtyFields||b.isDirty||b.dirtyFields)&&q.shouldDirty&&w.state.next({name:k,dirtyFields:Ma(o,l),isDirty:ae(k,X)})):oe&&!oe._f&&!lr(X)?Qe(k,X,q):$e(k,X,q),zg(k,h)?w.state.next({...t,name:k,values:Tt(l)}):w.state.next({name:u.mount?k:void 0,values:Tt(l)})},ne=async k=>{u.mount=!0;const $=k.target;let q=$.name,oe=!0;const se=me(n,q),X=Ze=>{oe=Number.isNaN(Ze)||Bn(Ze)&&isNaN(Ze.getTime())||an(Ze,me(l,q,Ze))},pe=Fg(e.mode),He=Fg(e.reValidateMode);if(se){let Ze,vt;const cr=$.type?Ug(se._f):ok(k),Zr=k.type===Og.BLUR||k.type===Og.FOCUS_OUT,Lo=!_k(se._f)&&!e.resolver&&!me(t.errors,q)&&!se._f.deps||Sk(Zr,me(t.touchedFields,q),t.isSubmitted,He,pe),ta=zg(q,h,Zr);st(l,q,cr),Zr?(!$||!$.readOnly)&&(se._f.onBlur&&se._f.onBlur(k),f&&f(0)):se._f.onChange&&se._f.onChange(k);const fi=K(q,cr,Zr),mi=!Zt(fi)||ta;if(!Zr&&w.state.next({name:q,type:k.type,values:Tt(l)}),Lo)return(y.isValid||b.isValid)&&(e.mode==="onBlur"?Zr&&j():Zr||j()),mi&&w.state.next({name:q,...ta?{}:fi});if(!Zr&&ta&&w.state.next({...t}),e.resolver){const{errors:ra}=await z([q]);if(P([q]),X(cr),oe){const pi=Bg(t.errors,n,q),sa=Bg(ra,n,pi.name||q);Ze=sa.error,q=sa.name,vt=Zt(ra)}}else P([q],!0),Ze=(await qg(se,h.disabled,l,N,e.shouldUseNativeValidation))[q],P([q]),X(cr),oe&&(Ze?vt=!1:(y.isValid||b.isValid)&&(vt=await W(n,!0)));oe&&(se._f.deps&&(!Array.isArray(se._f.deps)||se._f.deps.length>0)&&ie(se._f.deps),H(q,vt,Ze,fi))}},we=(k,$)=>{if(me(t.errors,$)&&k.focus)return k.focus(),1},ie=async(k,$={})=>{let q,oe;const se=mo(k);if(e.resolver){const X=await V(mt(k)?k:se);q=Zt(X),oe=k?!se.some(pe=>me(X,pe)):q}else k?(oe=(await Promise.all(se.map(async X=>{const pe=me(n,X);return await W(pe&&pe._f?{[X]:pe}:pe)}))).every(Boolean),!(!oe&&!t.isValid)&&j()):oe=q=await W(n);return w.state.next({...!yr(k)||(y.isValid||b.isValid)&&q!==t.isValid?{}:{name:k},...e.resolver||!k?{isValid:q}:{},errors:t.errors}),$.shouldFocus&&!oe&&po(n,we,k?se:h.mount),oe},D=(k,$)=>{let q={...u.mount?l:o};return $&&(q=Iy($.dirtyFields?t.dirtyFields:t.touchedFields,q)),mt(k)?q:yr(k)?me(q,k):k.map(oe=>me(q,oe))},G=(k,$)=>({invalid:!!me(($||t).errors,k),isDirty:!!me(($||t).dirtyFields,k),error:me(($||t).errors,k),isValidating:!!me(t.validatingFields,k),isTouched:!!me(($||t).touchedFields,k)}),Pe=k=>{k&&mo(k).forEach($=>jt(t.errors,$)),w.state.next({errors:k?t.errors:{}})},Oe=(k,$,q)=>{const oe=(me(n,k,{_f:{}})._f||{}).ref,se=me(t.errors,k)||{},{ref:X,message:pe,type:He,...Ze}=se;st(t.errors,k,{...Ze,...$,ref:oe}),w.state.next({name:k,errors:t.errors,isValid:!1}),q&&q.shouldFocus&&oe&&oe.focus&&oe.focus()},Me=(k,$)=>Wr(k)?w.state.subscribe({next:q=>"values"in q&&k(de(void 0,$),q)}):de(k,$,!0),Fe=k=>w.state.subscribe({next:$=>{Nk(k.name,$.name,k.exact)&&jk($,k.formState||y,U,k.reRenderRoot)&&k.callback({values:{...l},...t,...$,defaultValues:o})}}).unsubscribe,Ke=k=>(u.mount=!0,b={...b,...k.formState},Fe({...k,formState:{...x,...k.formState}})),Ve=(k,$={})=>{for(const q of k?mo(k):h.mount)h.mount.delete(q),h.array.delete(q),$.keepValue||(jt(n,q),jt(l,q)),!$.keepError&&jt(t.errors,q),!$.keepDirty&&jt(t.dirtyFields,q),!$.keepTouched&&jt(t.touchedFields,q),!$.keepIsValidating&&jt(t.validatingFields,q),!e.shouldUnregister&&!$.keepDefaultValue&&jt(o,q);w.state.next({values:Tt(l)}),w.state.next({...t,...$.keepDirty?{isDirty:ae()}:{}}),!$.keepIsValid&&j()},et=({disabled:k,name:$})=>{if(is(k)&&u.mount||k||h.disabled.has($)){const se=h.disabled.has($)!==!!k;k?h.disabled.add($):h.disabled.delete($),se&&u.mount&&!u.action&&j()}},pt=(k,$={})=>{let q=me(n,k);const oe=is($.disabled)||is(e.disabled);return st(n,k,{...q||{},_f:{...q&&q._f?q._f:{ref:{name:k}},name:k,mount:!0,...$}}),h.mount.add(k),q?et({disabled:is($.disabled)?$.disabled:e.disabled,name:k}):A(k,!0,$.value),{...oe?{disabled:$.disabled||e.disabled}:{},...e.progressive?{required:!!$.required,min:ao($.min),max:ao($.max),minLength:ao($.minLength),maxLength:ao($.maxLength),pattern:ao($.pattern)}:{},name:k,onChange:ne,onBlur:ne,ref:se=>{if(se){pt(k,$),q=me(n,k);const X=mt(se.value)&&se.querySelectorAll&&se.querySelectorAll("input,select,textarea")[0]||se,pe=gk(X),He=q._f.refs||[];if(pe?He.find(Ze=>Ze===X):X===q._f.ref)return;st(n,k,{_f:{...q._f,...pe?{refs:[...He.filter(Id),X,...Array.isArray(me(o,k))?[{}]:[]],ref:{type:X.type,name:k}}:{ref:X}}}),A(k,!1,void 0,X)}else q=me(n,k,{}),q._f&&(q._f.mount=!1),(e.shouldUnregister||$.shouldUnregister)&&!(ck(h.array,k)&&u.action)&&h.unMount.add(k)}}},Or=()=>e.shouldFocusError&&po(n,we,h.mount),fs=k=>{is(k)&&(w.state.next({disabled:k}),po(n,($,q)=>{const oe=me(n,q);oe&&($.disabled=oe._f.disabled||k,Array.isArray(oe._f.refs)&&oe._f.refs.forEach(se=>{se.disabled=oe._f.disabled||k}))},0,!1))},_r=(k,$)=>async q=>{let oe;q&&(q.preventDefault&&q.preventDefault(),q.persist&&q.persist());let se=Tt(l);if(w.state.next({isSubmitting:!0}),e.resolver){const{errors:X,values:pe}=await z();P(),t.errors=X,se=Tt(pe)}else await W(n);if(h.disabled.size)for(const X of h.disabled)jt(se,X);if(jt(t.errors,"root"),Zt(t.errors)){w.state.next({errors:{}});try{await k(se,q)}catch(X){oe=X}}else $&&await $({...t.errors},q),Or(),setTimeout(Or);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Zt(t.errors)&&!oe,submitCount:t.submitCount+1,errors:t.errors}),oe)throw oe},Qr=(k,$={})=>{me(n,k)&&(mt($.defaultValue)?Ne(k,Tt(me(o,k))):(Ne(k,$.defaultValue),st(o,k,Tt($.defaultValue))),$.keepTouched||jt(t.touchedFields,k),$.keepDirty||(jt(t.dirtyFields,k),t.isDirty=$.defaultValue?ae(k,Tt(me(o,k))):ae()),$.keepError||(jt(t.errors,k),y.isValid&&j()),w.state.next({...t}))},re=(k,$={})=>{const q=k?Tt(k):o,oe=Tt(q),se=Zt(k),X=se?o:oe;if($.keepDefaultValues||(o=q),!$.keepValues){if($.keepDirtyValues){const pe=new Set([...h.mount,...Object.keys(Ma(o,l))]);for(const He of Array.from(pe)){const Ze=me(t.dirtyFields,He),vt=me(l,He),cr=me(X,He);Ze&&!mt(vt)?st(X,He,vt):!Ze&&!mt(cr)&&Ne(He,cr)}}else{if(Vh&&mt(k))for(const pe of h.mount){const He=me(n,pe);if(He&&He._f){const Ze=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;if(fc(Ze)){const vt=Ze.closest("form");if(vt){vt.reset();break}}}}if($.keepFieldsRef)for(const pe of h.mount)Ne(pe,me(X,pe));else n={}}l=e.shouldUnregister?$.keepDefaultValues?Tt(o):{}:Tt(X),w.array.next({values:{...X}}),w.state.next({values:{...X}})}h={mount:$.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!y.isValid||!!$.keepIsValid||!!$.keepDirtyValues||!e.shouldUnregister&&!Zt(X),u.watch=!!e.shouldUnregister,u.keepIsValid=!!$.keepIsValid,u.action=!1,$.keepErrors||(t.errors={}),w.state.next({submitCount:$.keepSubmitCount?t.submitCount:0,isDirty:se?!1:$.keepDirty?t.isDirty:!!($.keepDefaultValues&&!an(k,o)),isSubmitted:$.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:se?{}:$.keepDirtyValues?$.keepDefaultValues&&l?Ma(o,l):t.dirtyFields:$.keepDefaultValues&&k?Ma(o,k):$.keepDirty?t.dirtyFields:{},touchedFields:$.keepTouched?t.touchedFields:{},errors:$.keepErrors?t.errors:{},isSubmitSuccessful:$.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},Le=(k,$)=>re(Wr(k)?k(l):k,{...e.resetOptions,...$}),nt=(k,$={})=>{const q=me(n,k),oe=q&&q._f;if(oe){const se=oe.refs?oe.refs[0]:oe.ref;se.focus&&setTimeout(()=>{se.focus(),$.shouldSelect&&Wr(se.select)&&se.select()})}},U=k=>{t={...t,...k}},qe={control:{register:pt,unregister:Ve,getFieldState:G,handleSubmit:_r,setError:Oe,_subscribe:Fe,_runSchema:z,_updateIsValidating:P,_focusError:Or,_getWatch:de,_getDirty:ae,_setValid:j,_setFieldArray:T,_setDisabledField:et,_setErrors:F,_getFieldArray:_e,_reset:re,_resetDefaultValues:()=>Wr(e.defaultValues)&&e.defaultValues().then(k=>{Le(k,e.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:Z,_disableForm:fs,_subjects:w,_proxyFormState:y,get _fields(){return n},get _formValues(){return l},get _state(){return u},set _state(k){u=k},get _defaultValues(){return o},get _names(){return h},set _names(k){h=k},get _formState(){return t},get _options(){return e},set _options(k){e={...e,...k}}},subscribe:Ke,trigger:ie,register:pt,handleSubmit:_r,watch:Me,setValue:Ne,getValues:D,reset:Le,resetField:Qr,clearErrors:Pe,unregister:Ve,setError:Oe,setFocus:nt,getFieldState:G};return{...qe,formControl:qe}}function Rk(r={}){const e=Qt.useRef(void 0),t=Qt.useRef(void 0),[n,o]=Qt.useState({isDirty:!1,isValidating:!1,isLoading:Wr(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,isReady:!1,defaultValues:Wr(r.defaultValues)?void 0:r.defaultValues});if(!e.current)if(r.formControl)e.current={...r.formControl,formState:n},r.defaultValues&&!Wr(r.defaultValues)&&r.formControl.reset(r.defaultValues,r.resetOptions);else{const{formControl:u,...h}=Tk(r);e.current={...h,formState:n}}const l=e.current.control;return l._options=r,fk(()=>{const u=l._subscribe({formState:l._proxyFormState,callback:()=>o({...l._formState}),reRenderRoot:!0});return o(h=>({...h,isReady:!0})),l._formState.isReady=!0,u},[l]),Qt.useEffect(()=>l._disableForm(r.disabled),[l,r.disabled]),Qt.useEffect(()=>{r.mode&&(l._options.mode=r.mode),r.reValidateMode&&(l._options.reValidateMode=r.reValidateMode)},[l,r.mode,r.reValidateMode]),Qt.useEffect(()=>{r.errors&&(l._setErrors(r.errors),l._focusError())},[l,r.errors]),Qt.useEffect(()=>{r.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,r.shouldUnregister]),Qt.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==n.isDirty&&l._subjects.state.next({isDirty:u})}},[l,n.isDirty]),Qt.useEffect(()=>{var u;r.values&&!an(r.values,t.current)?(l._reset(r.values,{keepFieldsRef:!0,...l._options.resetOptions}),!((u=l._options.resetOptions)===null||u===void 0)&&u.keepIsValid||l._setValid(),t.current=r.values,o(h=>({...h}))):l._resetDefaultValues()},[l,r.values]),Qt.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),e.current.formState=Qt.useMemo(()=>hk(n,l),[l,n]),e.current}const Hg=(r,e,t)=>{if(r&&"reportValidity"in r){const n=me(t,e);r.setCustomValidity(n&&n.message||""),r.reportValidity()}},My=(r,e)=>{for(const t in e.fields){const n=e.fields[t];n&&n.ref&&"reportValidity"in n.ref?Hg(n.ref,t,r):n.refs&&n.refs.forEach(o=>Hg(o,t,r))}},Pk=(r,e)=>{e.shouldUseNativeValidation&&My(r,e);const t={};for(const n in r){const o=me(e.fields,n),l=Object.assign(r[n]||{},{ref:o&&o.ref});if(Ak(e.names||Object.keys(r),n)){const u=Object.assign({},me(t,n));st(u,"root",l),st(t,n,u)}else st(t,n,l)}return t},Ak=(r,e)=>r.some(t=>t.startsWith(e+"."));var Ok=function(r,e){for(var t={};r.length;){var n=r[0],o=n.code,l=n.message,u=n.path.join(".");if(!t[u])if("unionErrors"in n){var h=n.unionErrors[0].errors[0];t[u]={message:h.message,type:h.code}}else t[u]={message:l,type:o};if("unionErrors"in n&&n.unionErrors.forEach(function(x){return x.errors.forEach(function(y){return r.push(y)})}),e){var f=t[u].types,p=f&&f[n.code];t[u]=Oy(u,e,t,o,p?[].concat(p,n.message):n.message)}r.shift()}return t},Ik=function(r,e,t){return t===void 0&&(t={}),function(n,o,l){try{return Promise.resolve((function(u,h){try{var f=Promise.resolve(r[t.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(p){return l.shouldUseNativeValidation&&My({},l),{errors:{},values:t.raw?n:p}})}catch(p){return h(p)}return f&&f.then?f.then(void 0,h):f})(0,function(u){if((function(h){return Array.isArray(h==null?void 0:h.errors)})(u))return{values:{},errors:Pk(Ok(u.errors,!l.shouldUseNativeValidation&&l.criteriaMode==="all"),l)};throw u}))}catch(u){return Promise.reject(u)}}},Xe;(function(r){r.assertEqual=o=>{};function e(o){}r.assertIs=e;function t(o){throw new Error}r.assertNever=t,r.arrayToEnum=o=>{const l={};for(const u of o)l[u]=u;return l},r.getValidEnumValues=o=>{const l=r.objectKeys(o).filter(h=>typeof o[o[h]]!="number"),u={};for(const h of l)u[h]=o[h];return r.objectValues(u)},r.objectValues=o=>r.objectKeys(o).map(function(l){return o[l]}),r.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const l=[];for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&l.push(u);return l},r.find=(o,l)=>{for(const u of o)if(l(u))return u},r.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function n(o,l=" | "){return o.map(u=>typeof u=="string"?`'${u}'`:u).join(l)}r.joinValues=n,r.jsonStringifyReplacer=(o,l)=>typeof l=="bigint"?l.toString():l})(Xe||(Xe={}));var Wg;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Wg||(Wg={}));const xe=Xe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),rn=r=>{switch(typeof r){case"undefined":return xe.undefined;case"string":return xe.string;case"number":return Number.isNaN(r)?xe.nan:xe.number;case"boolean":return xe.boolean;case"function":return xe.function;case"bigint":return xe.bigint;case"symbol":return xe.symbol;case"object":return Array.isArray(r)?xe.array:r===null?xe.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?xe.promise:typeof Map<"u"&&r instanceof Map?xe.map:typeof Set<"u"&&r instanceof Set?xe.set:typeof Date<"u"&&r instanceof Date?xe.date:xe.object;default:return xe.unknown}},te=Xe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Os extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(l){return l.message},n={_errors:[]},o=l=>{for(const u of l.issues)if(u.code==="invalid_union")u.unionErrors.map(o);else if(u.code==="invalid_return_type")o(u.returnTypeError);else if(u.code==="invalid_arguments")o(u.argumentsError);else if(u.path.length===0)n._errors.push(t(u));else{let h=n,f=0;for(;f<u.path.length;){const p=u.path[f];f===u.path.length-1?(h[p]=h[p]||{_errors:[]},h[p]._errors.push(t(u))):h[p]=h[p]||{_errors:[]},h=h[p],f++}}};return o(this),n}static assert(e){if(!(e instanceof Os))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const o of this.issues)if(o.path.length>0){const l=o.path[0];t[l]=t[l]||[],t[l].push(e(o))}else n.push(e(o));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Os.create=r=>new Os(r);const mh=(r,e)=>{let t;switch(r.code){case te.invalid_type:r.received===xe.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case te.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Xe.jsonStringifyReplacer)}`;break;case te.unrecognized_keys:t=`Unrecognized key(s) in object: ${Xe.joinValues(r.keys,", ")}`;break;case te.invalid_union:t="Invalid input";break;case te.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Xe.joinValues(r.options)}`;break;case te.invalid_enum_value:t=`Invalid enum value. Expected ${Xe.joinValues(r.options)}, received '${r.received}'`;break;case te.invalid_arguments:t="Invalid function arguments";break;case te.invalid_return_type:t="Invalid function return type";break;case te.invalid_date:t="Invalid date";break;case te.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Xe.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case te.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="bigint"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case te.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case te.custom:t="Invalid input";break;case te.invalid_intersection_types:t="Intersection results could not be merged";break;case te.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case te.not_finite:t="Number must be finite";break;default:t=e.defaultError,Xe.assertNever(r)}return{message:t}};let Dk=mh;function $k(){return Dk}const Lk=r=>{const{data:e,path:t,errorMaps:n,issueData:o}=r,l=[...t,...o.path||[]],u={...o,path:l};if(o.message!==void 0)return{...o,path:l,message:o.message};let h="";const f=n.filter(p=>!!p).slice().reverse();for(const p of f)h=p(u,{data:e,defaultError:h}).message;return{...o,path:l,message:h}};function ue(r,e){const t=$k(),n=Lk({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===mh?void 0:mh].filter(o=>!!o)});r.common.issues.push(n)}class wr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const o of t){if(o.status==="aborted")return Ie;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const o of t){const l=await o.key,u=await o.value;n.push({key:l,value:u})}return wr.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const o of t){const{key:l,value:u}=o;if(l.status==="aborted"||u.status==="aborted")return Ie;l.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof u.value<"u"||o.alwaysSet)&&(n[l.value]=u.value)}return{status:e.value,value:n}}}const Ie=Object.freeze({status:"aborted"}),co=r=>({status:"dirty",value:r}),Ar=r=>({status:"valid",value:r}),Kg=r=>r.status==="aborted",Gg=r=>r.status==="dirty",ni=r=>r.status==="valid",pc=r=>typeof Promise<"u"&&r instanceof Promise;var ve;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ve||(ve={}));class vn{constructor(e,t,n,o){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Jg=(r,e)=>{if(ni(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Os(r.common.issues);return this._error=t,this._error}}};function Be(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:o}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(u,h)=>{const{message:f}=r;return u.code==="invalid_enum_value"?{message:f??h.defaultError}:typeof h.data>"u"?{message:f??n??h.defaultError}:u.code!=="invalid_type"?{message:h.defaultError}:{message:f??t??h.defaultError}},description:o}}class Je{get description(){return this._def.description}_getType(e){return rn(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:rn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new wr,ctx:{common:e.parent.common,data:e.data,parsedType:rn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(pc(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rn(e)},o=this._parseSync({data:e,path:n.path,parent:n});return Jg(n,o)}"~validate"(e){var n,o;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rn(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:t});return ni(l)?{value:l.value}:{issues:t.common.issues}}catch(l){(o=(n=l==null?void 0:l.message)==null?void 0:n.toLowerCase())!=null&&o.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(l=>ni(l)?{value:l.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rn(e)},o=this._parse({data:e,path:n.path,parent:n}),l=await(pc(o)?o:Promise.resolve(o));return Jg(n,l)}refine(e,t){const n=o=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(o):t;return this._refinement((o,l)=>{const u=e(o),h=()=>l.addIssue({code:te.custom,...n(o)});return typeof Promise<"u"&&u instanceof Promise?u.then(f=>f?!0:(h(),!1)):u?!0:(h(),!1)})}refinement(e,t){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof t=="function"?t(n,o):t),!1))}_refinement(e){return new ii({schema:this,typeName:De.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return yn.create(this,this._def)}nullable(){return oi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ds.create(this)}promise(){return vc.create(this,this._def)}or(e){return xc.create([this,e],this._def)}and(e){return yc.create(this,e,this._def)}transform(e){return new ii({...Be(this._def),schema:this,typeName:De.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new gh({...Be(this._def),innerType:this,defaultValue:t,typeName:De.ZodDefault})}brand(){return new iE({typeName:De.ZodBranded,type:this,...Be(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new xh({...Be(this._def),innerType:this,catchValue:t,typeName:De.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Gh.create(this,e)}readonly(){return yh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Uk=/^c[^\s-]{8,}$/i,Fk=/^[0-9a-z]+$/,Mk=/^[0-9A-HJKMNP-TV-Z]{26}$/i,zk=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Bk=/^[a-z0-9_-]{21}$/i,Vk=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,qk=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Hk=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Wk="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Dd;const Kk=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Gk=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Jk=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Qk=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Zk=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Yk=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,zy="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Xk=new RegExp(`^${zy}$`);function By(r){let e="[0-5]\\d";r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`);const t=r.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function eE(r){return new RegExp(`^${By(r)}$`)}function tE(r){let e=`${zy}T${By(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function rE(r,e){return!!((e==="v4"||!e)&&Kk.test(r)||(e==="v6"||!e)&&Jk.test(r))}function sE(r,e){if(!Vk.test(r))return!1;try{const[t]=r.split(".");if(!t)return!1;const n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||"typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}function nE(r,e){return!!((e==="v4"||!e)&&Gk.test(r)||(e==="v6"||!e)&&Qk.test(r))}class gn extends Je{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==xe.string){const l=this._getOrReturnCtx(e);return ue(l,{code:te.invalid_type,expected:xe.string,received:l.parsedType}),Ie}const n=new wr;let o;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(o=this._getOrReturnCtx(e,o),ue(o,{code:te.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),n.dirty());else if(l.kind==="max")e.data.length>l.value&&(o=this._getOrReturnCtx(e,o),ue(o,{code:te.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),n.dirty());else if(l.kind==="length"){const u=e.data.length>l.value,h=e.data.length<l.value;(u||h)&&(o=this._getOrReturnCtx(e,o),u?ue(o,{code:te.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):h&&ue(o,{code:te.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),n.dirty())}else if(l.kind==="email")Hk.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"email",code:te.invalid_string,message:l.message}),n.dirty());else if(l.kind==="emoji")Dd||(Dd=new RegExp(Wk,"u")),Dd.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"emoji",code:te.invalid_string,message:l.message}),n.dirty());else if(l.kind==="uuid")zk.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"uuid",code:te.invalid_string,message:l.message}),n.dirty());else if(l.kind==="nanoid")Bk.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"nanoid",code:te.invalid_string,message:l.message}),n.dirty());else if(l.kind==="cuid")Uk.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"cuid",code:te.invalid_string,message:l.message}),n.dirty());else if(l.kind==="cuid2")Fk.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"cuid2",code:te.invalid_string,message:l.message}),n.dirty());else if(l.kind==="ulid")Mk.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"ulid",code:te.invalid_string,message:l.message}),n.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),ue(o,{validation:"url",code:te.invalid_string,message:l.message}),n.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"regex",code:te.invalid_string,message:l.message}),n.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(o=this._getOrReturnCtx(e,o),ue(o,{code:te.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),n.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(o=this._getOrReturnCtx(e,o),ue(o,{code:te.invalid_string,validation:{startsWith:l.value},message:l.message}),n.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(o=this._getOrReturnCtx(e,o),ue(o,{code:te.invalid_string,validation:{endsWith:l.value},message:l.message}),n.dirty()):l.kind==="datetime"?tE(l).test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{code:te.invalid_string,validation:"datetime",message:l.message}),n.dirty()):l.kind==="date"?Xk.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{code:te.invalid_string,validation:"date",message:l.message}),n.dirty()):l.kind==="time"?eE(l).test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{code:te.invalid_string,validation:"time",message:l.message}),n.dirty()):l.kind==="duration"?qk.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"duration",code:te.invalid_string,message:l.message}),n.dirty()):l.kind==="ip"?rE(e.data,l.version)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"ip",code:te.invalid_string,message:l.message}),n.dirty()):l.kind==="jwt"?sE(e.data,l.alg)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"jwt",code:te.invalid_string,message:l.message}),n.dirty()):l.kind==="cidr"?nE(e.data,l.version)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"cidr",code:te.invalid_string,message:l.message}),n.dirty()):l.kind==="base64"?Zk.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"base64",code:te.invalid_string,message:l.message}),n.dirty()):l.kind==="base64url"?Yk.test(e.data)||(o=this._getOrReturnCtx(e,o),ue(o,{validation:"base64url",code:te.invalid_string,message:l.message}),n.dirty()):Xe.assertNever(l);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(o=>e.test(o),{validation:t,code:te.invalid_string,...ve.errToObj(n)})}_addCheck(e){return new gn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ve.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ve.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ve.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ve.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ve.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ve.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ve.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ve.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ve.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ve.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ve.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ve.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ve.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ve.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ve.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ve.errToObj(t)})}nonempty(e){return this.min(1,ve.errToObj(e))}trim(){return new gn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new gn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new gn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}gn.create=r=>new gn({checks:[],typeName:De.ZodString,coerce:(r==null?void 0:r.coerce)??!1,...Be(r)});function aE(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=t>n?t:n,l=Number.parseInt(r.toFixed(o).replace(".","")),u=Number.parseInt(e.toFixed(o).replace(".",""));return l%u/10**o}class No extends Je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==xe.number){const l=this._getOrReturnCtx(e);return ue(l,{code:te.invalid_type,expected:xe.number,received:l.parsedType}),Ie}let n;const o=new wr;for(const l of this._def.checks)l.kind==="int"?Xe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ue(n,{code:te.invalid_type,expected:"integer",received:"float",message:l.message}),o.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(n=this._getOrReturnCtx(e,n),ue(n,{code:te.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),o.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(n=this._getOrReturnCtx(e,n),ue(n,{code:te.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),o.dirty()):l.kind==="multipleOf"?aE(e.data,l.value)!==0&&(n=this._getOrReturnCtx(e,n),ue(n,{code:te.not_multiple_of,multipleOf:l.value,message:l.message}),o.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ue(n,{code:te.not_finite,message:l.message}),o.dirty()):Xe.assertNever(l);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ve.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ve.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ve.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ve.toString(t))}setLimit(e,t,n,o){return new No({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ve.toString(o)}]})}_addCheck(e){return new No({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ve.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ve.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Xe.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}No.create=r=>new No({checks:[],typeName:De.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...Be(r)});class So extends Je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==xe.bigint)return this._getInvalidInput(e);let n;const o=new wr;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(n=this._getOrReturnCtx(e,n),ue(n,{code:te.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),o.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(n=this._getOrReturnCtx(e,n),ue(n,{code:te.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),o.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ue(n,{code:te.not_multiple_of,multipleOf:l.value,message:l.message}),o.dirty()):Xe.assertNever(l);return{status:o.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return ue(t,{code:te.invalid_type,expected:xe.bigint,received:t.parsedType}),Ie}gte(e,t){return this.setLimit("min",e,!0,ve.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ve.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ve.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ve.toString(t))}setLimit(e,t,n,o){return new So({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ve.toString(o)}]})}_addCheck(e){return new So({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}So.create=r=>new So({checks:[],typeName:De.ZodBigInt,coerce:(r==null?void 0:r.coerce)??!1,...Be(r)});class Qg extends Je{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==xe.boolean){const n=this._getOrReturnCtx(e);return ue(n,{code:te.invalid_type,expected:xe.boolean,received:n.parsedType}),Ie}return Ar(e.data)}}Qg.create=r=>new Qg({typeName:De.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...Be(r)});class gc extends Je{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==xe.date){const l=this._getOrReturnCtx(e);return ue(l,{code:te.invalid_type,expected:xe.date,received:l.parsedType}),Ie}if(Number.isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return ue(l,{code:te.invalid_date}),Ie}const n=new wr;let o;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(o=this._getOrReturnCtx(e,o),ue(o,{code:te.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),n.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(o=this._getOrReturnCtx(e,o),ue(o,{code:te.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),n.dirty()):Xe.assertNever(l);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new gc({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ve.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ve.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}gc.create=r=>new gc({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:De.ZodDate,...Be(r)});class Zg extends Je{_parse(e){if(this._getType(e)!==xe.symbol){const n=this._getOrReturnCtx(e);return ue(n,{code:te.invalid_type,expected:xe.symbol,received:n.parsedType}),Ie}return Ar(e.data)}}Zg.create=r=>new Zg({typeName:De.ZodSymbol,...Be(r)});class Yg extends Je{_parse(e){if(this._getType(e)!==xe.undefined){const n=this._getOrReturnCtx(e);return ue(n,{code:te.invalid_type,expected:xe.undefined,received:n.parsedType}),Ie}return Ar(e.data)}}Yg.create=r=>new Yg({typeName:De.ZodUndefined,...Be(r)});class Xg extends Je{_parse(e){if(this._getType(e)!==xe.null){const n=this._getOrReturnCtx(e);return ue(n,{code:te.invalid_type,expected:xe.null,received:n.parsedType}),Ie}return Ar(e.data)}}Xg.create=r=>new Xg({typeName:De.ZodNull,...Be(r)});class ex extends Je{constructor(){super(...arguments),this._any=!0}_parse(e){return Ar(e.data)}}ex.create=r=>new ex({typeName:De.ZodAny,...Be(r)});class tx extends Je{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ar(e.data)}}tx.create=r=>new tx({typeName:De.ZodUnknown,...Be(r)});class wn extends Je{_parse(e){const t=this._getOrReturnCtx(e);return ue(t,{code:te.invalid_type,expected:xe.never,received:t.parsedType}),Ie}}wn.create=r=>new wn({typeName:De.ZodNever,...Be(r)});class rx extends Je{_parse(e){if(this._getType(e)!==xe.undefined){const n=this._getOrReturnCtx(e);return ue(n,{code:te.invalid_type,expected:xe.void,received:n.parsedType}),Ie}return Ar(e.data)}}rx.create=r=>new rx({typeName:De.ZodVoid,...Be(r)});class ds extends Je{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),o=this._def;if(t.parsedType!==xe.array)return ue(t,{code:te.invalid_type,expected:xe.array,received:t.parsedType}),Ie;if(o.exactLength!==null){const u=t.data.length>o.exactLength.value,h=t.data.length<o.exactLength.value;(u||h)&&(ue(t,{code:u?te.too_big:te.too_small,minimum:h?o.exactLength.value:void 0,maximum:u?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&t.data.length<o.minLength.value&&(ue(t,{code:te.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&t.data.length>o.maxLength.value&&(ue(t,{code:te.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((u,h)=>o.type._parseAsync(new vn(t,u,t.path,h)))).then(u=>wr.mergeArray(n,u));const l=[...t.data].map((u,h)=>o.type._parseSync(new vn(t,u,t.path,h)));return wr.mergeArray(n,l)}get element(){return this._def.type}min(e,t){return new ds({...this._def,minLength:{value:e,message:ve.toString(t)}})}max(e,t){return new ds({...this._def,maxLength:{value:e,message:ve.toString(t)}})}length(e,t){return new ds({...this._def,exactLength:{value:e,message:ve.toString(t)}})}nonempty(e){return this.min(1,e)}}ds.create=(r,e)=>new ds({type:r,minLength:null,maxLength:null,exactLength:null,typeName:De.ZodArray,...Be(e)});function za(r){if(r instanceof St){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=yn.create(za(n))}return new St({...r._def,shape:()=>e})}else return r instanceof ds?new ds({...r._def,type:za(r.element)}):r instanceof yn?yn.create(za(r.unwrap())):r instanceof oi?oi.create(za(r.unwrap())):r instanceof ea?ea.create(r.items.map(e=>za(e))):r}class St extends Je{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Xe.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==xe.object){const p=this._getOrReturnCtx(e);return ue(p,{code:te.invalid_type,expected:xe.object,received:p.parsedType}),Ie}const{status:n,ctx:o}=this._processInputParams(e),{shape:l,keys:u}=this._getCached(),h=[];if(!(this._def.catchall instanceof wn&&this._def.unknownKeys==="strip"))for(const p in o.data)u.includes(p)||h.push(p);const f=[];for(const p of u){const x=l[p],y=o.data[p];f.push({key:{status:"valid",value:p},value:x._parse(new vn(o,y,o.path,p)),alwaysSet:p in o.data})}if(this._def.catchall instanceof wn){const p=this._def.unknownKeys;if(p==="passthrough")for(const x of h)f.push({key:{status:"valid",value:x},value:{status:"valid",value:o.data[x]}});else if(p==="strict")h.length>0&&(ue(o,{code:te.unrecognized_keys,keys:h}),n.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const x of h){const y=o.data[x];f.push({key:{status:"valid",value:x},value:p._parse(new vn(o,y,o.path,x)),alwaysSet:x in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const p=[];for(const x of f){const y=await x.key,b=await x.value;p.push({key:y,value:b,alwaysSet:x.alwaysSet})}return p}).then(p=>wr.mergeObjectSync(n,p)):wr.mergeObjectSync(n,f)}get shape(){return this._def.shape()}strict(e){return ve.errToObj,new St({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var l,u;const o=((u=(l=this._def).errorMap)==null?void 0:u.call(l,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:ve.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new St({...this._def,unknownKeys:"strip"})}passthrough(){return new St({...this._def,unknownKeys:"passthrough"})}extend(e){return new St({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new St({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:De.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new St({...this._def,catchall:e})}pick(e){const t={};for(const n of Xe.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new St({...this._def,shape:()=>t})}omit(e){const t={};for(const n of Xe.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new St({...this._def,shape:()=>t})}deepPartial(){return za(this)}partial(e){const t={};for(const n of Xe.objectKeys(this.shape)){const o=this.shape[n];e&&!e[n]?t[n]=o:t[n]=o.optional()}return new St({...this._def,shape:()=>t})}required(e){const t={};for(const n of Xe.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let l=this.shape[n];for(;l instanceof yn;)l=l._def.innerType;t[n]=l}return new St({...this._def,shape:()=>t})}keyof(){return Vy(Xe.objectKeys(this.shape))}}St.create=(r,e)=>new St({shape:()=>r,unknownKeys:"strip",catchall:wn.create(),typeName:De.ZodObject,...Be(e)});St.strictCreate=(r,e)=>new St({shape:()=>r,unknownKeys:"strict",catchall:wn.create(),typeName:De.ZodObject,...Be(e)});St.lazycreate=(r,e)=>new St({shape:r,unknownKeys:"strip",catchall:wn.create(),typeName:De.ZodObject,...Be(e)});class xc extends Je{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function o(l){for(const h of l)if(h.result.status==="valid")return h.result;for(const h of l)if(h.result.status==="dirty")return t.common.issues.push(...h.ctx.common.issues),h.result;const u=l.map(h=>new Os(h.ctx.common.issues));return ue(t,{code:te.invalid_union,unionErrors:u}),Ie}if(t.common.async)return Promise.all(n.map(async l=>{const u={...t,common:{...t.common,issues:[]},parent:null};return{result:await l._parseAsync({data:t.data,path:t.path,parent:u}),ctx:u}})).then(o);{let l;const u=[];for(const f of n){const p={...t,common:{...t.common,issues:[]},parent:null},x=f._parseSync({data:t.data,path:t.path,parent:p});if(x.status==="valid")return x;x.status==="dirty"&&!l&&(l={result:x,ctx:p}),p.common.issues.length&&u.push(p.common.issues)}if(l)return t.common.issues.push(...l.ctx.common.issues),l.result;const h=u.map(f=>new Os(f));return ue(t,{code:te.invalid_union,unionErrors:h}),Ie}}get options(){return this._def.options}}xc.create=(r,e)=>new xc({options:r,typeName:De.ZodUnion,...Be(e)});function ph(r,e){const t=rn(r),n=rn(e);if(r===e)return{valid:!0,data:r};if(t===xe.object&&n===xe.object){const o=Xe.objectKeys(e),l=Xe.objectKeys(r).filter(h=>o.indexOf(h)!==-1),u={...r,...e};for(const h of l){const f=ph(r[h],e[h]);if(!f.valid)return{valid:!1};u[h]=f.data}return{valid:!0,data:u}}else if(t===xe.array&&n===xe.array){if(r.length!==e.length)return{valid:!1};const o=[];for(let l=0;l<r.length;l++){const u=r[l],h=e[l],f=ph(u,h);if(!f.valid)return{valid:!1};o.push(f.data)}return{valid:!0,data:o}}else return t===xe.date&&n===xe.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class yc extends Je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=(l,u)=>{if(Kg(l)||Kg(u))return Ie;const h=ph(l.value,u.value);return h.valid?((Gg(l)||Gg(u))&&t.dirty(),{status:t.value,value:h.data}):(ue(n,{code:te.invalid_intersection_types}),Ie)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([l,u])=>o(l,u)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}yc.create=(r,e,t)=>new yc({left:r,right:e,typeName:De.ZodIntersection,...Be(t)});class ea extends Je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.array)return ue(n,{code:te.invalid_type,expected:xe.array,received:n.parsedType}),Ie;if(n.data.length<this._def.items.length)return ue(n,{code:te.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ie;!this._def.rest&&n.data.length>this._def.items.length&&(ue(n,{code:te.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const l=[...n.data].map((u,h)=>{const f=this._def.items[h]||this._def.rest;return f?f._parse(new vn(n,u,n.path,h)):null}).filter(u=>!!u);return n.common.async?Promise.all(l).then(u=>wr.mergeArray(t,u)):wr.mergeArray(t,l)}get items(){return this._def.items}rest(e){return new ea({...this._def,rest:e})}}ea.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ea({items:r,typeName:De.ZodTuple,rest:null,...Be(e)})};class sx extends Je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.map)return ue(n,{code:te.invalid_type,expected:xe.map,received:n.parsedType}),Ie;const o=this._def.keyType,l=this._def.valueType,u=[...n.data.entries()].map(([h,f],p)=>({key:o._parse(new vn(n,h,n.path,[p,"key"])),value:l._parse(new vn(n,f,n.path,[p,"value"]))}));if(n.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const f of u){const p=await f.key,x=await f.value;if(p.status==="aborted"||x.status==="aborted")return Ie;(p.status==="dirty"||x.status==="dirty")&&t.dirty(),h.set(p.value,x.value)}return{status:t.value,value:h}})}else{const h=new Map;for(const f of u){const p=f.key,x=f.value;if(p.status==="aborted"||x.status==="aborted")return Ie;(p.status==="dirty"||x.status==="dirty")&&t.dirty(),h.set(p.value,x.value)}return{status:t.value,value:h}}}}sx.create=(r,e,t)=>new sx({valueType:e,keyType:r,typeName:De.ZodMap,...Be(t)});class ko extends Je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.set)return ue(n,{code:te.invalid_type,expected:xe.set,received:n.parsedType}),Ie;const o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(ue(n,{code:te.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),t.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(ue(n,{code:te.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),t.dirty());const l=this._def.valueType;function u(f){const p=new Set;for(const x of f){if(x.status==="aborted")return Ie;x.status==="dirty"&&t.dirty(),p.add(x.value)}return{status:t.value,value:p}}const h=[...n.data.values()].map((f,p)=>l._parse(new vn(n,f,n.path,p)));return n.common.async?Promise.all(h).then(f=>u(f)):u(h)}min(e,t){return new ko({...this._def,minSize:{value:e,message:ve.toString(t)}})}max(e,t){return new ko({...this._def,maxSize:{value:e,message:ve.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ko.create=(r,e)=>new ko({valueType:r,minSize:null,maxSize:null,typeName:De.ZodSet,...Be(e)});class nx extends Je{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}nx.create=(r,e)=>new nx({getter:r,typeName:De.ZodLazy,...Be(e)});class ax extends Je{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ue(t,{received:t.data,code:te.invalid_literal,expected:this._def.value}),Ie}return{status:"valid",value:e.data}}get value(){return this._def.value}}ax.create=(r,e)=>new ax({value:r,typeName:De.ZodLiteral,...Be(e)});function Vy(r,e){return new ai({values:r,typeName:De.ZodEnum,...Be(e)})}class ai extends Je{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return ue(t,{expected:Xe.joinValues(n),received:t.parsedType,code:te.invalid_type}),Ie}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ue(t,{received:t.data,code:te.invalid_enum_value,options:n}),Ie}return Ar(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ai.create(e,{...this._def,...t})}exclude(e,t=this._def){return ai.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}ai.create=Vy;class ix extends Je{_parse(e){const t=Xe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==xe.string&&n.parsedType!==xe.number){const o=Xe.objectValues(t);return ue(n,{expected:Xe.joinValues(o),received:n.parsedType,code:te.invalid_type}),Ie}if(this._cache||(this._cache=new Set(Xe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const o=Xe.objectValues(t);return ue(n,{received:n.data,code:te.invalid_enum_value,options:o}),Ie}return Ar(e.data)}get enum(){return this._def.values}}ix.create=(r,e)=>new ix({values:r,typeName:De.ZodNativeEnum,...Be(e)});class vc extends Je{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==xe.promise&&t.common.async===!1)return ue(t,{code:te.invalid_type,expected:xe.promise,received:t.parsedType}),Ie;const n=t.parsedType===xe.promise?t.data:Promise.resolve(t.data);return Ar(n.then(o=>this._def.type.parseAsync(o,{path:t.path,errorMap:t.common.contextualErrorMap})))}}vc.create=(r,e)=>new vc({type:r,typeName:De.ZodPromise,...Be(e)});class ii extends Je{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===De.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=this._def.effect||null,l={addIssue:u=>{ue(n,u),u.fatal?t.abort():t.dirty()},get path(){return n.path}};if(l.addIssue=l.addIssue.bind(l),o.type==="preprocess"){const u=o.transform(n.data,l);if(n.common.async)return Promise.resolve(u).then(async h=>{if(t.value==="aborted")return Ie;const f=await this._def.schema._parseAsync({data:h,path:n.path,parent:n});return f.status==="aborted"?Ie:f.status==="dirty"||t.value==="dirty"?co(f.value):f});{if(t.value==="aborted")return Ie;const h=this._def.schema._parseSync({data:u,path:n.path,parent:n});return h.status==="aborted"?Ie:h.status==="dirty"||t.value==="dirty"?co(h.value):h}}if(o.type==="refinement"){const u=h=>{const f=o.refinement(h,l);if(n.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(n.common.async===!1){const h=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return h.status==="aborted"?Ie:(h.status==="dirty"&&t.dirty(),u(h.value),{status:t.value,value:h.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(h=>h.status==="aborted"?Ie:(h.status==="dirty"&&t.dirty(),u(h.value).then(()=>({status:t.value,value:h.value}))))}if(o.type==="transform")if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ni(u))return Ie;const h=o.transform(u.value,l);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:h}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>ni(u)?Promise.resolve(o.transform(u.value,l)).then(h=>({status:t.value,value:h})):Ie);Xe.assertNever(o)}}ii.create=(r,e,t)=>new ii({schema:r,typeName:De.ZodEffects,effect:e,...Be(t)});ii.createWithPreprocess=(r,e,t)=>new ii({schema:e,effect:{type:"preprocess",transform:r},typeName:De.ZodEffects,...Be(t)});class yn extends Je{_parse(e){return this._getType(e)===xe.undefined?Ar(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yn.create=(r,e)=>new yn({innerType:r,typeName:De.ZodOptional,...Be(e)});class oi extends Je{_parse(e){return this._getType(e)===xe.null?Ar(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oi.create=(r,e)=>new oi({innerType:r,typeName:De.ZodNullable,...Be(e)});class gh extends Je{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===xe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}gh.create=(r,e)=>new gh({innerType:r,typeName:De.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Be(e)});class xh extends Je{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return pc(o)?o.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new Os(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Os(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}xh.create=(r,e)=>new xh({innerType:r,typeName:De.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Be(e)});class ox extends Je{_parse(e){if(this._getType(e)!==xe.nan){const n=this._getOrReturnCtx(e);return ue(n,{code:te.invalid_type,expected:xe.nan,received:n.parsedType}),Ie}return{status:"valid",value:e.data}}}ox.create=r=>new ox({typeName:De.ZodNaN,...Be(r)});class iE extends Je{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Gh extends Je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Ie:l.status==="dirty"?(t.dirty(),co(l.value)):this._def.out._parseAsync({data:l.value,path:n.path,parent:n})})();{const o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Ie:o.status==="dirty"?(t.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,t){return new Gh({in:e,out:t,typeName:De.ZodPipeline})}}class yh extends Je{_parse(e){const t=this._def.innerType._parse(e),n=o=>(ni(o)&&(o.value=Object.freeze(o.value)),o);return pc(t)?t.then(o=>n(o)):n(t)}unwrap(){return this._def.innerType}}yh.create=(r,e)=>new yh({innerType:r,typeName:De.ZodReadonly,...Be(e)});var De;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(De||(De={}));const io=gn.create;wn.create;ds.create;const oE=St.create;xc.create;yc.create;ea.create;ai.create;vc.create;yn.create;oi.create;const lE=oE({name:io().min(2,"Name must be at least 2 characters"),email:io().email("Please enter a valid email address"),phone:io().min(10,"Please enter a valid phone number"),subject:io().min(5,"Subject must be at least 5 characters"),message:io().min(10,"Message must be at least 10 characters")});function cE(){const[r,e]=S.useState(!1),[t,n]=S.useState("idle"),[o,l]=S.useState(""),{register:u,handleSubmit:h,reset:f,formState:{errors:p}}=Rk({resolver:Ik(lE)}),x=async y=>{e(!0),n("idle"),l("");try{const b=await ic.sendContactForm({name:y.name,email:y.email,phone:y.phone,subject:y.subject,message:y.message});b.success?(n("success"),f()):(n("error"),l(b.error||"Failed to send message"))}catch(b){n("error"),l("An unexpected error occurred"),console.error("Contact form submission error:",b)}finally{e(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-red-900 to-slate-900 text-white",children:[i.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-red-500/20 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-orange-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),i.jsx("nav",{className:"fixed top-0 w-full bg-slate-900/50 backdrop-blur-xl border-b border-white/10 z-50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-20",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-red-500 to-orange-600 rounded-lg",children:i.jsx("span",{className:"material-icon text-white",style:{fontSize:"28px"},children:"local_hospital"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Zero Risk Agent"}),i.jsx("p",{className:"text-xs text-gray-400",children:"AI Revenue Recovery"})]})]}),i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("a",{href:"/",className:"flex items-center gap-2 text-sm text-gray-300 hover:text-white transition-colors duration-200",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"18px"},children:"home"}),i.jsx("span",{children:"Home"})]}),i.jsxs("a",{href:"/login",className:"flex items-center gap-2 text-sm text-gray-300 hover:text-white transition-colors duration-200",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"18px"},children:"login"}),i.jsx("span",{children:"Login"})]})]})]})})}),i.jsx("div",{className:"pt-32 pb-20 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-12 relative z-10",children:[i.jsx("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl p-4 mb-8",children:i.jsx("span",{className:"material-icon text-white",style:{fontSize:"32px"},children:"contact_mail"})}),i.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Contact Us"}),i.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Have questions about our AI-powered claims recovery system? We're here to help."})]}),i.jsxs("div",{className:"relative group max-w-2xl mx-auto",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-red-600 via-orange-600 to-red-600 rounded-3xl blur-xl opacity-50 group-hover:opacity-75 transition duration-300"}),i.jsxs("div",{className:"relative bg-slate-800/50 backdrop-blur-xl rounded-3xl p-8 border border-white/10",children:[t==="success"&&i.jsxs("div",{className:"mb-6 bg-green-900/30 border border-green-500/50 rounded-xl p-4 flex items-center gap-3",children:[i.jsx("span",{className:"material-icon text-green-400",children:"check_circle"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-green-400 font-medium",children:"Message sent successfully!"}),i.jsx("p",{className:"text-green-300 text-sm",children:"We'll get back to you within 24 hours."})]})]}),t==="error"&&i.jsxs("div",{className:"mb-6 bg-red-900/30 border border-red-500/50 rounded-xl p-4 flex items-center gap-3",children:[i.jsx("span",{className:"material-icon text-red-400",children:"error"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-red-400 font-medium",children:"Failed to send message"}),i.jsx("p",{className:"text-red-300 text-sm",children:o})]})]}),i.jsxs("form",{onSubmit:h(x),className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx("span",{className:"material-icon text-red-400 mr-2",style:{fontSize:"16px"},children:"person"}),"Full Name"]}),i.jsx("input",{...u("name"),type:"text",className:"w-full bg-slate-900/50 border border-white/20 text-white px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your full name"}),p.name&&i.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"error"}),p.name.message]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx("span",{className:"material-icon text-red-400 mr-2",style:{fontSize:"16px"},children:"phone"}),"Phone Number"]}),i.jsx("input",{...u("phone"),type:"tel",className:"w-full bg-slate-900/50 border border-white/20 text-white px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200",placeholder:"+91 98765 43210"}),p.phone&&i.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"error"}),p.phone.message]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx("span",{className:"material-icon text-red-400 mr-2",style:{fontSize:"16px"},children:"email"}),"Email Address"]}),i.jsx("input",{...u("email"),type:"email",className:"w-full bg-slate-900/50 border border-white/20 text-white px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200",placeholder:"your.email@company.com"}),p.email&&i.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"error"}),p.email.message]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx("span",{className:"material-icon text-red-400 mr-2",style:{fontSize:"16px"},children:"subject"}),"Subject"]}),i.jsx("input",{...u("subject"),type:"text",className:"w-full bg-slate-900/50 border border-white/20 text-white px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200",placeholder:"How can we help you?"}),p.subject&&i.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"error"}),p.subject.message]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx("span",{className:"material-icon text-red-400 mr-2",style:{fontSize:"16px"},children:"message"}),"Message"]}),i.jsx("textarea",{...u("message"),rows:5,className:"w-full bg-slate-900/50 border border-white/20 text-white px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200 resize-none",placeholder:"Tell us about your hospital, current claims challenges, and how we can help..."}),p.message&&i.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[i.jsx("span",{className:"material-icon",style:{fontSize:"14px"},children:"error"}),p.message.message]})]}),i.jsx("div",{className:"pt-4",children:i.jsxs("button",{type:"submit",disabled:r,className:"group relative w-full disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-red-600 to-orange-600 rounded-xl blur opacity-75 group-hover:opacity-100 group-disabled:opacity-50 transition duration-200"}),i.jsx("div",{className:"relative px-8 py-4 bg-gradient-to-r from-red-600 to-orange-600 rounded-xl flex items-center justify-center gap-3 text-lg font-bold group-hover:scale-105 group-disabled:scale-100 transition-transform duration-200",children:r?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),i.jsx("span",{children:"Sending Message..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-icon",children:"send"}),i.jsx("span",{children:"Send Message"})]})})]})})]}),i.jsxs("div",{className:"mt-12 pt-8 border-t border-white/10",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-6 text-center",children:"Other Ways to Reach Us"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex p-3 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-lg mb-3",children:i.jsx("span",{className:"material-icon text-white",style:{fontSize:"24px"},children:"email"})}),i.jsx("p",{className:"text-sm text-gray-400",children:"Email"}),i.jsx("p",{className:"text-white font-medium",children:"aimsaiproject@gmail.com"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex p-3 bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg mb-3",children:i.jsx("span",{className:"material-icon text-white",style:{fontSize:"24px"},children:"call"})}),i.jsx("p",{className:"text-sm text-gray-400",children:"Phone"}),i.jsx("p",{className:"text-white font-medium",children:"+91-22-12345678"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex p-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg mb-3",children:i.jsx("span",{className:"material-icon text-white",style:{fontSize:"24px"},children:"schedule"})}),i.jsx("p",{className:"text-sm text-gray-400",children:"Response Time"}),i.jsx("p",{className:"text-white font-medium",children:"Within 24 hours"})]})]})]})]})]})]})}),i.jsx("footer",{className:"relative bg-slate-900/80 backdrop-blur-xl border-t border-white/10 py-8 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto text-center text-sm text-gray-500",children:[i.jsx("p",{children:"v1.3 - 2026-01-23 | Contact Form with EmailJS Integration"}),i.jsx("p",{className:"mt-2",children:" 2026 Zero Risk Agent. All rights reserved."})]})})]})}function uE(){return i.jsx(GN,{children:i.jsx(Xb,{children:i.jsxs(Cb,{children:[i.jsx(Ht,{path:"/",element:i.jsx(eS,{})}),i.jsx(Ht,{path:"/contact",element:i.jsx(cE,{})}),i.jsx(Ht,{path:"/login",element:i.jsx(rS,{})}),i.jsx(Ht,{path:"/register",element:i.jsx(iS,{})}),i.jsx(Ht,{path:"/dashboard",element:i.jsxs(ns,{children:[i.jsx(as,{}),i.jsx(XN,{})]})}),i.jsx(Ht,{path:"/dashboard/super-admin",element:i.jsxs(ns,{requiredRole:["super_admin"],children:[i.jsx(as,{}),i.jsx(gy,{})]})}),i.jsx(Ht,{path:"/dashboard/admin",element:i.jsxs(ns,{requiredRole:["hospital_admin"],children:[i.jsx(as,{}),i.jsx(vy,{})]})}),i.jsx(Ht,{path:"/dashboard/staff",element:i.jsxs(ns,{requiredRole:["staff"],children:[i.jsx(as,{}),i.jsx(wy,{})]})}),i.jsx(Ht,{path:"/recovery",element:i.jsxs(ns,{requireFinancialAccess:!0,children:[i.jsx(as,{}),i.jsx(uS,{})]})}),i.jsx(Ht,{path:"/nmi",element:i.jsxs(ns,{children:[i.jsx(as,{}),i.jsx(bS,{})]})}),i.jsx(Ht,{path:"/upload",element:i.jsxs(ns,{children:[i.jsx(as,{}),i.jsx(IS,{})]})}),i.jsx(Ht,{path:"/extractions",element:i.jsxs(ns,{children:[i.jsx(as,{}),i.jsx($S,{})]})}),i.jsx(Ht,{path:"/users",element:i.jsxs(ns,{requiredRole:["hospital_admin","super_admin"],children:[i.jsx(as,{}),i.jsx(US,{})]})}),i.jsx(Ht,{path:"/followups",element:i.jsxs(ns,{children:[i.jsx(as,{}),i.jsx(ik,{})]})}),i.jsx(Ht,{path:"*",element:i.jsx(Hx,{to:"/dashboard",replace:!0})})]})})})}const dE=new vw({defaultOptions:{queries:{staleTime:300*1e3,retry:1,refetchOnWindowFocus:!1}}});Jv.createRoot(document.getElementById("root")).render(i.jsx(S.StrictMode,{children:i.jsx(ww,{client:dE,children:i.jsx(uE,{})})}));
//# sourceMappingURL=index-Bwfi-nvq.js.map
